/*
  This software is copyright Kong Inc. and its licensors.
  Use of the software is subject to the agreement between your organization
  and Kong Inc. If there is no such agreement, use is governed by and
  subject to the terms of the Kong Master Software License Agreement found
  at https://konghq.com/enterprisesoftwarelicense/.
*/

import{F as I,__tla as b}from"./FetchWrapper.51724faf.3_3_0_0.js";import{E as k,__tla as P}from"./EntityConfiguration.03651df4.3_3_0_0.js";import{L as $,a as E,__tla as F}from"./LeafFooter.1081afc2.3_3_0_0.js";import{B as L,__tla as q}from"./Breadcrumbs.6127883e.3_3_0_0.js";import{a as B,__tla as N}from"./Route.a29fff26.3_3_0_0.js";import{E as Q,__tla as C}from"./EntityMixin.2764673d.3_3_0_0.js";import{_ as S,z as x,Z as D,Y as c,aF as u,a4 as H,r as i,c as M,a as O,b as s,w as n,o as l,l as j,d as W,t as z,h as V,__tla as Y}from"./index.84d84090.3_3_0_0.js";import{R as Z}from"./RedirectMixin.efeb36f2.3_3_0_0.js";import{__tla as A}from"./KDataProvider.78c9bca8.3_3_0_0.js";import{__tla as G}from"./EntityToggleBadge.6a1cd1fb.3_3_0_0.js";import{__tla as J}from"./ConfirmModalDialog.af276128.3_3_0_0.js";import{__tla as K}from"./monaco-editor.90904fcf.3_3_0_0.js";import"./icon-help.699f8c28.3_3_0_0.js";import"./ArrayCardContainerFields.468b3825.3_3_0_0.js";import"./typedefs.6c779761.3_3_0_0.js";import"./index.6d4e40f9.3_3_0_0.js";import"./transform.db23dc95.3_3_0_0.js";import"./marked.esm.77963db0.3_3_0_0.js";import{__tla as T}from"./EntityButton.1838e0e9.3_3_0_0.js";import{__tla as U}from"./EntityFilter.bf4158bc.3_3_0_0.js";let d,X=Promise.all([(()=>{try{return b}catch{}})(),(()=>{try{return P}catch{}})(),(()=>{try{return F}catch{}})(),(()=>{try{return q}catch{}})(),(()=>{try{return N}catch{}})(),(()=>{try{return C}catch{}})(),(()=>{try{return Y}catch{}})(),(()=>{try{return A}catch{}})(),(()=>{try{return G}catch{}})(),(()=>{try{return J}catch{}})(),(()=>{try{return K}catch{}})(),(()=>{try{return T}catch{}})(),(()=>{try{return U}catch{}})()]).then(async()=>{const _={name:"LeafPagesRoute",components:{FetchWrapper:I,LeafHeader:$,LeafFooter:E,EntityConfiguration:k,Breadcrumbs:L},mixins:[Q,Z],props:{entity:{type:Object,default:()=>({name:"Route",path:"route",rootPath:"routes"})},serviceRouteName:{type:String,default:null},pluginRouteNames:{type:Object,default:()=>({selectRouteName:"select-plugin",viewRouteName:"view-plugin"})},canEdit:{type:Boolean,default:!0}},data(){return{record:null,service:null,skeletonProps:{"table-rows":2,"table-columns":3,type:"table"}}},computed:{...x(D,{config:"infoConfig"}),configSchema(){return B(this.config.router_flavor)},id(){return this.record&&this.record.id||this.entity.id||this.$route.params.routeId||this.$route.params.id},serviceId(){return this.$route.params.id},resourceEndpoint(){return`${this.entity.rootPath}/${this.id}`},title(){return this.record?this.record.name||this.record.id:""},titleMapping(){let t=c(this.service,"services")||this.serviceId;u(t)&&(t=t.split("-")[0].trim());let e=c(this.record,"routes")||this.id;return u(e)&&(e=e.split("-")[0].trim()),{id:t,routeId:e}},entity_query(){return{entity_id:this.id,entity_type:"route_id"}},entityId(){return this.entity.id||this.$route.query.entity_id},fields(){return{entity_id:this.id,entity_type:"route_id"}},viewRoute(){return{name:"show-route",query:{...this.createRedirectRouteQuery(),...this.createPostDeleteRouteQuery(),serviceId:this.serviceId}}},editRoute(){return{name:"update-route",query:{...this.createRedirectRouteQuery(),...this.createPostDeleteRouteQuery(),serviceId:this.serviceId}}}},methods:{async handleResolve(t){if(this.record=t,t.service&&t.service.id)if(this.serviceId!==t.service.id)this.$router.replace({path:"/404"});else try{const{data:e}=await this.$api.findRecord("services",t.service.id);this.service=e,this.record.service={id:e.id,name:c(e,"services")}}catch(e){H(this.$router,404,"/404",{replace:!0})(e)}}}},p={class:"route-details-wrapper"},m={class:"route-details"};function h(t,e,tt,et,o,r){const y=i("Breadcrumbs"),f=i("LeafHeader"),v=i("router-link"),R=i("EntityConfiguration"),g=i("LeafFooter"),w=i("FetchWrapper");return l(),M("div",p,[O("section",m,[s(y,{"title-mapping":r.titleMapping},null,8,["title-mapping"]),s(w,{url:r.resourceEndpoint,"skeleton-props":o.skeletonProps,onResolve:r.handleResolve},{default:n(()=>[s(f,{record:o.record,"view-route":r.viewRoute,"edit-route":r.editRoute,entity:"routes"},null,8,["record","view-route","edit-route"]),s(R,{record:o.record,"config-schema":r.configSchema,"no-title":"",entity:"services","entity-name":"service"},{service:n(({value:a})=>[a&&a.id?(l(),j(v,{key:0,to:{name:"show-service",params:{id:a.id,workspace:t.workspace}},"data-testid":"goto-service"},{default:n(()=>[W(z(a.name||a.id),1)]),_:2},1032,["to"])):V("",!0)]),_:1},8,["record","config-schema"]),s(g,{record:o.record,"view-route":r.viewRoute,entity:"routes"},null,8,["record","view-route"])]),_:1},8,["url","skeleton-props","onResolve"])])])}d=S(_,[["render",h]])});export{X as __tla,d as default};
