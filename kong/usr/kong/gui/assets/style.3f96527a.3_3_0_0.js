/*
  This software is copyright Kong Inc. and its licensors.
  Use of the software is subject to the agreement between your organization
  and Kong Inc. If there is no such agreement, use is governed by and
  subject to the terms of the Kong Master Software License Agreement found
  at https://konghq.com/enterprisesoftwarelicense/.
*/

import{ag as qt,aw as Kp,B as ae,C as ve,ak as Oi,ax as rc,r as he,o as Z,c as pe,b as $,O as po,ay as T,w as R,d as xe,t as J,k as Pi,ah as Hi,l as st,R as ic,U as fo,i as nc,a as me,G as zr,h as yo,az as qp,aA as zp,y as Wg,V as Jg,aB as Xg,__tla as Zg}from"./index.84d84090.3_3_0_0.js";let Wp,Jp,Yg=Promise.all([(()=>{try{return Zg}catch{}})()]).then(async()=>{const Yp={title:"Certificates",list:{toolbar_actions:{new_certificate:"New Certificate"},table_headers:{subject:"Subject",expiry:"Expiry",san:"SAN",cert:"Cert",tags:"Tags"},empty_state:{title:"Configure a New Certificate",description:"Certificates handle SSL/TLS termination for encrypted requests."}},actions:{create:"New Certificate",copy_id:"Copy ID",copy_json:"Copy JSON",edit:"Edit",delete:"Delete",clear:"Clear",view:"View Details"},search:{placeholder:"Filter by exact ID"},delete:{title:"Delete a Certificate",description:"Your organization's original certificate {bolded-text}.",boldedText:"will not be affected",description2:"This action cannot be reversed so make sure to check the certificate usage before deleting."},errors:{general:"Certificates could not be retrieved",delete:"The certificate could not be deleted at this time",copy:"Failed to copy to clipboard"},copy:{success:"Copied {val} to clipboard",success_brief:"Successfully copied to clipboard"}},Qp={certificates:Yp,"ca-certificates":{title:"CA Certificates",list:{toolbar_actions:{new_ca_certificate:"New CA Certificate"},table_headers:{issuer:"Issuer",expiry:"Expiry",tags:"Tags"},empty_state:{title:"Configure a New CA Certificate",description:"CA certificates validate client or server certificates."}},actions:{create:"New CA Certificate",copy_id:"Copy ID",copy_json:"Copy JSON",edit:"Edit",delete:"Delete",clear:"Clear",view:"View Details"},search:{placeholder:"Filter by exact ID"},delete:{title:"Delete a CA Certificate",description:"Your organization's original certificate {bolded-text}.",boldedText:"will not be affected",description2:"This action cannot be reversed so make sure to check the certificate usage before deleting."},errors:{general:"CA Certificates could not be retrieved",delete:"The CA Certificate could not be deleted at this time",copy:"Failed to copy to clipboard"},copy:{success:"Copied {val} to clipboard",success_brief:"Successfully copied to clipboard"}}};function ef(){const t=qp("en-us",Qp);return{i18n:t,i18nT:zp(t)}}var go=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},oc;(function(t){(function(e){var r=typeof go=="object"?go:typeof self=="object"?self:typeof this=="object"?this:Function("return this;")(),i=n(t);typeof r.Reflect>"u"?r.Reflect=t:i=n(r.Reflect,i),e(i);function n(o,s){return function(a,l){typeof o[a]!="function"&&Object.defineProperty(o,a,{configurable:!0,writable:!0,value:l}),s&&s(a,l)}}})(function(e){var r=Object.prototype.hasOwnProperty,i=typeof Symbol=="function",n=i&&typeof Symbol.toPrimitive<"u"?Symbol.toPrimitive:"@@toPrimitive",o=i&&typeof Symbol.iterator<"u"?Symbol.iterator:"@@iterator",s=typeof Object.create=="function",a={__proto__:[]}instanceof Array,l=!s&&!a,h={create:s?function(){return tc(Object.create(null))}:a?function(){return tc({__proto__:null})}:function(){return tc({})},has:l?function(b,E){return r.call(b,E)}:function(b,E){return E in b},get:l?function(b,E){return r.call(b,E)?b[E]:void 0}:function(b,E){return b[E]}},p=Object.getPrototypeOf(Function),y=typeof process=="object"&&process.env&&process.env.REFLECT_METADATA_USE_MAP_POLYFILL==="true",B=!y&&typeof Map=="function"&&typeof Map.prototype.entries=="function"?Map:Kg(),w=!y&&typeof Set=="function"&&typeof Set.prototype.entries=="function"?Set:qg(),f=!y&&typeof WeakMap=="function"?WeakMap:zg(),d=new f;function v(b,E,x,N){if(ye(x)){if(!G(b))throw new TypeError;if(!Ue(E))throw new TypeError;return vt(b,E)}else{if(!G(b))throw new TypeError;if(!ge(E))throw new TypeError;if(!ge(N)&&!ye(N)&&!St(N))throw new TypeError;return St(N)&&(N=void 0),x=I(x),ot(b,E,x,N)}}e("decorate",v);function m(b,E){function x(N,U){if(!ge(N))throw new TypeError;if(!ye(U)&&!Kr(U))throw new TypeError;wt(b,E,N,U)}return x}e("metadata",m);function S(b,E,x,N){if(!ge(x))throw new TypeError;return ye(N)||(N=I(N)),wt(b,E,x,N)}e("defineMetadata",S);function A(b,E,x){if(!ge(E))throw new TypeError;return ye(x)||(x=I(x)),Gr(b,E,x)}e("hasMetadata",A);function V(b,E,x){if(!ge(E))throw new TypeError;return ye(x)||(x=I(x)),bt(b,E,x)}e("hasOwnMetadata",V);function ne(b,E,x){if(!ge(E))throw new TypeError;return ye(x)||(x=I(x)),Ze(b,E,x)}e("getMetadata",ne);function de(b,E,x){if(!ge(E))throw new TypeError;return ye(x)||(x=I(x)),Ye(b,E,x)}e("getOwnMetadata",de);function te(b,E){if(!ge(b))throw new TypeError;return ye(E)||(E=I(E)),dr(b,E)}e("getMetadataKeys",te);function $e(b,E){if(!ge(b))throw new TypeError;return ye(E)||(E=I(E)),yr(b,E)}e("getOwnMetadataKeys",$e);function mt(b,E,x){if(!ge(E))throw new TypeError;ye(x)||(x=I(x));var N=jt(E,x,!1);if(ye(N)||!N.delete(b))return!1;if(N.size>0)return!0;var U=d.get(E);return U.delete(x),U.size>0||d.delete(E),!0}e("deleteMetadata",mt);function vt(b,E){for(var x=b.length-1;x>=0;--x){var N=b[x],U=N(E);if(!ye(U)&&!St(U)){if(!Ue(U))throw new TypeError;E=U}}return E}function ot(b,E,x,N){for(var U=b.length-1;U>=0;--U){var ke=b[U],z=ke(E,x,N);if(!ye(z)&&!St(z)){if(!ge(z))throw new TypeError;N=z}}return N}function jt(b,E,x){var N=d.get(b);if(ye(N)){if(!x)return;N=new B,d.set(b,N)}var U=N.get(E);if(ye(U)){if(!x)return;U=new B,N.set(E,U)}return U}function Gr(b,E,x){var N=bt(b,E,x);if(N)return!0;var U=ec(E);return St(U)?!1:Gr(b,U,x)}function bt(b,E,x){var N=jt(E,x,!1);return ye(N)?!1:D(N.has(b))}function Ze(b,E,x){var N=bt(b,E,x);if(N)return Ye(b,E,x);var U=ec(E);if(!St(U))return Ze(b,U,x)}function Ye(b,E,x){var N=jt(E,x,!1);if(!ye(N))return N.get(b)}function wt(b,E,x,N){var U=jt(x,N,!0);U.set(b,E)}function dr(b,E){var x=yr(b,E),N=ec(b);if(N===null)return x;var U=dr(N,E);if(U.length<=0)return x;if(x.length<=0)return U;for(var ke=new w,z=[],W=0,M=x;W<M.length;W++){var re=M[W],ie=ke.has(re);ie||(ke.add(re),z.push(re))}for(var Kt=0,Gp=U;Kt<Gp.length;Kt++){var re=Gp[Kt],ie=ke.has(re);ie||(ke.add(re),z.push(re))}return z}function yr(b,E){var x=[],N=jt(b,E,!1);if(ye(N))return x;for(var U=N.keys(),ke=Ae(U),z=0;;){var W=be(ke);if(!W)return x.length=z,x;var M=F(W);try{x[z]=M}catch(re){try{qr(ke)}finally{throw re}}z++}}function Gt(b){if(b===null)return 1;switch(typeof b){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return b===null?1:6;default:return 6}}function ye(b){return b===void 0}function St(b){return b===null}function Ti(b){return typeof b=="symbol"}function ge(b){return typeof b=="object"?b!==null:typeof b=="function"}function Ni(b,E){switch(Gt(b)){case 0:return b;case 1:return b;case 2:return b;case 3:return b;case 4:return b;case 5:return b}var x=E===3?"string":E===5?"number":"default",N=q(b,n);if(N!==void 0){var U=N.call(b,x);if(ge(U))throw new TypeError;return U}return gr(b,x==="default"?"number":x)}function gr(b,E){if(E==="string"){var x=b.toString;if(ue(x)){var N=x.call(b);if(!ge(N))return N}var U=b.valueOf;if(ue(U)){var N=U.call(b);if(!ge(N))return N}}else{var U=b.valueOf;if(ue(U)){var N=U.call(b);if(!ge(N))return N}var ke=b.toString;if(ue(ke)){var N=ke.call(b);if(!ge(N))return N}}throw new TypeError}function D(b){return!!b}function Q(b){return""+b}function I(b){var E=Ni(b,3);return Ti(E)?E:Q(E)}function G(b){return Array.isArray?Array.isArray(b):b instanceof Object?b instanceof Array:Object.prototype.toString.call(b)==="[object Array]"}function ue(b){return typeof b=="function"}function Ue(b){return typeof b=="function"}function Kr(b){switch(Gt(b)){case 3:return!0;case 4:return!0;default:return!1}}function q(b,E){var x=b[E];if(x!=null){if(!ue(x))throw new TypeError;return x}}function Ae(b){var E=q(b,o);if(!ue(E))throw new TypeError;var x=E.call(b);if(!ge(x))throw new TypeError;return x}function F(b){return b.value}function be(b){var E=b.next();return E.done?!1:E}function qr(b){var E=b.return;E&&E.call(b)}function ec(b){var E=Object.getPrototypeOf(b);if(typeof b!="function"||b===p||E!==p)return E;var x=b.prototype,N=x&&Object.getPrototypeOf(x);if(N==null||N===Object.prototype)return E;var U=N.constructor;return typeof U!="function"||U===b?E:U}function Kg(){var b={},E=[],x=function(){function z(W,M,re){this._index=0,this._keys=W,this._values=M,this._selector=re}return z.prototype["@@iterator"]=function(){return this},z.prototype[o]=function(){return this},z.prototype.next=function(){var W=this._index;if(W>=0&&W<this._keys.length){var M=this._selector(this._keys[W],this._values[W]);return W+1>=this._keys.length?(this._index=-1,this._keys=E,this._values=E):this._index++,{value:M,done:!1}}return{value:void 0,done:!0}},z.prototype.throw=function(W){throw this._index>=0&&(this._index=-1,this._keys=E,this._values=E),W},z.prototype.return=function(W){return this._index>=0&&(this._index=-1,this._keys=E,this._values=E),{value:W,done:!0}},z}();return function(){function z(){this._keys=[],this._values=[],this._cacheKey=b,this._cacheIndex=-2}return Object.defineProperty(z.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),z.prototype.has=function(W){return this._find(W,!1)>=0},z.prototype.get=function(W){var M=this._find(W,!1);return M>=0?this._values[M]:void 0},z.prototype.set=function(W,M){var re=this._find(W,!0);return this._values[re]=M,this},z.prototype.delete=function(W){var M=this._find(W,!1);if(M>=0){for(var re=this._keys.length,ie=M+1;ie<re;ie++)this._keys[ie-1]=this._keys[ie],this._values[ie-1]=this._values[ie];return this._keys.length--,this._values.length--,W===this._cacheKey&&(this._cacheKey=b,this._cacheIndex=-2),!0}return!1},z.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=b,this._cacheIndex=-2},z.prototype.keys=function(){return new x(this._keys,this._values,N)},z.prototype.values=function(){return new x(this._keys,this._values,U)},z.prototype.entries=function(){return new x(this._keys,this._values,ke)},z.prototype["@@iterator"]=function(){return this.entries()},z.prototype[o]=function(){return this.entries()},z.prototype._find=function(W,M){return this._cacheKey!==W&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=W)),this._cacheIndex<0&&M&&(this._cacheIndex=this._keys.length,this._keys.push(W),this._values.push(void 0)),this._cacheIndex},z}();function N(z,W){return z}function U(z,W){return W}function ke(z,W){return[z,W]}}function qg(){return function(){function b(){this._map=new B}return Object.defineProperty(b.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),b.prototype.has=function(E){return this._map.has(E)},b.prototype.add=function(E){return this._map.set(E,E),this},b.prototype.delete=function(E){return this._map.delete(E)},b.prototype.clear=function(){this._map.clear()},b.prototype.keys=function(){return this._map.keys()},b.prototype.values=function(){return this._map.values()},b.prototype.entries=function(){return this._map.entries()},b.prototype["@@iterator"]=function(){return this.keys()},b.prototype[o]=function(){return this.keys()},b}()}function zg(){var b=16,E=h.create(),x=N();return function(){function M(){this._key=N()}return M.prototype.has=function(re){var ie=U(re,!1);return ie!==void 0?h.has(ie,this._key):!1},M.prototype.get=function(re){var ie=U(re,!1);return ie!==void 0?h.get(ie,this._key):void 0},M.prototype.set=function(re,ie){var Kt=U(re,!0);return Kt[this._key]=ie,this},M.prototype.delete=function(re){var ie=U(re,!1);return ie!==void 0?delete ie[this._key]:!1},M.prototype.clear=function(){this._key=N()},M}();function N(){var M;do M="@@WeakMap@@"+W();while(h.has(E,M));return E[M]=!0,M}function U(M,re){if(!r.call(M,x)){if(!re)return;Object.defineProperty(M,x,{value:h.create()})}return M[x]}function ke(M,re){for(var ie=0;ie<re;++ie)M[ie]=Math.random()*255|0;return M}function z(M){return typeof Uint8Array=="function"?typeof crypto<"u"?crypto.getRandomValues(new Uint8Array(M)):typeof msCrypto<"u"?msCrypto.getRandomValues(new Uint8Array(M)):ke(new Uint8Array(M),M):ke(new Array(M),M)}function W(){var M=z(b);M[6]=M[6]&79|64,M[8]=M[8]&191|128;for(var re="",ie=0;ie<b;++ie){var Kt=M[ie];(ie===4||ie===6||ie===8)&&(re+="-"),Kt<16&&(re+="0"),re+=Kt.toString(16).toLowerCase()}return re}}function tc(b){return b.__=void 0,delete b.__,b}})})(oc||(oc={}));const tf="[object ArrayBuffer]";class O{static isArrayBuffer(e){return Object.prototype.toString.call(e)===tf}static toArrayBuffer(e){return this.isArrayBuffer(e)?e:e.byteLength===e.buffer.byteLength?e.buffer:this.toUint8Array(e).slice().buffer}static toUint8Array(e){return this.toView(e,Uint8Array)}static toView(e,r){if(e.constructor===r)return e;if(this.isArrayBuffer(e))return new r(e);if(this.isArrayBufferView(e))return new r(e.buffer,e.byteOffset,e.byteLength);throw new TypeError("The provided value is not of type '(ArrayBuffer or ArrayBufferView)'")}static isBufferSource(e){return this.isArrayBufferView(e)||this.isArrayBuffer(e)}static isArrayBufferView(e){return ArrayBuffer.isView(e)||e&&this.isArrayBuffer(e.buffer)}static isEqual(e,r){const i=O.toUint8Array(e),n=O.toUint8Array(r);if(i.length!==n.byteLength)return!1;for(let o=0;o<i.length;o++)if(i[o]!==n[o])return!1;return!0}static concat(...e){if(Array.isArray(e[0])){const r=e[0];let i=0;for(const s of r)i+=s.byteLength;const n=new Uint8Array(i);let o=0;for(const s of r){const a=this.toUint8Array(s);n.set(a,o),o+=a.length}return e[1]?this.toView(n,e[1]):n.buffer}else return this.concat(e)}}class sc{static fromString(e){const r=unescape(encodeURIComponent(e)),i=new Uint8Array(r.length);for(let n=0;n<r.length;n++)i[n]=r.charCodeAt(n);return i.buffer}static toString(e){const r=O.toUint8Array(e);let i="";for(let n=0;n<r.length;n++)i+=String.fromCharCode(r[n]);return decodeURIComponent(escape(i))}}class at{static toString(e,r=!1){const i=O.toArrayBuffer(e),n=new DataView(i);let o="";for(let s=0;s<i.byteLength;s+=2){const a=n.getUint16(s,r);o+=String.fromCharCode(a)}return o}static fromString(e,r=!1){const i=new ArrayBuffer(e.length*2),n=new DataView(i);for(let o=0;o<e.length;o++)n.setUint16(o*2,e.charCodeAt(o),r);return i}}class H{static isHex(e){return typeof e=="string"&&/^[a-z0-9]+$/i.test(e)}static isBase64(e){return typeof e=="string"&&/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(e)}static isBase64Url(e){return typeof e=="string"&&/^[a-zA-Z0-9-_]+$/i.test(e)}static ToString(e,r="utf8"){const i=O.toUint8Array(e);switch(r.toLowerCase()){case"utf8":return this.ToUtf8String(i);case"binary":return this.ToBinary(i);case"hex":return this.ToHex(i);case"base64":return this.ToBase64(i);case"base64url":return this.ToBase64Url(i);case"utf16le":return at.toString(i,!0);case"utf16":case"utf16be":return at.toString(i);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromString(e,r="utf8"){if(!e)return new ArrayBuffer(0);switch(r.toLowerCase()){case"utf8":return this.FromUtf8String(e);case"binary":return this.FromBinary(e);case"hex":return this.FromHex(e);case"base64":return this.FromBase64(e);case"base64url":return this.FromBase64Url(e);case"utf16le":return at.fromString(e,!0);case"utf16":case"utf16be":return at.fromString(e);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToBase64(e){const r=O.toUint8Array(e);if(typeof btoa<"u"){const i=this.ToString(r,"binary");return btoa(i)}else return Buffer.from(r).toString("base64")}static FromBase64(e){const r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!H.isBase64(r))throw new TypeError("Argument 'base64Text' is not Base64 encoded");return typeof atob<"u"?this.FromBinary(atob(r)):new Uint8Array(Buffer.from(r,"base64")).buffer}static FromBase64Url(e){const r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!H.isBase64Url(r))throw new TypeError("Argument 'base64url' is not Base64Url encoded");return this.FromBase64(this.Base64Padding(r.replace(/\-/g,"+").replace(/\_/g,"/")))}static ToBase64Url(e){return this.ToBase64(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/\=/g,"")}static FromUtf8String(e,r=H.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.FromBinary(e);case"utf8":return sc.fromString(e);case"utf16":case"utf16be":return at.fromString(e);case"utf16le":case"usc2":return at.fromString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static ToUtf8String(e,r=H.DEFAULT_UTF8_ENCODING){switch(r){case"ascii":return this.ToBinary(e);case"utf8":return sc.toString(e);case"utf16":case"utf16be":return at.toString(e);case"utf16le":case"usc2":return at.toString(e,!0);default:throw new Error(`Unknown type of encoding '${r}'`)}}static FromBinary(e){const r=e.length,i=new Uint8Array(r);for(let n=0;n<r;n++)i[n]=e.charCodeAt(n);return i.buffer}static ToBinary(e){const r=O.toUint8Array(e);let i="";for(let n=0;n<r.length;n++)i+=String.fromCharCode(r[n]);return i}static ToHex(e){const r=O.toUint8Array(e),i="",n=[],o=r.length;for(let s=0;s<o;s++){const a=r[s].toString(16).padStart(2,"0");n.push(a)}return n.join(i)}static FromHex(e){let r=this.formatString(e);if(!r)return new ArrayBuffer(0);if(!H.isHex(r))throw new TypeError("Argument 'hexString' is not HEX encoded");r.length%2&&(r=`0${r}`);const i=new Uint8Array(r.length/2);for(let n=0;n<r.length;n=n+2){const o=r.slice(n,n+2);i[n/2]=parseInt(o,16)}return i.buffer}static ToUtf16String(e,r=!1){return at.toString(e,r)}static FromUtf16String(e,r=!1){return at.fromString(e,r)}static Base64Padding(e){const r=4-e.length%4;if(r<4)for(let i=0;i<r;i++)e+="=";return e}static formatString(e){return(e==null?void 0:e.replace(/[\n\r\t ]/g,""))||""}}H.DEFAULT_UTF8_ENCODING="utf8";function rf(...t){const e=t.map(n=>n.byteLength).reduce((n,o)=>n+o),r=new Uint8Array(e);let i=0;return t.map(n=>new Uint8Array(n)).forEach(n=>{for(const o of n)r[i++]=o}),r.buffer}function ac(t,e){if(!(t&&e)||t.byteLength!==e.byteLength)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let n=0;n<t.byteLength;n++)if(r[n]!==i[n])return!1;return!0}function mr(t,e){let r=0;if(t.length===1)return t[0];for(let i=t.length-1;i>=0;i--)r+=t[t.length-1-i]*Math.pow(2,e*i);return r}function zt(t,e,r=-1){const i=r;let n=t,o=0,s=Math.pow(2,e);for(let a=1;a<8;a++){if(t<s){let l;if(i<0)l=new ArrayBuffer(a),o=a;else{if(i<a)return new ArrayBuffer(0);l=new ArrayBuffer(i),o=i}const h=new Uint8Array(l);for(let p=a-1;p>=0;p--){const y=Math.pow(2,p*e);h[o-p-1]=Math.floor(n/y),n-=h[o-p-1]*y}return l}s*=Math.pow(2,e)}return new ArrayBuffer(0)}function mo(...t){let e=0,r=0;for(const o of t)e+=o.length;const i=new ArrayBuffer(e),n=new Uint8Array(i);for(const o of t)n.set(o,r),r+=o.length;return n}function cc(){const t=new Uint8Array(this.valueHex);if(this.valueHex.byteLength>=2){const s=t[0]===255&&t[1]&128,a=t[0]===0&&(t[1]&128)===0;(s||a)&&this.warnings.push("Needlessly long format")}const e=new ArrayBuffer(this.valueHex.byteLength),r=new Uint8Array(e);for(let s=0;s<this.valueHex.byteLength;s++)r[s]=0;r[0]=t[0]&128;const i=mr(r,8),n=new ArrayBuffer(this.valueHex.byteLength),o=new Uint8Array(n);for(let s=0;s<this.valueHex.byteLength;s++)o[s]=t[s];return o[0]&=127,mr(o,8)-i}function nf(t){const e=t<0?t*-1:t;let r=128;for(let i=1;i<8;i++){if(e<=r){if(t<0){const s=r-e,a=zt(s,8,i),l=new Uint8Array(a);return l[0]|=128,a}let n=zt(e,8,i),o=new Uint8Array(n);if(o[0]&128){const s=n.slice(0),a=new Uint8Array(s);n=new ArrayBuffer(n.byteLength+1),o=new Uint8Array(n);for(let l=0;l<s.byteLength;l++)o[l+1]=a[l];o[0]=0}return n}r*=Math.pow(2,8)}return new ArrayBuffer(0)}function of(t,e){if(t.byteLength!==e.byteLength)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let n=0;n<r.length;n++)if(r[n]!==i[n])return!1;return!0}function De(t,e){const r=t.toString(10);if(e<r.length)return"";const i=e-r.length,n=new Array(i);for(let o=0;o<i;o++)n[o]="0";return n.join("").concat(r)}function Ri(){if(typeof BigInt>"u")throw new Error("BigInt is not defined. Your environment doesn't implement BigInt.")}function vo(t){let e=0,r=0;for(let n=0;n<t.length;n++){const o=t[n];e+=o.byteLength}const i=new Uint8Array(e);for(let n=0;n<t.length;n++){const o=t[n];i.set(new Uint8Array(o),r),r+=o.byteLength}return i.buffer}function At(t,e,r,i){return e instanceof Uint8Array?e.byteLength?r<0?(t.error="Wrong parameter: inputOffset less than zero",!1):i<0?(t.error="Wrong parameter: inputLength less than zero",!1):e.byteLength-r-i<0?(t.error="End of input reached before message was fully decoded (inconsistent offset and length values)",!1):!0:(t.error="Wrong parameter: inputBuffer has zero length",!1):(t.error="Wrong parameter: inputBuffer must be 'Uint8Array'",!1)}class _i{constructor(){this.items=[]}write(e){this.items.push(e)}final(){return vo(this.items)}}const Wr=[new Uint8Array([1])],lc="0123456789",bo="name",uc="valueHexView",sf="isHexOnly",af="idBlock",cf="tagClass",lf="tagNumber",uf="isConstructed",hf="fromBER",pf="toBER",ff="local",Pe="",Qe=new ArrayBuffer(0),ji=new Uint8Array(0),Jr="EndOfContent",hc="OCTET STRING",pc="BIT STRING";function ct(t){var e;return e=class extends t{constructor(...r){var i;super(...r);const n=r[0]||{};this.isHexOnly=(i=n.isHexOnly)!==null&&i!==void 0?i:!1,this.valueHexView=n.valueHex?O.toUint8Array(n.valueHex):ji}get valueHex(){return this.valueHexView.slice().buffer}set valueHex(r){this.valueHexView=new Uint8Array(r)}fromBER(r,i,n){const o=r instanceof ArrayBuffer?new Uint8Array(r):r;if(!At(this,o,i,n))return-1;const s=i+n;return this.valueHexView=o.subarray(i,s),this.valueHexView.length?(this.blockLength=n,s):(this.warnings.push("Zero buffer length"),i)}toBER(r=!1){return this.isHexOnly?r?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.byteLength===this.valueHexView.buffer.byteLength?this.valueHexView.buffer:this.valueHexView.slice().buffer:(this.error="Flag 'isHexOnly' is not set, abort",Qe)}toJSON(){return{...super.toJSON(),isHexOnly:this.isHexOnly,valueHex:H.ToHex(this.valueHexView)}}},e.NAME="hexBlock",e}class Wt{constructor({blockLength:e=0,error:r=Pe,warnings:i=[],valueBeforeDecode:n=ji}={}){this.blockLength=e,this.error=r,this.warnings=i,this.valueBeforeDecodeView=O.toUint8Array(n)}static blockName(){return this.NAME}get valueBeforeDecode(){return this.valueBeforeDecodeView.slice().buffer}set valueBeforeDecode(e){this.valueBeforeDecodeView=new Uint8Array(e)}toJSON(){return{blockName:this.constructor.NAME,blockLength:this.blockLength,error:this.error,warnings:this.warnings,valueBeforeDecode:H.ToHex(this.valueBeforeDecodeView)}}}Wt.NAME="baseBlock";class Te extends Wt{fromBER(e,r,i){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}toBER(e,r){throw TypeError("User need to make a specific function in a class which extends 'ValueBlock'")}}Te.NAME="valueBlock";class fc extends ct(Wt){constructor({idBlock:e={}}={}){var r,i,n,o;super(),e?(this.isHexOnly=(r=e.isHexOnly)!==null&&r!==void 0?r:!1,this.valueHexView=e.valueHex?O.toUint8Array(e.valueHex):ji,this.tagClass=(i=e.tagClass)!==null&&i!==void 0?i:-1,this.tagNumber=(n=e.tagNumber)!==null&&n!==void 0?n:-1,this.isConstructed=(o=e.isConstructed)!==null&&o!==void 0?o:!1):(this.tagClass=-1,this.tagNumber=-1,this.isConstructed=!1)}toBER(e=!1){let r=0;switch(this.tagClass){case 1:r|=0;break;case 2:r|=64;break;case 3:r|=128;break;case 4:r|=192;break;default:return this.error="Unknown tag class",Qe}if(this.isConstructed&&(r|=32),this.tagNumber<31&&!this.isHexOnly){const n=new Uint8Array(1);if(!e){let o=this.tagNumber;o&=31,r|=o,n[0]=r}return n.buffer}if(!this.isHexOnly){const n=zt(this.tagNumber,7),o=new Uint8Array(n),s=n.byteLength,a=new Uint8Array(s+1);if(a[0]=r|31,!e){for(let l=0;l<s-1;l++)a[l+1]=o[l]|128;a[s]=o[s-1]}return a.buffer}const i=new Uint8Array(this.valueHexView.byteLength+1);if(i[0]=r|31,!e){const n=this.valueHexView;for(let o=0;o<n.length-1;o++)i[o+1]=n[o]|128;i[this.valueHexView.byteLength]=n[n.length-1]}return i.buffer}fromBER(e,r,i){const n=O.toUint8Array(e);if(!At(this,n,r,i))return-1;const o=n.subarray(r,r+i);if(o.length===0)return this.error="Zero buffer length",-1;switch(o[0]&192){case 0:this.tagClass=1;break;case 64:this.tagClass=2;break;case 128:this.tagClass=3;break;case 192:this.tagClass=4;break;default:return this.error="Unknown tag class",-1}this.isConstructed=(o[0]&32)===32,this.isHexOnly=!1;const s=o[0]&31;if(s!==31)this.tagNumber=s,this.blockLength=1;else{let a=1,l=this.valueHexView=new Uint8Array(255),h=255;for(;o[a]&128;){if(l[a-1]=o[a]&127,a++,a>=o.length)return this.error="End of input reached before message was fully decoded",-1;if(a===h){h+=255;const y=new Uint8Array(h);for(let B=0;B<l.length;B++)y[B]=l[B];l=this.valueHexView=new Uint8Array(h)}}this.blockLength=a+1,l[a-1]=o[a]&127;const p=new Uint8Array(a);for(let y=0;y<a;y++)p[y]=l[y];l=this.valueHexView=new Uint8Array(a),l.set(p),this.blockLength<=9?this.tagNumber=mr(l,7):(this.isHexOnly=!0,this.warnings.push("Tag too long, represented as hex-coded"))}if(this.tagClass===1&&this.isConstructed)switch(this.tagNumber){case 1:case 2:case 5:case 6:case 9:case 13:case 14:case 23:case 24:case 31:case 32:case 33:case 34:return this.error="Constructed encoding used for primitive type",-1}return r+this.blockLength}toJSON(){return{...super.toJSON(),tagClass:this.tagClass,tagNumber:this.tagNumber,isConstructed:this.isConstructed}}}fc.NAME="identificationBlock";class dc extends Wt{constructor({lenBlock:e={}}={}){var r,i,n;super(),this.isIndefiniteForm=(r=e.isIndefiniteForm)!==null&&r!==void 0?r:!1,this.longFormUsed=(i=e.longFormUsed)!==null&&i!==void 0?i:!1,this.length=(n=e.length)!==null&&n!==void 0?n:0}fromBER(e,r,i){const n=O.toUint8Array(e);if(!At(this,n,r,i))return-1;const o=n.subarray(r,r+i);if(o.length===0)return this.error="Zero buffer length",-1;if(o[0]===255)return this.error="Length block 0xFF is reserved by standard",-1;if(this.isIndefiniteForm=o[0]===128,this.isIndefiniteForm)return this.blockLength=1,r+this.blockLength;if(this.longFormUsed=!!(o[0]&128),this.longFormUsed===!1)return this.length=o[0],this.blockLength=1,r+this.blockLength;const s=o[0]&127;if(s>8)return this.error="Too big integer",-1;if(s+1>o.length)return this.error="End of input reached before message was fully decoded",-1;const a=r+1,l=n.subarray(a,a+s);return l[s-1]===0&&this.warnings.push("Needlessly long encoded length"),this.length=mr(l,8),this.longFormUsed&&this.length<=127&&this.warnings.push("Unnecessary usage of long length form"),this.blockLength=s+1,r+this.blockLength}toBER(e=!1){let r,i;if(this.length>127&&(this.longFormUsed=!0),this.isIndefiniteForm)return r=new ArrayBuffer(1),e===!1&&(i=new Uint8Array(r),i[0]=128),r;if(this.longFormUsed){const n=zt(this.length,8);if(n.byteLength>127)return this.error="Too big length",Qe;if(r=new ArrayBuffer(n.byteLength+1),e)return r;const o=new Uint8Array(n);i=new Uint8Array(r),i[0]=n.byteLength|128;for(let s=0;s<n.byteLength;s++)i[s+1]=o[s];return r}return r=new ArrayBuffer(1),e===!1&&(i=new Uint8Array(r),i[0]=this.length),r}toJSON(){return{...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,longFormUsed:this.longFormUsed,length:this.length}}}dc.NAME="lengthBlock";const P={};class Ee extends Wt{constructor({name:e=Pe,optional:r=!1,primitiveSchema:i,...n}={},o){super(n),this.name=e,this.optional=r,i&&(this.primitiveSchema=i),this.idBlock=new fc(n),this.lenBlock=new dc(n),this.valueBlock=o?new o(n):new Te(n)}fromBER(e,r,i){const n=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?i:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),n)}toBER(e,r){const i=r||new _i;r||yc(this);const n=this.idBlock.toBER(e);if(i.write(n),this.lenBlock.isIndefiniteForm)i.write(new Uint8Array([128]).buffer),this.valueBlock.toBER(e,i),i.write(new ArrayBuffer(2));else{const o=this.valueBlock.toBER(e);this.lenBlock.length=o.byteLength;const s=this.lenBlock.toBER(e);i.write(s),i.write(o)}return r?Qe:i.final()}toJSON(){const e={...super.toJSON(),idBlock:this.idBlock.toJSON(),lenBlock:this.lenBlock.toJSON(),valueBlock:this.valueBlock.toJSON(),name:this.name,optional:this.optional};return this.primitiveSchema&&(e.primitiveSchema=this.primitiveSchema.toJSON()),e}toString(e="ascii"){return e==="ascii"?this.onAsciiEncoding():H.ToHex(this.toBER())}onAsciiEncoding(){return`${this.constructor.NAME} : ${H.ToHex(this.valueBlock.valueBeforeDecodeView)}`}isEqual(e){if(this===e)return!0;if(!(e instanceof this.constructor))return!1;const r=this.toBER(),i=e.toBER();return of(r,i)}}Ee.NAME="BaseBlock";function yc(t){if(t instanceof P.Constructed)for(const e of t.valueBlock.value)yc(e)&&(t.lenBlock.isIndefiniteForm=!0);return!!t.lenBlock.isIndefiniteForm}class wo extends Ee{constructor({value:e=Pe,...r}={},i){super(r,i),e&&this.fromString(e)}getValue(){return this.valueBlock.value}setValue(e){this.valueBlock.value=e}fromBER(e,r,i){const n=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?i:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.fromBuffer(this.valueBlock.valueHexView),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),n)}onAsciiEncoding(){return`${this.constructor.NAME} : '${this.valueBlock.value}'`}}wo.NAME="BaseStringBlock";class gc extends ct(Te){constructor({isHexOnly:e=!0,...r}={}){super(r),this.isHexOnly=e}}gc.NAME="PrimitiveValueBlock";var mc;class Xr extends Ee{constructor(e={}){super(e,gc),this.idBlock.isConstructed=!1}}mc=Xr,P.Primitive=mc,Xr.NAME="PRIMITIVE";function df(t,e){if(t instanceof e)return t;const r=new e;return r.idBlock=t.idBlock,r.lenBlock=t.lenBlock,r.warnings=t.warnings,r.valueBeforeDecodeView=t.valueBeforeDecodeView,r}function vr(t,e=0,r=t.length){const i=e;let n=new Ee({},Te);const o=new Wt;if(!At(o,t,e,r))return n.error=o.error,{offset:-1,result:n};if(!t.subarray(e,e+r).length)return n.error="Zero buffer length",{offset:-1,result:n};let s=n.idBlock.fromBER(t,e,r);if(n.idBlock.warnings.length&&n.warnings.concat(n.idBlock.warnings),s===-1)return n.error=n.idBlock.error,{offset:-1,result:n};if(e=s,r-=n.idBlock.blockLength,s=n.lenBlock.fromBER(t,e,r),n.lenBlock.warnings.length&&n.warnings.concat(n.lenBlock.warnings),s===-1)return n.error=n.lenBlock.error,{offset:-1,result:n};if(e=s,r-=n.lenBlock.blockLength,!n.idBlock.isConstructed&&n.lenBlock.isIndefiniteForm)return n.error="Indefinite length form used for primitive encoding form",{offset:-1,result:n};let a=Ee;switch(n.idBlock.tagClass){case 1:if(n.idBlock.tagNumber>=37&&n.idBlock.isHexOnly===!1)return n.error="UNIVERSAL 37 and upper tags are reserved by ASN.1 standard",{offset:-1,result:n};switch(n.idBlock.tagNumber){case 0:if(n.idBlock.isConstructed&&n.lenBlock.length>0)return n.error="Type [UNIVERSAL 0] is reserved",{offset:-1,result:n};a=P.EndOfContent;break;case 1:a=P.Boolean;break;case 2:a=P.Integer;break;case 3:a=P.BitString;break;case 4:a=P.OctetString;break;case 5:a=P.Null;break;case 6:a=P.ObjectIdentifier;break;case 10:a=P.Enumerated;break;case 12:a=P.Utf8String;break;case 13:a=P.RelativeObjectIdentifier;break;case 14:a=P.TIME;break;case 15:return n.error="[UNIVERSAL 15] is reserved by ASN.1 standard",{offset:-1,result:n};case 16:a=P.Sequence;break;case 17:a=P.Set;break;case 18:a=P.NumericString;break;case 19:a=P.PrintableString;break;case 20:a=P.TeletexString;break;case 21:a=P.VideotexString;break;case 22:a=P.IA5String;break;case 23:a=P.UTCTime;break;case 24:a=P.GeneralizedTime;break;case 25:a=P.GraphicString;break;case 26:a=P.VisibleString;break;case 27:a=P.GeneralString;break;case 28:a=P.UniversalString;break;case 29:a=P.CharacterString;break;case 30:a=P.BmpString;break;case 31:a=P.DATE;break;case 32:a=P.TimeOfDay;break;case 33:a=P.DateTime;break;case 34:a=P.Duration;break;default:{const l=n.idBlock.isConstructed?new P.Constructed:new P.Primitive;l.idBlock=n.idBlock,l.lenBlock=n.lenBlock,l.warnings=n.warnings,n=l}}break;case 2:case 3:case 4:default:a=n.idBlock.isConstructed?P.Constructed:P.Primitive}return n=df(n,a),s=n.fromBER(t,e,n.lenBlock.isIndefiniteForm?r:n.lenBlock.length),n.valueBeforeDecodeView=t.subarray(i,i+n.blockLength),{offset:s,result:n}}function br(t){if(!t.byteLength){const e=new Ee({},Te);return e.error="Input buffer has zero length",{offset:-1,result:e}}return vr(O.toUint8Array(t).slice(),0,t.byteLength)}function yf(t,e){return t?1:e}class Lt extends Te{constructor({value:e=[],isIndefiniteForm:r=!1,...i}={}){super(i),this.value=e,this.isIndefiniteForm=r}fromBER(e,r,i){const n=O.toUint8Array(e);if(!At(this,n,r,i))return-1;if(this.valueBeforeDecodeView=n.subarray(r,r+i),this.valueBeforeDecodeView.length===0)return this.warnings.push("Zero buffer length"),r;let o=r;for(;yf(this.isIndefiniteForm,i)>0;){const s=vr(n,o,i);if(s.offset===-1)return this.error=s.result.error,this.warnings.concat(s.result.warnings),-1;if(o=s.offset,this.blockLength+=s.result.blockLength,i-=s.result.blockLength,this.value.push(s.result),this.isIndefiniteForm&&s.result.constructor.NAME===Jr)break}return this.isIndefiniteForm&&(this.value[this.value.length-1].constructor.NAME===Jr?this.value.pop():this.warnings.push("No EndOfContent block encoded")),o}toBER(e,r){const i=r||new _i;for(let n=0;n<this.value.length;n++)this.value[n].toBER(e,i);return r?Qe:i.final()}toJSON(){const e={...super.toJSON(),isIndefiniteForm:this.isIndefiniteForm,value:[]};for(const r of this.value)e.value.push(r.toJSON());return e}}Lt.NAME="ConstructedValueBlock";var vc;class He extends Ee{constructor(e={}){super(e,Lt),this.idBlock.isConstructed=!0}fromBER(e,r,i){this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm;const n=this.valueBlock.fromBER(e,r,this.lenBlock.isIndefiniteForm?i:this.lenBlock.length);return n===-1?(this.error=this.valueBlock.error,n):(this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.valueBlock.error.length||(this.blockLength+=this.valueBlock.blockLength),n)}onAsciiEncoding(){const e=[];for(const i of this.valueBlock.value)e.push(i.toString("ascii").split(`
`).map(n=>`  ${n}`).join(`
`));const r=this.idBlock.tagClass===3?`[${this.idBlock.tagNumber}]`:this.constructor.NAME;return e.length?`${r} :
${e.join(`
`)}`:`${r} :`}}vc=He,P.Constructed=vc,He.NAME="CONSTRUCTED";class bc extends Te{fromBER(e,r,i){return r}toBER(e){return Qe}}bc.override="EndOfContentValueBlock";var wc;class So extends Ee{constructor(e={}){super(e,bc),this.idBlock.tagClass=1,this.idBlock.tagNumber=0}}wc=So,P.EndOfContent=wc,So.NAME=Jr;var Sc;class Jt extends Ee{constructor(e={}){super(e,Te),this.idBlock.tagClass=1,this.idBlock.tagNumber=5}fromBER(e,r,i){return this.lenBlock.length>0&&this.warnings.push("Non-zero length of value block for Null type"),this.idBlock.error.length||(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length||(this.blockLength+=this.lenBlock.blockLength),this.blockLength+=i,r+i>e.byteLength?(this.error="End of input reached before message was fully decoded (inconsistent offset and length values)",-1):r+i}toBER(e,r){const i=new ArrayBuffer(2);if(!e){const n=new Uint8Array(i);n[0]=5,n[1]=0}return r&&r.write(i),i}onAsciiEncoding(){return`${this.constructor.NAME}`}}Sc=Jt,P.Null=Sc,Jt.NAME="NULL";class Ac extends ct(Te){constructor({value:e,...r}={}){super(r),r.valueHex?this.valueHexView=O.toUint8Array(r.valueHex):this.valueHexView=new Uint8Array(1),e&&(this.value=e)}get value(){for(const e of this.valueHexView)if(e>0)return!0;return!1}set value(e){this.valueHexView[0]=e?255:0}fromBER(e,r,i){const n=O.toUint8Array(e);return At(this,n,r,i)?(this.valueHexView=n.subarray(r,r+i),i>1&&this.warnings.push("Boolean value encoded in more then 1 octet"),this.isHexOnly=!0,cc.call(this),this.blockLength=i,r+i):-1}toBER(){return this.valueHexView.slice()}toJSON(){return{...super.toJSON(),value:this.value}}}Ac.NAME="BooleanValueBlock";var Ec;let Li=class extends Ee{constructor(t={}){super(t,Ac),this.idBlock.tagClass=1,this.idBlock.tagNumber=1}getValue(){return this.valueBlock.value}setValue(t){this.valueBlock.value=t}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.getValue}`}};Ec=Li,P.Boolean=Ec,Li.NAME="BOOLEAN";class Bc extends ct(Lt){constructor({isConstructed:e=!1,...r}={}){super(r),this.isConstructed=e}fromBER(e,r,i){let n=0;if(this.isConstructed){if(this.isHexOnly=!1,n=Lt.prototype.fromBER.call(this,e,r,i),n===-1)return n;for(let o=0;o<this.value.length;o++){const s=this.value[o].constructor.NAME;if(s===Jr){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, OCTET STRING may consists of OCTET STRINGs only",-1}if(s!==hc)return this.error="OCTET STRING may consists of OCTET STRINGs only",-1}}else this.isHexOnly=!0,n=super.fromBER(e,r,i),this.blockLength=i;return n}toBER(e,r){return this.isConstructed?Lt.prototype.toBER.call(this,e,r):e?new ArrayBuffer(this.valueHexView.byteLength):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),isConstructed:this.isConstructed}}}Bc.NAME="OctetStringValueBlock";var kc;let Xt=class Xp extends Ee{constructor({idBlock:e={},lenBlock:r={},...i}={}){var n,o;(n=i.isConstructed)!==null&&n!==void 0||(i.isConstructed=!!(!((o=i.value)===null||o===void 0)&&o.length)),super({idBlock:{isConstructed:i.isConstructed,...e},lenBlock:{...r,isIndefiniteForm:!!i.isIndefiniteForm},...i},Bc),this.idBlock.tagClass=1,this.idBlock.tagNumber=4}fromBER(e,r,i){if(this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,i===0)return this.idBlock.error.length===0&&(this.blockLength+=this.idBlock.blockLength),this.lenBlock.error.length===0&&(this.blockLength+=this.lenBlock.blockLength),r;if(!this.valueBlock.isConstructed){const n=(e instanceof ArrayBuffer?new Uint8Array(e):e).subarray(r,r+i);try{if(n.byteLength){const o=vr(n,0,n.byteLength);o.offset!==-1&&o.offset===i&&(this.valueBlock.value=[o.result])}}catch{}}return super.fromBER(e,r,i)}onAsciiEncoding(){return this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length?He.prototype.onAsciiEncoding.call(this):`${this.constructor.NAME} : ${H.ToHex(this.valueBlock.valueHexView)}`}getValue(){if(!this.idBlock.isConstructed)return this.valueBlock.valueHexView.slice().buffer;const e=[];for(const r of this.valueBlock.value)r instanceof Xp&&e.push(r.valueBlock.valueHexView);return O.concat(e)}};kc=Xt,P.OctetString=kc,Xt.NAME=hc;class xc extends ct(Lt){constructor({unusedBits:e=0,isConstructed:r=!1,...i}={}){super(i),this.unusedBits=e,this.isConstructed=r,this.blockLength=this.valueHexView.byteLength}fromBER(e,r,i){if(!i)return r;let n=-1;if(this.isConstructed){if(n=Lt.prototype.fromBER.call(this,e,r,i),n===-1)return n;for(const a of this.value){const l=a.constructor.NAME;if(l===Jr){if(this.isIndefiniteForm)break;return this.error="EndOfContent is unexpected, BIT STRING may consists of BIT STRINGs only",-1}if(l!==pc)return this.error="BIT STRING may consists of BIT STRINGs only",-1;const h=a.valueBlock;if(this.unusedBits>0&&h.unusedBits>0)return this.error='Using of "unused bits" inside constructive BIT STRING allowed for least one only',-1;this.unusedBits=h.unusedBits}return n}const o=O.toUint8Array(e);if(!At(this,o,r,i))return-1;const s=o.subarray(r,r+i);if(this.unusedBits=s[0],this.unusedBits>7)return this.error="Unused bits for BitString must be in range 0-7",-1;if(!this.unusedBits){const a=s.subarray(1);try{if(a.byteLength){const l=vr(a,0,a.byteLength);l.offset!==-1&&l.offset===i-1&&(this.value=[l.result])}}catch{}}return this.valueHexView=s.subarray(1),this.blockLength=s.length,r+i}toBER(e,r){if(this.isConstructed)return Lt.prototype.toBER.call(this,e,r);if(e)return new ArrayBuffer(this.valueHexView.byteLength+1);if(!this.valueHexView.byteLength)return Qe;const i=new Uint8Array(this.valueHexView.length+1);return i[0]=this.unusedBits,i.set(this.valueHexView,1),i.buffer}toJSON(){return{...super.toJSON(),unusedBits:this.unusedBits,isConstructed:this.isConstructed}}}xc.NAME="BitStringValueBlock";var Cc;let Zt=class extends Ee{constructor({idBlock:t={},lenBlock:e={},...r}={}){var i,n;(i=r.isConstructed)!==null&&i!==void 0||(r.isConstructed=!!(!((n=r.value)===null||n===void 0)&&n.length)),super({idBlock:{isConstructed:r.isConstructed,...t},lenBlock:{...e,isIndefiniteForm:!!r.isIndefiniteForm},...r},xc),this.idBlock.tagClass=1,this.idBlock.tagNumber=3}fromBER(t,e,r){return this.valueBlock.isConstructed=this.idBlock.isConstructed,this.valueBlock.isIndefiniteForm=this.lenBlock.isIndefiniteForm,super.fromBER(t,e,r)}onAsciiEncoding(){if(this.valueBlock.isConstructed||this.valueBlock.value&&this.valueBlock.value.length)return He.prototype.onAsciiEncoding.call(this);{const t=[],e=this.valueBlock.valueHexView;for(const i of e)t.push(i.toString(2).padStart(8,"0"));const r=t.join("");return`${this.constructor.NAME} : ${r.substring(0,r.length-this.valueBlock.unusedBits)}`}}};Cc=Zt,P.BitString=Cc,Zt.NAME=pc;var Ic;function gf(t,e){const r=new Uint8Array([0]),i=new Uint8Array(t),n=new Uint8Array(e);let o=i.slice(0);const s=o.length-1,a=n.slice(0),l=a.length-1;let h=0;const p=l<s?s:l;let y=0;for(let B=p;B>=0;B--,y++){switch(!0){case y<a.length:h=o[s-y]+a[l-y]+r[0];break;default:h=o[s-y]+r[0]}switch(r[0]=h/10,!0){case y>=o.length:o=mo(new Uint8Array([h%10]),o);break;default:o[s-y]=h%10}}return r[0]>0&&(o=mo(r,o)),o}function Tc(t){if(t>=Wr.length)for(let e=Wr.length;e<=t;e++){const r=new Uint8Array([0]);let i=Wr[e-1].slice(0);for(let n=i.length-1;n>=0;n--){const o=new Uint8Array([(i[n]<<1)+r[0]]);r[0]=o[0]/10,i[n]=o[0]%10}r[0]>0&&(i=mo(r,i)),Wr.push(i)}return Wr[t]}function mf(t,e){let r=0;const i=new Uint8Array(t),n=new Uint8Array(e),o=i.slice(0),s=o.length-1,a=n.slice(0),l=a.length-1;let h,p=0;for(let y=l;y>=0;y--,p++)switch(h=o[s-p]-a[l-p]-r,!0){case h<0:r=1,o[s-p]=h+10;break;default:r=0,o[s-p]=h}if(r>0)for(let y=s-l+1;y>=0;y--,p++)if(h=o[s-p]-r,h<0)r=1,o[s-p]=h+10;else{r=0,o[s-p]=h;break}return o.slice()}class Ao extends ct(Te){constructor({value:e,...r}={}){super(r),this._valueDec=0,r.valueHex&&this.setValueHex(),e!==void 0&&(this.valueDec=e)}setValueHex(){this.valueHexView.length>=4?(this.warnings.push("Too big Integer for decoding, hex only"),this.isHexOnly=!0,this._valueDec=0):(this.isHexOnly=!1,this.valueHexView.length>0&&(this._valueDec=cc.call(this)))}set valueDec(e){this._valueDec=e,this.isHexOnly=!1,this.valueHexView=new Uint8Array(nf(e))}get valueDec(){return this._valueDec}fromDER(e,r,i,n=0){const o=this.fromBER(e,r,i);if(o===-1)return o;const s=this.valueHexView;return s[0]===0&&s[1]&128?this.valueHexView=s.subarray(1):n!==0&&s.length<n&&(n-s.length>1&&(n=s.length+1),this.valueHexView=s.subarray(n-s.length)),o}toDER(e=!1){const r=this.valueHexView;switch(!0){case(r[0]&128)!==0:{const i=new Uint8Array(this.valueHexView.length+1);i[0]=0,i.set(r,1),this.valueHexView=i}break;case(r[0]===0&&(r[1]&128)===0):this.valueHexView=this.valueHexView.subarray(1);break}return this.toBER(e)}fromBER(e,r,i){const n=super.fromBER(e,r,i);return n===-1||this.setValueHex(),n}toBER(e){return e?new ArrayBuffer(this.valueHexView.length):this.valueHexView.slice().buffer}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}toString(){const e=this.valueHexView.length*8-1;let r=new Uint8Array(this.valueHexView.length*8/3),i=0,n;const o=this.valueHexView;let s="",a=!1;for(let l=o.byteLength-1;l>=0;l--){n=o[l];for(let h=0;h<8;h++){if((n&1)===1)switch(i){case e:r=mf(Tc(i),r),s="-";break;default:r=gf(r,Tc(i))}i++,n>>=1}}for(let l=0;l<r.length;l++)r[l]&&(a=!0),a&&(s+=lc.charAt(r[l]));return a===!1&&(s+=lc.charAt(0)),s}}Ic=Ao,Ao.NAME="IntegerValueBlock",Object.defineProperty(Ic.prototype,"valueHex",{set:function(t){this.valueHexView=new Uint8Array(t),this.setValueHex()},get:function(){return this.valueHexView.slice().buffer}});var Nc;class lt extends Ee{constructor(e={}){super(e,Ao),this.idBlock.tagClass=1,this.idBlock.tagNumber=2}toBigInt(){return Ri(),BigInt(this.valueBlock.toString())}static fromBigInt(e){Ri();const r=BigInt(e),i=new _i,n=r.toString(16).replace(/^-/,""),o=new Uint8Array(H.FromHex(n));if(r<0){const s=new Uint8Array(o.length+(o[0]&128?1:0));s[0]|=128;const a=BigInt(`0x${H.ToHex(s)}`)+r,l=O.toUint8Array(H.FromHex(a.toString(16)));l[0]|=128,i.write(l)}else o[0]&128&&i.write(new Uint8Array([0])),i.write(o);return new lt({valueHex:i.final()})}convertToDER(){const e=new lt({valueHex:this.valueBlock.valueHexView});return e.valueBlock.toDER(),e}convertFromDER(){return new lt({valueHex:this.valueBlock.valueHexView[0]===0?this.valueBlock.valueHexView.subarray(1):this.valueBlock.valueHexView})}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()}`}}Nc=lt,P.Integer=Nc,lt.NAME="INTEGER";var Oc;class Ui extends lt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=10}}Oc=Ui,P.Enumerated=Oc,Ui.NAME="ENUMERATED";class Eo extends ct(Te){constructor({valueDec:e=-1,isFirstSid:r=!1,...i}={}){super(i),this.valueDec=e,this.isFirstSid=r}fromBER(e,r,i){if(!i)return r;const n=O.toUint8Array(e);if(!At(this,n,r,i))return-1;const o=n.subarray(r,r+i);this.valueHexView=new Uint8Array(i);for(let a=0;a<i&&(this.valueHexView[a]=o[a]&127,this.blockLength++,!!(o[a]&128));a++);const s=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)s[a]=this.valueHexView[a];return this.valueHexView=s,o[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=mr(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}set valueBigInt(e){Ri();let r=BigInt(e).toString(2);for(;r.length%7;)r="0"+r;const i=new Uint8Array(r.length/7);for(let n=0;n<i.length;n++)i[n]=parseInt(r.slice(n*7,n*7+7),2)+(n+1<i.length?128:0);this.fromBER(i.buffer,0,i.length)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const n=this.valueHexView,o=new Uint8Array(this.blockLength);for(let s=0;s<this.blockLength-1;s++)o[s]=n[s]|128;return o[this.blockLength-1]=n[this.blockLength-1],o.buffer}const r=zt(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",Qe;const i=new Uint8Array(r.byteLength);if(!e){const n=new Uint8Array(r),o=r.byteLength-1;for(let s=0;s<o;s++)i[s]=n[s]|128;i[o]=n[o]}return i}toString(){let e="";if(this.isHexOnly)e=H.ToHex(this.valueHexView);else if(this.isFirstSid){let r=this.valueDec;this.valueDec<=39?e="0.":this.valueDec<=79?(e="1.",r-=40):(e="2.",r-=80),e+=r.toString()}else e=this.valueDec.toString();return e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec,isFirstSid:this.isFirstSid}}}Eo.NAME="sidBlock";class Pc extends Te{constructor({value:e=Pe,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,i){let n=r;for(;i>0;){const o=new Eo;if(n=o.fromBER(e,n,i),n===-1)return this.blockLength=0,this.error=o.error,n;this.value.length===0&&(o.isFirstSid=!0),this.blockLength+=o.blockLength,i-=o.blockLength,this.value.push(o)}return n}toBER(e){const r=[];for(let i=0;i<this.value.length;i++){const n=this.value[i].toBER(e);if(n.byteLength===0)return this.error=this.value[i].error,Qe;r.push(n)}return vo(r)}fromString(e){this.value=[];let r=0,i=0,n="",o=!1;do if(i=e.indexOf(".",r),i===-1?n=e.substring(r):n=e.substring(r,i),r=i+1,o){const s=this.value[0];let a=0;switch(s.valueDec){case 0:break;case 1:a=40;break;case 2:a=80;break;default:this.value=[];return}const l=parseInt(n,10);if(isNaN(l))return;s.valueDec=l+a,o=!1}else{const s=new Eo;if(n>Number.MAX_SAFE_INTEGER){Ri();const a=BigInt(n);s.valueBigInt=a}else if(s.valueDec=parseInt(n,10),isNaN(s.valueDec))return;this.value.length||(s.isFirstSid=!0,o=!0),this.value.push(s)}while(i!==-1)}toString(){let e="",r=!1;for(let i=0;i<this.value.length;i++){r=this.value[i].isHexOnly;let n=this.value[i].toString();i!==0&&(e=`${e}.`),r?(n=`{${n}}`,this.value[i].isFirstSid?e=`2.{${n} - 80}`:e+=n):e+=n}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}Pc.NAME="ObjectIdentifierValueBlock";var Hc;class Di extends Ee{constructor(e={}){super(e,Pc),this.idBlock.tagClass=1,this.idBlock.tagNumber=6}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}Hc=Di,P.ObjectIdentifier=Hc,Di.NAME="OBJECT IDENTIFIER";class Bo extends ct(Wt){constructor({valueDec:e=0,...r}={}){super(r),this.valueDec=e}fromBER(e,r,i){if(i===0)return r;const n=O.toUint8Array(e);if(!At(this,n,r,i))return-1;const o=n.subarray(r,r+i);this.valueHexView=new Uint8Array(i);for(let a=0;a<i&&(this.valueHexView[a]=o[a]&127,this.blockLength++,!!(o[a]&128));a++);const s=new Uint8Array(this.blockLength);for(let a=0;a<this.blockLength;a++)s[a]=this.valueHexView[a];return this.valueHexView=s,o[this.blockLength-1]&128?(this.error="End of input reached before message was fully decoded",-1):(this.valueHexView[0]===0&&this.warnings.push("Needlessly long format of SID encoding"),this.blockLength<=8?this.valueDec=mr(this.valueHexView,7):(this.isHexOnly=!0,this.warnings.push("Too big SID for decoding, hex only")),r+this.blockLength)}toBER(e){if(this.isHexOnly){if(e)return new ArrayBuffer(this.valueHexView.byteLength);const n=this.valueHexView,o=new Uint8Array(this.blockLength);for(let s=0;s<this.blockLength-1;s++)o[s]=n[s]|128;return o[this.blockLength-1]=n[this.blockLength-1],o.buffer}const r=zt(this.valueDec,7);if(r.byteLength===0)return this.error="Error during encoding SID value",Qe;const i=new Uint8Array(r.byteLength);if(!e){const n=new Uint8Array(r),o=r.byteLength-1;for(let s=0;s<o;s++)i[s]=n[s]|128;i[o]=n[o]}return i.buffer}toString(){let e="";return this.isHexOnly?e=H.ToHex(this.valueHexView):e=this.valueDec.toString(),e}toJSON(){return{...super.toJSON(),valueDec:this.valueDec}}}Bo.NAME="relativeSidBlock";class Rc extends Te{constructor({value:e=Pe,...r}={}){super(r),this.value=[],e&&this.fromString(e)}fromBER(e,r,i){let n=r;for(;i>0;){const o=new Bo;if(n=o.fromBER(e,n,i),n===-1)return this.blockLength=0,this.error=o.error,n;this.blockLength+=o.blockLength,i-=o.blockLength,this.value.push(o)}return n}toBER(e,r){const i=[];for(let n=0;n<this.value.length;n++){const o=this.value[n].toBER(e);if(o.byteLength===0)return this.error=this.value[n].error,Qe;i.push(o)}return vo(i)}fromString(e){this.value=[];let r=0,i=0,n="";do{i=e.indexOf(".",r),i===-1?n=e.substring(r):n=e.substring(r,i),r=i+1;const o=new Bo;if(o.valueDec=parseInt(n,10),isNaN(o.valueDec))return!0;this.value.push(o)}while(i!==-1);return!0}toString(){let e="",r=!1;for(let i=0;i<this.value.length;i++){r=this.value[i].isHexOnly;let n=this.value[i].toString();i!==0&&(e=`${e}.`),r&&(n=`{${n}}`),e+=n}return e}toJSON(){const e={...super.toJSON(),value:this.toString(),sidArray:[]};for(let r=0;r<this.value.length;r++)e.sidArray.push(this.value[r].toJSON());return e}}Rc.NAME="RelativeObjectIdentifierValueBlock";var _c;class ko extends Ee{constructor(e={}){super(e,Rc),this.idBlock.tagClass=1,this.idBlock.tagNumber=13}getValue(){return this.valueBlock.toString()}setValue(e){this.valueBlock.fromString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.valueBlock.toString()||"empty"}`}toJSON(){return{...super.toJSON(),value:this.getValue()}}}_c=ko,P.RelativeObjectIdentifier=_c,ko.NAME="RelativeObjectIdentifier";var jc;class Et extends He{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=16}}jc=Et,P.Sequence=jc,Et.NAME="SEQUENCE";var Lc;let Bt=class extends He{constructor(t={}){super(t),this.idBlock.tagClass=1,this.idBlock.tagNumber=17}};Lc=Bt,P.Set=Lc,Bt.NAME="SET";class Uc extends ct(Te){constructor({...e}={}){super(e),this.isHexOnly=!0,this.value=Pe}toJSON(){return{...super.toJSON(),value:this.value}}}Uc.NAME="StringValueBlock";class Dc extends Uc{}Dc.NAME="SimpleStringValueBlock";class Me extends wo{constructor({...e}={}){super(e,Dc)}fromBuffer(e){this.valueBlock.value=String.fromCharCode.apply(null,O.toUint8Array(e))}fromString(e){const r=e.length,i=this.valueBlock.valueHexView=new Uint8Array(r);for(let n=0;n<r;n++)i[n]=e.charCodeAt(n);this.valueBlock.value=e}}Me.NAME="SIMPLE STRING";class Mc extends Me{fromBuffer(e){this.valueBlock.valueHexView=O.toUint8Array(e);try{this.valueBlock.value=H.ToUtf8String(e)}catch(r){this.warnings.push(`Error during "decodeURIComponent": ${r}, using raw string`),this.valueBlock.value=H.ToBinary(e)}}fromString(e){this.valueBlock.valueHexView=new Uint8Array(H.FromUtf8String(e)),this.valueBlock.value=e}}Mc.NAME="Utf8StringValueBlock";var Vc;class kt extends Mc{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=12}}Vc=kt,P.Utf8String=Vc,kt.NAME="UTF8String";class Fc extends Me{fromBuffer(e){this.valueBlock.value=H.ToUtf16String(e),this.valueBlock.valueHexView=O.toUint8Array(e)}fromString(e){this.valueBlock.value=e,this.valueBlock.valueHexView=new Uint8Array(H.FromUtf16String(e))}}Fc.NAME="BmpStringValueBlock";var $c;class Mi extends Fc{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=30}}$c=Mi,P.BmpString=$c,Mi.NAME="BMPString";class Gc extends Me{fromBuffer(e){const r=ArrayBuffer.isView(e)?e.slice().buffer:e.slice(0),i=new Uint8Array(r);for(let n=0;n<i.length;n+=4)i[n]=i[n+3],i[n+1]=i[n+2],i[n+2]=0,i[n+3]=0;this.valueBlock.value=String.fromCharCode.apply(null,new Uint32Array(r))}fromString(e){const r=e.length,i=this.valueBlock.valueHexView=new Uint8Array(r*4);for(let n=0;n<r;n++){const o=zt(e.charCodeAt(n),8),s=new Uint8Array(o);if(s.length>4)continue;const a=4-s.length;for(let l=s.length-1;l>=0;l--)i[n*4+l+a]=s[l]}this.valueBlock.value=e}}Gc.NAME="UniversalStringValueBlock";var Kc;class Vi extends Gc{constructor({...e}={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=28}}Kc=Vi,P.UniversalString=Kc,Vi.NAME="UniversalString";var qc;class Fi extends Me{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=18}}qc=Fi,P.NumericString=qc,Fi.NAME="NumericString";var zc;class $i extends Me{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=19}}zc=$i,P.PrintableString=zc,$i.NAME="PrintableString";var Wc;class Gi extends Me{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=20}}Wc=Gi,P.TeletexString=Wc,Gi.NAME="TeletexString";var Jc;class Ki extends Me{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=21}}Jc=Ki,P.VideotexString=Jc,Ki.NAME="VideotexString";var Xc;class qi extends Me{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=22}}Xc=qi,P.IA5String=Xc,qi.NAME="IA5String";var Zc;class zi extends Me{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=25}}Zc=zi,P.GraphicString=Zc,zi.NAME="GraphicString";var Yc;class Zr extends Me{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=26}}Yc=Zr,P.VisibleString=Yc,Zr.NAME="VisibleString";var Qc;class Wi extends Me{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=27}}Qc=Wi,P.GeneralString=Qc,Wi.NAME="GeneralString";var el;class Ji extends Me{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=29}}el=Ji,P.CharacterString=el,Ji.NAME="CharacterString";var tl;class Yr extends Zr{constructor({value:e,valueDate:r,...i}={}){if(super(i),this.year=0,this.month=0,this.day=0,this.hour=0,this.minute=0,this.second=0,e){this.fromString(e),this.valueBlock.valueHexView=new Uint8Array(e.length);for(let n=0;n<e.length;n++)this.valueBlock.valueHexView[n]=e.charCodeAt(n)}r&&(this.fromDate(r),this.valueBlock.valueHexView=new Uint8Array(this.toBuffer())),this.idBlock.tagClass=1,this.idBlock.tagNumber=23}fromBuffer(e){this.fromString(String.fromCharCode.apply(null,O.toUint8Array(e)))}toBuffer(){const e=this.toString(),r=new ArrayBuffer(e.length),i=new Uint8Array(r);for(let n=0;n<e.length;n++)i[n]=e.charCodeAt(n);return r}fromDate(e){this.year=e.getUTCFullYear(),this.month=e.getUTCMonth()+1,this.day=e.getUTCDate(),this.hour=e.getUTCHours(),this.minute=e.getUTCMinutes(),this.second=e.getUTCSeconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second))}fromString(e){const r=/(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})Z/ig.exec(e);if(r===null){this.error="Wrong input string for conversion";return}const i=parseInt(r[1],10);i>=50?this.year=1900+i:this.year=2e3+i,this.month=parseInt(r[2],10),this.day=parseInt(r[3],10),this.hour=parseInt(r[4],10),this.minute=parseInt(r[5],10),this.second=parseInt(r[6],10)}toString(e="iso"){if(e==="iso"){const r=new Array(7);return r[0]=De(this.year<2e3?this.year-1900:this.year-2e3,2),r[1]=De(this.month,2),r[2]=De(this.day,2),r[3]=De(this.hour,2),r[4]=De(this.minute,2),r[5]=De(this.second,2),r[6]="Z",r.join("")}return super.toString(e)}onAsciiEncoding(){return`${this.constructor.NAME} : ${this.toDate().toISOString()}`}toJSON(){return{...super.toJSON(),year:this.year,month:this.month,day:this.day,hour:this.hour,minute:this.minute,second:this.second}}}tl=Yr,P.UTCTime=tl,Yr.NAME="UTCTime";var rl;class Xi extends Yr{constructor(e={}){var r;super(e),(r=this.millisecond)!==null&&r!==void 0||(this.millisecond=0),this.idBlock.tagClass=1,this.idBlock.tagNumber=24}fromDate(e){super.fromDate(e),this.millisecond=e.getUTCMilliseconds()}toDate(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond))}fromString(e){let r=!1,i="",n="",o=0,s,a=0,l=0;if(e[e.length-1]==="Z")i=e.substring(0,e.length-1),r=!0;else{const y=new Number(e[e.length-1]);if(isNaN(y.valueOf()))throw new Error("Wrong input string for conversion");i=e}if(r){if(i.indexOf("+")!==-1)throw new Error("Wrong input string for conversion");if(i.indexOf("-")!==-1)throw new Error("Wrong input string for conversion")}else{let y=1,B=i.indexOf("+"),w="";if(B===-1&&(B=i.indexOf("-"),y=-1),B!==-1){if(w=i.substring(B+1),i=i.substring(0,B),w.length!==2&&w.length!==4)throw new Error("Wrong input string for conversion");let f=parseInt(w.substring(0,2),10);if(isNaN(f.valueOf()))throw new Error("Wrong input string for conversion");if(a=y*f,w.length===4){if(f=parseInt(w.substring(2,4),10),isNaN(f.valueOf()))throw new Error("Wrong input string for conversion");l=y*f}}}let h=i.indexOf(".");if(h===-1&&(h=i.indexOf(",")),h!==-1){const y=new Number(`0${i.substring(h)}`);if(isNaN(y.valueOf()))throw new Error("Wrong input string for conversion");o=y.valueOf(),n=i.substring(0,h)}else n=i;switch(!0){case n.length===8:if(s=/(\d{4})(\d{2})(\d{2})/ig,h!==-1)throw new Error("Wrong input string for conversion");break;case n.length===10:if(s=/(\d{4})(\d{2})(\d{2})(\d{2})/ig,h!==-1){let y=60*o;this.minute=Math.floor(y),y=60*(y-this.minute),this.second=Math.floor(y),y=1e3*(y-this.second),this.millisecond=Math.floor(y)}break;case n.length===12:if(s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})/ig,h!==-1){let y=60*o;this.second=Math.floor(y),y=1e3*(y-this.second),this.millisecond=Math.floor(y)}break;case n.length===14:if(s=/(\d{4})(\d{2})(\d{2})(\d{2})(\d{2})(\d{2})/ig,h!==-1){const y=1e3*o;this.millisecond=Math.floor(y)}break;default:throw new Error("Wrong input string for conversion")}const p=s.exec(n);if(p===null)throw new Error("Wrong input string for conversion");for(let y=1;y<p.length;y++)switch(y){case 1:this.year=parseInt(p[y],10);break;case 2:this.month=parseInt(p[y],10);break;case 3:this.day=parseInt(p[y],10);break;case 4:this.hour=parseInt(p[y],10)+a;break;case 5:this.minute=parseInt(p[y],10)+l;break;case 6:this.second=parseInt(p[y],10);break;default:throw new Error("Wrong input string for conversion")}if(r===!1){const y=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second,this.millisecond);this.year=y.getUTCFullYear(),this.month=y.getUTCMonth(),this.day=y.getUTCDay(),this.hour=y.getUTCHours(),this.minute=y.getUTCMinutes(),this.second=y.getUTCSeconds(),this.millisecond=y.getUTCMilliseconds()}}toString(e="iso"){if(e==="iso"){const r=[];return r.push(De(this.year,4)),r.push(De(this.month,2)),r.push(De(this.day,2)),r.push(De(this.hour,2)),r.push(De(this.minute,2)),r.push(De(this.second,2)),this.millisecond!==0&&(r.push("."),r.push(De(this.millisecond,3))),r.push("Z"),r.join("")}return super.toString(e)}toJSON(){return{...super.toJSON(),millisecond:this.millisecond}}}rl=Xi,P.GeneralizedTime=rl,Xi.NAME="GeneralizedTime";var il;class xo extends kt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=31}}il=xo,P.DATE=il,xo.NAME="DATE";var nl;class Co extends kt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=32}}nl=Co,P.TimeOfDay=nl,Co.NAME="TimeOfDay";var ol;class Io extends kt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=33}}ol=Io,P.DateTime=ol,Io.NAME="DateTime";var sl;class To extends kt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=34}}sl=To,P.Duration=sl,To.NAME="Duration";var al;class No extends kt{constructor(e={}){super(e),this.idBlock.tagClass=1,this.idBlock.tagNumber=14}}al=No,P.TIME=al,No.NAME="TIME";class Yt{constructor({name:e=Pe,optional:r=!1}={}){this.name=e,this.optional=r}}class Oo extends Yt{constructor({value:e=[],...r}={}){super(r),this.value=e}}class Zi extends Yt{constructor({value:e=new Yt,local:r=!1,...i}={}){super(i),this.value=e,this.local=r}}class vf{constructor({data:e=ji}={}){this.dataView=O.toUint8Array(e)}get data(){return this.dataView.slice().buffer}set data(e){this.dataView=O.toUint8Array(e)}fromBER(e,r,i){const n=r+i;return this.dataView=O.toUint8Array(e).subarray(r,n),n}toBER(e){return this.dataView.slice().buffer}}function Qt(t,e,r){if(r instanceof Oo){for(let n=0;n<r.value.length;n++)if(Qt(t,e,r.value[n]).verified)return{verified:!0,result:t};{const n={verified:!1,result:{error:"Wrong values for Choice type"}};return r.hasOwnProperty(bo)&&(n.name=r.name),n}}if(r instanceof Yt)return r.hasOwnProperty(bo)&&(t[r.name]=e),{verified:!0,result:t};if(!(t instanceof Object))return{verified:!1,result:{error:"Wrong root object"}};if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 data"}};if(!(r instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(af in r))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(hf in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(!(pf in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const i=r.idBlock.toBER(!1);if(i.byteLength===0)return{verified:!1,result:{error:"Error encoding idBlock for ASN.1 schema"}};if(r.idBlock.fromBER(i,0,i.byteLength)===-1)return{verified:!1,result:{error:"Error decoding idBlock for ASN.1 schema"}};if(r.idBlock.hasOwnProperty(cf)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagClass!==e.idBlock.tagClass)return{verified:!1,result:t};if(r.idBlock.hasOwnProperty(lf)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.tagNumber!==e.idBlock.tagNumber)return{verified:!1,result:t};if(r.idBlock.hasOwnProperty(uf)===!1)return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isConstructed!==e.idBlock.isConstructed)return{verified:!1,result:t};if(!(sf in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};if(r.idBlock.isHexOnly!==e.idBlock.isHexOnly)return{verified:!1,result:t};if(r.idBlock.isHexOnly){if(!(uc in r.idBlock))return{verified:!1,result:{error:"Wrong ASN.1 schema"}};const n=r.idBlock.valueHexView,o=e.idBlock.valueHexView;if(n.length!==o.length)return{verified:!1,result:t};for(let s=0;s<n.length;s++)if(n[s]!==o[1])return{verified:!1,result:t}}if(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,Pe),r.name&&(t[r.name]=e)),r instanceof P.Constructed){let n=0,o={verified:!1,result:{error:"Unknown error"}},s=r.valueBlock.value.length;if(s>0&&r.valueBlock.value[0]instanceof Zi&&(s=e.valueBlock.value.length),s===0)return{verified:!0,result:t};if(e.valueBlock.value.length===0&&r.valueBlock.value.length!==0){let a=!0;for(let l=0;l<r.valueBlock.value.length;l++)a=a&&(r.valueBlock.value[l].optional||!1);return a?{verified:!0,result:t}:(r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,Pe),r.name&&delete t[r.name]),t.error="Inconsistent object length",{verified:!1,result:t})}for(let a=0;a<s;a++)if(a-n>=e.valueBlock.value.length){if(r.valueBlock.value[a].optional===!1){const l={verified:!1,result:t};return t.error="Inconsistent length between ASN.1 data and schema",r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,Pe),r.name&&(delete t[r.name],l.name=r.name)),l}}else if(r.valueBlock.value[0]instanceof Zi){if(o=Qt(t,e.valueBlock.value[a],r.valueBlock.value[0].value),o.verified===!1)if(r.valueBlock.value[0].optional)n++;else return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,Pe),r.name&&delete t[r.name]),o;if(bo in r.valueBlock.value[0]&&r.valueBlock.value[0].name.length>0){let l={};ff in r.valueBlock.value[0]&&r.valueBlock.value[0].local?l=e:l=t,typeof l[r.valueBlock.value[0].name]>"u"&&(l[r.valueBlock.value[0].name]=[]),l[r.valueBlock.value[0].name].push(e.valueBlock.value[a])}}else if(o=Qt(t,e.valueBlock.value[a-n],r.valueBlock.value[a]),o.verified===!1)if(r.valueBlock.value[a].optional)n++;else return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,Pe),r.name&&delete t[r.name]),o;if(o.verified===!1){const a={verified:!1,result:t};return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,Pe),r.name&&(delete t[r.name],a.name=r.name)),a}return{verified:!0,result:t}}if(r.primitiveSchema&&uc in e.valueBlock){const n=vr(e.valueBlock.valueHexView);if(n.offset===-1){const o={verified:!1,result:n.result};return r.name&&(r.name=r.name.replace(/^\s+|\s+$/g,Pe),r.name&&(delete t[r.name],o.name=r.name)),o}return Qt(t,n.result,r.primitiveSchema)}return{verified:!0,result:t}}function bf(t,e){if(!(e instanceof Object))return{verified:!1,result:{error:"Wrong ASN.1 schema type"}};const r=vr(O.toUint8Array(t));return r.offset===-1?{verified:!1,result:r.result}:Qt(r.result,r.result,e)}const cl=Object.freeze(Object.defineProperty({__proto__:null,Any:Yt,BaseBlock:Ee,BaseStringBlock:wo,BitString:Zt,BmpString:Mi,Boolean:Li,CharacterString:Ji,Choice:Oo,Constructed:He,DATE:xo,DateTime:Io,Duration:To,EndOfContent:So,Enumerated:Ui,GeneralString:Wi,GeneralizedTime:Xi,GraphicString:zi,HexBlock:ct,IA5String:qi,Integer:lt,Null:Jt,NumericString:Fi,ObjectIdentifier:Di,OctetString:Xt,Primitive:Xr,PrintableString:$i,RawData:vf,RelativeObjectIdentifier:ko,Repeated:Zi,Sequence:Et,Set:Bt,TIME:No,TeletexString:Gi,TimeOfDay:Co,UTCTime:Yr,UniversalString:Vi,Utf8String:kt,ValueBlock:Te,VideotexString:Ki,ViewWriter:_i,VisibleString:Zr,compareSchema:Qt,fromBER:br,verifySchema:bf},Symbol.toStringTag,{value:"Module"}));var k;(function(t){t[t.Sequence=0]="Sequence",t[t.Set=1]="Set",t[t.Choice=2]="Choice"})(k||(k={}));var g;(function(t){t[t.Any=1]="Any",t[t.Boolean=2]="Boolean",t[t.OctetString=3]="OctetString",t[t.BitString=4]="BitString",t[t.Integer=5]="Integer",t[t.Enumerated=6]="Enumerated",t[t.ObjectIdentifier=7]="ObjectIdentifier",t[t.Utf8String=8]="Utf8String",t[t.BmpString=9]="BmpString",t[t.UniversalString=10]="UniversalString",t[t.NumericString=11]="NumericString",t[t.PrintableString=12]="PrintableString",t[t.TeletexString=13]="TeletexString",t[t.VideotexString=14]="VideotexString",t[t.IA5String=15]="IA5String",t[t.GraphicString=16]="GraphicString",t[t.VisibleString=17]="VisibleString",t[t.GeneralString=18]="GeneralString",t[t.CharacterString=19]="CharacterString",t[t.UTCTime=20]="UTCTime",t[t.GeneralizedTime=21]="GeneralizedTime",t[t.DATE=22]="DATE",t[t.TimeOfDay=23]="TimeOfDay",t[t.DateTime=24]="DateTime",t[t.Duration=25]="Duration",t[t.TIME=26]="TIME",t[t.Null=27]="Null"})(g||(g={}));class Yi{constructor(e,r=0){if(this.unusedBits=0,this.value=new ArrayBuffer(0),e)if(typeof e=="number")this.fromNumber(e);else if(O.isBufferSource(e))this.unusedBits=r,this.value=O.toArrayBuffer(e);else throw TypeError("Unsupported type of 'params' argument for BitString")}fromASN(e){if(!(e instanceof Zt))throw new TypeError("Argument 'asn' is not instance of ASN.1 BitString");return this.unusedBits=e.valueBlock.unusedBits,this.value=e.valueBlock.valueHex,this}toASN(){return new Zt({unusedBits:this.unusedBits,valueHex:this.value})}toSchema(e){return new Zt({name:e})}toNumber(){let e="";const r=new Uint8Array(this.value);for(const i of r)e+=i.toString(2).padStart(8,"0");return e=e.split("").reverse().join(""),this.unusedBits&&(e=e.slice(this.unusedBits).padStart(this.unusedBits,"0")),parseInt(e,2)}fromNumber(e){let r=e.toString(2);const i=r.length+7>>3;this.unusedBits=(i<<3)-r.length;const n=new Uint8Array(i);r=r.padStart(i<<3,"0").split("").reverse().join("");let o=0;for(;o<i;)n[o]=parseInt(r.slice(o<<3,(o<<3)+8),2),o++;this.value=n.buffer}}class ee{constructor(e){typeof e=="number"?this.buffer=new ArrayBuffer(e):O.isBufferSource(e)?this.buffer=O.toArrayBuffer(e):Array.isArray(e)?this.buffer=new Uint8Array(e):this.buffer=new ArrayBuffer(0)}get byteLength(){return this.buffer.byteLength}get byteOffset(){return 0}fromASN(e){if(!(e instanceof Xt))throw new TypeError("Argument 'asn' is not instance of ASN.1 OctetString");return this.buffer=e.valueBlock.valueHex,this}toASN(){return new Xt({valueHex:this.buffer})}toSchema(e){return new Xt({name:e})}}const wf={fromASN:t=>t instanceof Jt?null:t.valueBeforeDecodeView,toASN:t=>{if(t===null)return new Jt;const e=br(t);if(e.result.error)throw new Error(e.result.error);return e.result}},Sf={fromASN:t=>t.valueBlock.valueHexView.byteLength>=4?t.valueBlock.toString():t.valueBlock.valueDec,toASN:t=>new lt({value:+t})},Af={fromASN:t=>t.valueBlock.valueDec,toASN:t=>new Ui({value:t})},le={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new lt({valueHex:t})},Ef={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new Zt({valueHex:t})},Bf={fromASN:t=>t.valueBlock.toString(),toASN:t=>new Di({value:t})},kf={fromASN:t=>t.valueBlock.value,toASN:t=>new Li({value:t})},Qi={fromASN:t=>t.valueBlock.valueHexView,toASN:t=>new Xt({valueHex:t})},xf={fromASN:t=>new ee(t.getValue()),toASN:t=>t.toASN()};function Ge(t){return{fromASN:e=>e.valueBlock.value,toASN:e=>new t({value:e})}}const ll=Ge(kt),Cf=Ge(Mi),If=Ge(Vi),Tf=Ge(Fi),Nf=Ge($i),Of=Ge(Gi),Pf=Ge(Ki),Hf=Ge(qi),Rf=Ge(zi),_f=Ge(Zr),jf=Ge(Wi),Lf=Ge(Ji),Uf={fromASN:t=>t.toDate(),toASN:t=>new Yr({valueDate:t})},Df={fromASN:t=>t.toDate(),toASN:t=>new Xi({valueDate:t})},Mf={fromASN:()=>null,toASN:()=>new Jt};function Po(t){switch(t){case g.Any:return wf;case g.BitString:return Ef;case g.BmpString:return Cf;case g.Boolean:return kf;case g.CharacterString:return Lf;case g.Enumerated:return Af;case g.GeneralString:return jf;case g.GeneralizedTime:return Df;case g.GraphicString:return Rf;case g.IA5String:return Hf;case g.Integer:return Sf;case g.Null:return Mf;case g.NumericString:return Tf;case g.ObjectIdentifier:return Bf;case g.OctetString:return Qi;case g.PrintableString:return Nf;case g.TeletexString:return Of;case g.UTCTime:return Uf;case g.UniversalString:return If;case g.Utf8String:return ll;case g.VideotexString:return Pf;case g.VisibleString:return _f;default:return null}}function xt(t){return typeof t=="function"&&t.prototype?t.prototype.toASN&&t.prototype.fromASN?!0:xt(t.prototype):!!(t&&typeof t=="object"&&"toASN"in t&&"fromASN"in t)}function ul(t){var e;if(t){const r=Object.getPrototypeOf(t);return((e=r==null?void 0:r.prototype)===null||e===void 0?void 0:e.constructor)===Array?!0:ul(r)}return!1}function Vf(t,e){if(!(t&&e)||t.byteLength!==e.byteLength)return!1;const r=new Uint8Array(t),i=new Uint8Array(e);for(let n=0;n<t.byteLength;n++)if(r[n]!==i[n])return!1;return!0}class Ff{constructor(){this.items=new WeakMap}has(e){return this.items.has(e)}get(e,r=!1){const i=this.items.get(e);if(!i)throw new Error(`Cannot get schema for '${e.prototype.constructor.name}' target`);if(r&&!i.schema)throw new Error(`Schema '${e.prototype.constructor.name}' doesn't contain ASN.1 schema. Call 'AsnSchemaStorage.cache'.`);return i}cache(e){const r=this.get(e);r.schema||(r.schema=this.create(e,!0))}createDefault(e){const r={type:k.Sequence,items:{}},i=this.findParentSchema(e);return i&&(Object.assign(r,i),r.items=Object.assign({},r.items,i.items)),r}create(e,r){const i=this.items.get(e)||this.createDefault(e),n=[];for(const o in i.items){const s=i.items[o],a=r?o:"";let l;if(typeof s.type=="number"){const p=g[s.type],y=cl[p];if(!y)throw new Error(`Cannot get ASN1 class by name '${p}'`);l=new y({name:a})}else xt(s.type)?l=new s.type().toSchema(a):s.optional?this.get(s.type).type===k.Choice?l=new Yt({name:a}):(l=this.create(s.type,!1),l.name=a):l=new Yt({name:a});const h=!!s.optional||s.defaultValue!==void 0;if(s.repeated){l.name="";const p=s.repeated==="set"?Bt:Et;l=new p({name:"",value:[new Zi({name:a,value:l})]})}if(s.context!==null&&s.context!==void 0)if(s.implicit)if(typeof s.type=="number"||xt(s.type)){const p=s.repeated?He:Xr;n.push(new p({name:a,optional:h,idBlock:{tagClass:3,tagNumber:s.context}}))}else{this.cache(s.type);const p=!!s.repeated;let y=p?l:this.get(s.type,!0).schema;y="valueBlock"in y?y.valueBlock.value:y.value,n.push(new He({name:p?"":a,optional:h,idBlock:{tagClass:3,tagNumber:s.context},value:y}))}else n.push(new He({optional:h,idBlock:{tagClass:3,tagNumber:s.context},value:[l]}));else l.optional=h,n.push(l)}switch(i.type){case k.Sequence:return new Et({value:n,name:""});case k.Set:return new Bt({value:n,name:""});case k.Choice:return new Oo({value:n,name:""});default:throw new Error("Unsupported ASN1 type in use")}}set(e,r){return this.items.set(e,r),this}findParentSchema(e){const r=Object.getPrototypeOf(e);return r?this.items.get(r)||this.findParentSchema(r):null}}const Ke=new Ff,C=t=>e=>{let r;Ke.has(e)?r=Ke.get(e):(r=Ke.createDefault(e),Ke.set(e,r)),Object.assign(r,t)},u=t=>(e,r)=>{let i;Ke.has(e.constructor)?i=Ke.get(e.constructor):(i=Ke.createDefault(e.constructor),Ke.set(e.constructor,i));const n=Object.assign({},t);if(typeof n.type=="number"&&!n.converter){const o=Po(t.type);if(!o)throw new Error(`Cannot get default converter for property '${r}' of ${e.constructor.name}`);n.converter=o}i.items[r]=n};class hl extends Error{constructor(){super(...arguments),this.schemas=[]}}class $f{static parse(e,r){const i=br(e);if(i.result.error)throw new Error(i.result.error);return this.fromASN(i.result,r)}static fromASN(e,r){var i;try{if(xt(r))return new r().fromASN(e);const n=Ke.get(r);Ke.cache(r);let o=n.schema;if(e.constructor===He&&n.type!==k.Choice){o=new He({idBlock:{tagClass:3,tagNumber:e.idBlock.tagNumber},value:n.schema.valueBlock.value});for(const l in n.items)delete e[l]}const s=Qt({},e,o);if(!s.verified)throw new hl(`Data does not match to ${r.name} ASN1 schema. ${s.result.error}`);const a=new r;if(ul(r)){if(!("value"in e.valueBlock&&Array.isArray(e.valueBlock.value)))throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");const l=n.itemType;if(typeof l=="number"){const h=Po(l);if(!h)throw new Error(`Cannot get default converter for array item of ${r.name} ASN1 schema`);return r.from(e.valueBlock.value,p=>h.fromASN(p))}else return r.from(e.valueBlock.value,h=>this.fromASN(h,l))}for(const l in n.items){const h=s.result[l];if(!h)continue;const p=n.items[l],y=p.type;if(typeof y=="number"||xt(y)){const B=(i=p.converter)!==null&&i!==void 0?i:xt(y)?new y:null;if(!B)throw new Error("Converter is empty");if(p.repeated)if(p.implicit){const w=p.repeated==="sequence"?Et:Bt,f=new w;f.valueBlock=h.valueBlock;const d=br(f.toBER(!1));if(d.offset===-1)throw new Error(`Cannot parse the child item. ${d.result.error}`);if(!("value"in d.result.valueBlock&&Array.isArray(d.result.valueBlock.value)))throw new Error("Cannot get items from the ASN.1 parsed value. ASN.1 object is not constructed.");const v=d.result.valueBlock.value;a[l]=Array.from(v,m=>B.fromASN(m))}else a[l]=Array.from(h,w=>B.fromASN(w));else{let w=h;if(p.implicit){let f;if(xt(y))f=new y().toSchema("");else{const d=g[y],v=cl[d];if(!v)throw new Error(`Cannot get '${d}' class from asn1js module`);f=new v}f.valueBlock=w.valueBlock,w=br(f.toBER(!1)).result}a[l]=B.fromASN(w)}}else if(p.repeated){if(!Array.isArray(h))throw new Error("Cannot get list of items from the ASN.1 parsed value. ASN.1 value should be iterable.");a[l]=Array.from(h,B=>this.fromASN(B,y))}else a[l]=this.fromASN(h,y)}return a}catch(n){throw n instanceof hl&&n.schemas.push(r.name),n}}}class Ho{static serialize(e){return e instanceof Ee?e.toBER(!1):this.toASN(e).toBER(!1)}static toASN(e){if(e&&typeof e=="object"&&xt(e))return e.toASN();if(!(e&&typeof e=="object"))throw new TypeError("Parameter 1 should be type of Object.");const r=e.constructor,i=Ke.get(r);Ke.cache(r);let n=[];if(i.itemType){if(!Array.isArray(e))throw new TypeError("Parameter 1 should be type of Array.");if(typeof i.itemType=="number"){const s=Po(i.itemType);if(!s)throw new Error(`Cannot get default converter for array item of ${r.name} ASN1 schema`);n=e.map(a=>s.toASN(a))}else n=e.map(s=>this.toAsnItem({type:i.itemType},"[]",r,s))}else for(const s in i.items){const a=i.items[s],l=e[s];if(l===void 0||a.defaultValue===l||typeof a.defaultValue=="object"&&typeof l=="object"&&Vf(this.serialize(a.defaultValue),this.serialize(l)))continue;const h=Ho.toAsnItem(a,s,r,l);if(typeof a.context=="number")if(a.implicit)if(!a.repeated&&(typeof a.type=="number"||xt(a.type))){const p={};p.valueHex=h instanceof Jt?h.valueBeforeDecodeView:h.valueBlock.toBER(),n.push(new Xr({optional:a.optional,idBlock:{tagClass:3,tagNumber:a.context},...p}))}else n.push(new He({optional:a.optional,idBlock:{tagClass:3,tagNumber:a.context},value:h.valueBlock.value}));else n.push(new He({optional:a.optional,idBlock:{tagClass:3,tagNumber:a.context},value:[h]}));else a.repeated?n=n.concat(h):n.push(h)}let o;switch(i.type){case k.Sequence:o=new Et({value:n});break;case k.Set:o=new Bt({value:n});break;case k.Choice:if(!n[0])throw new Error(`Schema '${r.name}' has wrong data. Choice cannot be empty.`);o=n[0];break}return o}static toAsnItem(e,r,i,n){let o;if(typeof e.type=="number"){const s=e.converter;if(!s)throw new Error(`Property '${r}' doesn't have converter for type ${g[e.type]} in schema '${i.name}'`);if(e.repeated){if(!Array.isArray(n))throw new TypeError("Parameter 'objProp' should be type of Array.");const a=Array.from(n,h=>s.toASN(h)),l=e.repeated==="sequence"?Et:Bt;o=new l({value:a})}else o=s.toASN(n)}else if(e.repeated){if(!Array.isArray(n))throw new TypeError("Parameter 'objProp' should be type of Array.");const s=Array.from(n,l=>this.toASN(l)),a=e.repeated==="sequence"?Et:Bt;o=new a({value:s})}else o=this.toASN(n);return o}}class oe extends Array{constructor(e=[]){if(typeof e=="number")super(e);else{super();for(const r of e)this.push(r)}}}class j{static serialize(e){return Ho.serialize(e)}static parse(e,r){return $f.parse(e,r)}static toString(e){const r=O.isBufferSource(e)?O.toArrayBuffer(e):j.serialize(e),i=br(r);if(i.offset===-1)throw new Error(`Cannot decode ASN.1 data. ${i.result.error}`);return i.result.toString()}}function c(t,e,r,i){var n=arguments.length,o=n<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,r):i,s;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(t,e,r,i);else for(var a=t.length-1;a>=0;a--)(s=t[a])&&(o=(n<3?s(o):n>3?s(e,r,o):s(e,r))||o);return n>3&&o&&Object.defineProperty(e,r,o),o}var en={},Gf={get exports(){return en},set exports(t){en=t}};(function(t){(function(e){const r="(0?\\d+|0x[a-f0-9]+)",i={fourOctet:new RegExp(`^${r}\\.${r}\\.${r}\\.${r}$`,"i"),threeOctet:new RegExp(`^${r}\\.${r}\\.${r}$`,"i"),twoOctet:new RegExp(`^${r}\\.${r}$`,"i"),longValue:new RegExp(`^${r}$`,"i")},n=new RegExp("^0[0-7]+$","i"),o=new RegExp("^0x[a-f0-9]+$","i"),s="%[0-9a-z]{1,}",a="(?:[0-9a-f]+::?)+",l={zoneIndex:new RegExp(s,"i"),native:new RegExp(`^(::)?(${a})?([0-9a-f]+)?(::)?(${s})?$`,"i"),deprecatedTransitional:new RegExp(`^(?:::)(${r}\\.${r}\\.${r}\\.${r}(${s})?)$`,"i"),transitional:new RegExp(`^((?:${a})|(?:::)(?:${a})?)${r}\\.${r}\\.${r}\\.${r}(${s})?$`,"i")};function h(f,d){if(f.indexOf("::")!==f.lastIndexOf("::"))return null;let v=0,m=-1,S=(f.match(l.zoneIndex)||[])[0],A,V;for(S&&(S=S.substring(1),f=f.replace(/%.+$/,""));(m=f.indexOf(":",m+1))>=0;)v++;if(f.substr(0,2)==="::"&&v--,f.substr(-2,2)==="::"&&v--,v>d)return null;for(V=d-v,A=":";V--;)A+="0:";return f=f.replace("::",A),f[0]===":"&&(f=f.slice(1)),f[f.length-1]===":"&&(f=f.slice(0,-1)),d=function(){const ne=f.split(":"),de=[];for(let te=0;te<ne.length;te++)de.push(parseInt(ne[te],16));return de}(),{parts:d,zoneId:S}}function p(f,d,v,m){if(f.length!==d.length)throw new Error("ipaddr: cannot match CIDR for objects with different lengths");let S=0,A;for(;m>0;){if(A=v-m,A<0&&(A=0),f[S]>>A!==d[S]>>A)return!1;m-=v,S+=1}return!0}function y(f){if(o.test(f))return parseInt(f,16);if(f[0]==="0"&&!isNaN(parseInt(f[1],10))){if(n.test(f))return parseInt(f,8);throw new Error(`ipaddr: cannot parse ${f} as octal`)}return parseInt(f,10)}function B(f,d){for(;f.length<d;)f=`0${f}`;return f}const w={};w.IPv4=function(){function f(d){if(d.length!==4)throw new Error("ipaddr: ipv4 octet count should be 4");let v,m;for(v=0;v<d.length;v++)if(m=d[v],!(0<=m&&m<=255))throw new Error("ipaddr: ipv4 octet should fit in 8 bits");this.octets=d}return f.prototype.SpecialRanges={unspecified:[[new f([0,0,0,0]),8]],broadcast:[[new f([255,255,255,255]),32]],multicast:[[new f([224,0,0,0]),4]],linkLocal:[[new f([169,254,0,0]),16]],loopback:[[new f([127,0,0,0]),8]],carrierGradeNat:[[new f([100,64,0,0]),10]],private:[[new f([10,0,0,0]),8],[new f([172,16,0,0]),12],[new f([192,168,0,0]),16]],reserved:[[new f([192,0,0,0]),24],[new f([192,0,2,0]),24],[new f([192,88,99,0]),24],[new f([198,51,100,0]),24],[new f([203,0,113,0]),24],[new f([240,0,0,0]),4]]},f.prototype.kind=function(){return"ipv4"},f.prototype.match=function(d,v){let m;if(v===void 0&&(m=d,d=m[0],v=m[1]),d.kind()!=="ipv4")throw new Error("ipaddr: cannot match ipv4 address with non-ipv4 one");return p(this.octets,d.octets,8,v)},f.prototype.prefixLengthFromSubnetMask=function(){let d=0,v=!1;const m={0:8,128:7,192:6,224:5,240:4,248:3,252:2,254:1,255:0};let S,A,V;for(S=3;S>=0;S-=1)if(A=this.octets[S],A in m){if(V=m[A],v&&V!==0)return null;V!==8&&(v=!0),d+=V}else return null;return 32-d},f.prototype.range=function(){return w.subnetMatch(this,this.SpecialRanges)},f.prototype.toByteArray=function(){return this.octets.slice(0)},f.prototype.toIPv4MappedAddress=function(){return w.IPv6.parse(`::ffff:${this.toString()}`)},f.prototype.toNormalizedString=function(){return this.toString()},f.prototype.toString=function(){return this.octets.join(".")},f}(),w.IPv4.broadcastAddressFromCIDR=function(f){try{const d=this.parseCIDR(f),v=d[0].toByteArray(),m=this.subnetMaskFromPrefixLength(d[1]).toByteArray(),S=[];let A=0;for(;A<4;)S.push(parseInt(v[A],10)|parseInt(m[A],10)^255),A++;return new this(S)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},w.IPv4.isIPv4=function(f){return this.parser(f)!==null},w.IPv4.isValid=function(f){try{return new this(this.parser(f)),!0}catch{return!1}},w.IPv4.isValidFourPartDecimal=function(f){return!!(w.IPv4.isValid(f)&&f.match(/^(0|[1-9]\d*)(\.(0|[1-9]\d*)){3}$/))},w.IPv4.networkAddressFromCIDR=function(f){let d,v,m,S,A;try{for(d=this.parseCIDR(f),m=d[0].toByteArray(),A=this.subnetMaskFromPrefixLength(d[1]).toByteArray(),S=[],v=0;v<4;)S.push(parseInt(m[v],10)&parseInt(A[v],10)),v++;return new this(S)}catch{throw new Error("ipaddr: the address does not have IPv4 CIDR format")}},w.IPv4.parse=function(f){const d=this.parser(f);if(d===null)throw new Error("ipaddr: string is not formatted like an IPv4 Address");return new this(d)},w.IPv4.parseCIDR=function(f){let d;if(d=f.match(/^(.+)\/(\d+)$/)){const v=parseInt(d[2]);if(v>=0&&v<=32){const m=[this.parse(d[1]),v];return Object.defineProperty(m,"toString",{value:function(){return this.join("/")}}),m}}throw new Error("ipaddr: string is not formatted like an IPv4 CIDR range")},w.IPv4.parser=function(f){let d,v,m;if(d=f.match(i.fourOctet))return function(){const S=d.slice(1,6),A=[];for(let V=0;V<S.length;V++)v=S[V],A.push(y(v));return A}();if(d=f.match(i.longValue)){if(m=y(d[1]),m>4294967295||m<0)throw new Error("ipaddr: address outside defined range");return function(){const S=[];let A;for(A=0;A<=24;A+=8)S.push(m>>A&255);return S}().reverse()}else return(d=f.match(i.twoOctet))?function(){const S=d.slice(1,4),A=[];if(m=y(S[1]),m>16777215||m<0)throw new Error("ipaddr: address outside defined range");return A.push(y(S[0])),A.push(m>>16&255),A.push(m>>8&255),A.push(m&255),A}():(d=f.match(i.threeOctet))?function(){const S=d.slice(1,5),A=[];if(m=y(S[2]),m>65535||m<0)throw new Error("ipaddr: address outside defined range");return A.push(y(S[0])),A.push(y(S[1])),A.push(m>>8&255),A.push(m&255),A}():null},w.IPv4.subnetMaskFromPrefixLength=function(f){if(f=parseInt(f),f<0||f>32)throw new Error("ipaddr: invalid IPv4 prefix length");const d=[0,0,0,0];let v=0;const m=Math.floor(f/8);for(;v<m;)d[v]=255,v++;return m<4&&(d[m]=Math.pow(2,f%8)-1<<8-f%8),new this(d)},w.IPv6=function(){function f(d,v){let m,S;if(d.length===16)for(this.parts=[],m=0;m<=14;m+=2)this.parts.push(d[m]<<8|d[m+1]);else if(d.length===8)this.parts=d;else throw new Error("ipaddr: ipv6 part count should be 8 or 16");for(m=0;m<this.parts.length;m++)if(S=this.parts[m],!(0<=S&&S<=65535))throw new Error("ipaddr: ipv6 part should fit in 16 bits");v&&(this.zoneId=v)}return f.prototype.SpecialRanges={unspecified:[new f([0,0,0,0,0,0,0,0]),128],linkLocal:[new f([65152,0,0,0,0,0,0,0]),10],multicast:[new f([65280,0,0,0,0,0,0,0]),8],loopback:[new f([0,0,0,0,0,0,0,1]),128],uniqueLocal:[new f([64512,0,0,0,0,0,0,0]),7],ipv4Mapped:[new f([0,0,0,0,0,65535,0,0]),96],rfc6145:[new f([0,0,0,0,65535,0,0,0]),96],rfc6052:[new f([100,65435,0,0,0,0,0,0]),96],"6to4":[new f([8194,0,0,0,0,0,0,0]),16],teredo:[new f([8193,0,0,0,0,0,0,0]),32],reserved:[[new f([8193,3512,0,0,0,0,0,0]),32]]},f.prototype.isIPv4MappedAddress=function(){return this.range()==="ipv4Mapped"},f.prototype.kind=function(){return"ipv6"},f.prototype.match=function(d,v){let m;if(v===void 0&&(m=d,d=m[0],v=m[1]),d.kind()!=="ipv6")throw new Error("ipaddr: cannot match ipv6 address with non-ipv6 one");return p(this.parts,d.parts,16,v)},f.prototype.prefixLengthFromSubnetMask=function(){let d=0,v=!1;const m={0:16,32768:15,49152:14,57344:13,61440:12,63488:11,64512:10,65024:9,65280:8,65408:7,65472:6,65504:5,65520:4,65528:3,65532:2,65534:1,65535:0};let S,A;for(let V=7;V>=0;V-=1)if(S=this.parts[V],S in m){if(A=m[S],v&&A!==0)return null;A!==16&&(v=!0),d+=A}else return null;return 128-d},f.prototype.range=function(){return w.subnetMatch(this,this.SpecialRanges)},f.prototype.toByteArray=function(){let d;const v=[],m=this.parts;for(let S=0;S<m.length;S++)d=m[S],v.push(d>>8),v.push(d&255);return v},f.prototype.toFixedLengthString=function(){const d=function(){const m=[];for(let S=0;S<this.parts.length;S++)m.push(B(this.parts[S].toString(16),4));return m}.call(this).join(":");let v="";return this.zoneId&&(v=`%${this.zoneId}`),d+v},f.prototype.toIPv4Address=function(){if(!this.isIPv4MappedAddress())throw new Error("ipaddr: trying to convert a generic ipv6 address to ipv4");const d=this.parts.slice(-2),v=d[0],m=d[1];return new w.IPv4([v>>8,v&255,m>>8,m&255])},f.prototype.toNormalizedString=function(){const d=function(){const m=[];for(let S=0;S<this.parts.length;S++)m.push(this.parts[S].toString(16));return m}.call(this).join(":");let v="";return this.zoneId&&(v=`%${this.zoneId}`),d+v},f.prototype.toRFC5952String=function(){const d=/((^|:)(0(:|$)){2,})/g,v=this.toNormalizedString();let m=0,S=-1,A;for(;A=d.exec(v);)A[0].length>S&&(m=A.index,S=A[0].length);return S<0?v:`${v.substring(0,m)}::${v.substring(m+S)}`},f.prototype.toString=function(){return this.toNormalizedString().replace(/((^|:)(0(:|$))+)/,"::")},f}(),w.IPv6.broadcastAddressFromCIDR=function(f){try{const d=this.parseCIDR(f),v=d[0].toByteArray(),m=this.subnetMaskFromPrefixLength(d[1]).toByteArray(),S=[];let A=0;for(;A<16;)S.push(parseInt(v[A],10)|parseInt(m[A],10)^255),A++;return new this(S)}catch(d){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${d})`)}},w.IPv6.isIPv6=function(f){return this.parser(f)!==null},w.IPv6.isValid=function(f){if(typeof f=="string"&&f.indexOf(":")===-1)return!1;try{const d=this.parser(f);return new this(d.parts,d.zoneId),!0}catch{return!1}},w.IPv6.networkAddressFromCIDR=function(f){let d,v,m,S,A;try{for(d=this.parseCIDR(f),m=d[0].toByteArray(),A=this.subnetMaskFromPrefixLength(d[1]).toByteArray(),S=[],v=0;v<16;)S.push(parseInt(m[v],10)&parseInt(A[v],10)),v++;return new this(S)}catch(V){throw new Error(`ipaddr: the address does not have IPv6 CIDR format (${V})`)}},w.IPv6.parse=function(f){const d=this.parser(f);if(d.parts===null)throw new Error("ipaddr: string is not formatted like an IPv6 Address");return new this(d.parts,d.zoneId)},w.IPv6.parseCIDR=function(f){let d,v,m;if((v=f.match(/^(.+)\/(\d+)$/))&&(d=parseInt(v[2]),d>=0&&d<=128))return m=[this.parse(v[1]),d],Object.defineProperty(m,"toString",{value:function(){return this.join("/")}}),m;throw new Error("ipaddr: string is not formatted like an IPv6 CIDR range")},w.IPv6.parser=function(f){let d,v,m,S,A,V;if(m=f.match(l.deprecatedTransitional))return this.parser(`::ffff:${m[1]}`);if(l.native.test(f))return h(f,8);if((m=f.match(l.transitional))&&(V=m[6]||"",d=h(m[1].slice(0,-1)+V,6),d.parts)){for(A=[parseInt(m[2]),parseInt(m[3]),parseInt(m[4]),parseInt(m[5])],v=0;v<A.length;v++)if(S=A[v],!(0<=S&&S<=255))return null;return d.parts.push(A[0]<<8|A[1]),d.parts.push(A[2]<<8|A[3]),{parts:d.parts,zoneId:d.zoneId}}return null},w.IPv6.subnetMaskFromPrefixLength=function(f){if(f=parseInt(f),f<0||f>128)throw new Error("ipaddr: invalid IPv6 prefix length");const d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];let v=0;const m=Math.floor(f/8);for(;v<m;)d[v]=255,v++;return m<16&&(d[m]=Math.pow(2,f%8)-1<<8-f%8),new this(d)},w.fromByteArray=function(f){const d=f.length;if(d===4)return new w.IPv4(f);if(d===16)return new w.IPv6(f);throw new Error("ipaddr: the binary input is neither an IPv6 nor IPv4 address")},w.isValid=function(f){return w.IPv6.isValid(f)||w.IPv4.isValid(f)},w.parse=function(f){if(w.IPv6.isValid(f))return w.IPv6.parse(f);if(w.IPv4.isValid(f))return w.IPv4.parse(f);throw new Error("ipaddr: the address has neither IPv6 nor IPv4 format")},w.parseCIDR=function(f){try{return w.IPv6.parseCIDR(f)}catch{try{return w.IPv4.parseCIDR(f)}catch{throw new Error("ipaddr: the address has neither IPv6 nor IPv4 CIDR format")}}},w.process=function(f){const d=this.parse(f);return d.kind()==="ipv6"&&d.isIPv4MappedAddress()?d.toIPv4Address():d},w.subnetMatch=function(f,d,v){let m,S,A,V;v==null&&(v="unicast");for(S in d)if(Object.prototype.hasOwnProperty.call(d,S)){for(A=d[S],A[0]&&!(A[0]instanceof Array)&&(A=[A]),m=0;m<A.length;m++)if(V=A[m],f.kind()===V[0].kind()&&f.match.apply(f,V))return S}return v},t.exports?t.exports=w:e.ipaddr=w})(go)})(Gf);class pl{static decodeIP(e){if(e.length===64&&parseInt(e,16)===0)return"::/0";if(e.length!==16)return e;const r=parseInt(e.slice(8),16).toString(2).split("").reduce((n,o)=>n+ +o,0);let i=e.slice(0,8).replace(/(.{2})/g,n=>`${parseInt(n,16)}.`);return i=i.slice(0,-1),`${i}/${r}`}static toString(e){if(e.byteLength===4||e.byteLength===16){const r=new Uint8Array(e);return en.fromByteArray(Array.from(r)).toString()}return this.decodeIP(H.ToHex(e))}static fromString(e){const r=en.parse(e);return new Uint8Array(r.toByteArray()).buffer}}var Ro,_o,jo;let Be=class{constructor(t={}){Object.assign(this,t)}toString(){return this.bmpString||this.printableString||this.teletexString||this.universalString||this.utf8String||""}};c([u({type:g.TeletexString})],Be.prototype,"teletexString",void 0),c([u({type:g.PrintableString})],Be.prototype,"printableString",void 0),c([u({type:g.UniversalString})],Be.prototype,"universalString",void 0),c([u({type:g.Utf8String})],Be.prototype,"utf8String",void 0),c([u({type:g.BmpString})],Be.prototype,"bmpString",void 0),Be=c([C({type:k.Choice})],Be);let wr=class extends Be{constructor(t={}){super(t),Object.assign(this,t)}toString(){return this.ia5String||(this.anyValue?H.ToHex(this.anyValue):super.toString())}};c([u({type:g.IA5String})],wr.prototype,"ia5String",void 0),c([u({type:g.Any})],wr.prototype,"anyValue",void 0),wr=c([C({type:k.Choice})],wr);class Qr{constructor(e={}){this.type="",this.value=new wr,Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],Qr.prototype,"type",void 0),c([u({type:wr})],Qr.prototype,"value",void 0);let Sr=Ro=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,Ro.prototype)}};Sr=Ro=c([C({type:k.Set,itemType:Qr})],Sr);let Lo=_o=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,_o.prototype)}};Lo=_o=c([C({type:k.Sequence,itemType:Sr})],Lo);let we=jo=class extends Lo{constructor(t){super(t),Object.setPrototypeOf(this,jo.prototype)}};we=jo=c([C({type:k.Sequence})],we);const Kf={fromASN:t=>pl.toString(Qi.fromASN(t)),toASN:t=>Qi.toASN(pl.fromString(t))};class ei{constructor(e={}){this.typeId="",this.value=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],ei.prototype,"typeId",void 0),c([u({type:g.Any,context:0})],ei.prototype,"value",void 0);class Uo{constructor(e={}){this.partyName=new Be,Object.assign(this,e)}}c([u({type:Be,optional:!0,context:0,implicit:!0})],Uo.prototype,"nameAssigner",void 0),c([u({type:Be,context:1,implicit:!0})],Uo.prototype,"partyName",void 0);let K=class{constructor(t={}){Object.assign(this,t)}};c([u({type:ei,context:0,implicit:!0})],K.prototype,"otherName",void 0),c([u({type:g.IA5String,context:1,implicit:!0})],K.prototype,"rfc822Name",void 0),c([u({type:g.IA5String,context:2,implicit:!0})],K.prototype,"dNSName",void 0),c([u({type:g.Any,context:3,implicit:!0})],K.prototype,"x400Address",void 0),c([u({type:we,context:4,implicit:!1})],K.prototype,"directoryName",void 0),c([u({type:Uo,context:5})],K.prototype,"ediPartyName",void 0),c([u({type:g.IA5String,context:6,implicit:!0})],K.prototype,"uniformResourceIdentifier",void 0),c([u({type:g.OctetString,context:7,implicit:!0,converter:Kf})],K.prototype,"iPAddress",void 0),c([u({type:g.ObjectIdentifier,context:8,implicit:!0})],K.prototype,"registeredID",void 0),K=c([C({type:k.Choice})],K);const qf="1.3.6.1.5.5.7",Ar=`${qf}.3`,er="2.5.29";var Do;class tn{constructor(e={}){this.accessMethod="",this.accessLocation=new K,Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],tn.prototype,"accessMethod",void 0),c([u({type:K})],tn.prototype,"accessLocation",void 0);let fl=Do=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,Do.prototype)}};fl=Do=c([C({type:k.Sequence,itemType:tn})],fl);const Mo=`${er}.35`;class Vo extends ee{}class tr{constructor(e={}){e&&Object.assign(this,e)}}c([u({type:Vo,context:0,optional:!0,implicit:!0})],tr.prototype,"keyIdentifier",void 0),c([u({type:K,context:1,optional:!0,implicit:!0,repeated:"sequence"})],tr.prototype,"authorityCertIssuer",void 0),c([u({type:g.Integer,context:2,optional:!0,implicit:!0,converter:le})],tr.prototype,"authorityCertSerialNumber",void 0);const dl=`${er}.19`;class rn{constructor(e={}){this.cA=!1,Object.assign(this,e)}}c([u({type:g.Boolean,defaultValue:!1})],rn.prototype,"cA",void 0),c([u({type:g.Integer,optional:!0})],rn.prototype,"pathLenConstraint",void 0);var Fo;let Ne=Fo=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,Fo.prototype)}};Ne=Fo=c([C({type:k.Sequence,itemType:K})],Ne);var $o;let yl=$o=class extends Ne{constructor(t){super(t),Object.setPrototypeOf(this,$o.prototype)}};yl=$o=c([C({type:k.Sequence})],yl);var Go;const gl=`${er}.32`;let Ct=class{constructor(t={}){Object.assign(this,t)}toString(){return this.ia5String||this.visibleString||this.bmpString||this.utf8String||""}};c([u({type:g.IA5String})],Ct.prototype,"ia5String",void 0),c([u({type:g.VisibleString})],Ct.prototype,"visibleString",void 0),c([u({type:g.BmpString})],Ct.prototype,"bmpString",void 0),c([u({type:g.Utf8String})],Ct.prototype,"utf8String",void 0),Ct=c([C({type:k.Choice})],Ct);class Ko{constructor(e={}){this.organization=new Ct,this.noticeNumbers=[],Object.assign(this,e)}}c([u({type:Ct})],Ko.prototype,"organization",void 0),c([u({type:g.Integer,repeated:"sequence"})],Ko.prototype,"noticeNumbers",void 0);class qo{constructor(e={}){Object.assign(this,e)}}c([u({type:Ko,optional:!0})],qo.prototype,"noticeRef",void 0),c([u({type:Ct,optional:!0})],qo.prototype,"explicitText",void 0);let nn=class{constructor(t={}){Object.assign(this,t)}};c([u({type:g.IA5String})],nn.prototype,"cPSuri",void 0),c([u({type:qo})],nn.prototype,"userNotice",void 0),nn=c([C({type:k.Choice})],nn);class zo{constructor(e={}){this.policyQualifierId="",this.qualifier=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],zo.prototype,"policyQualifierId",void 0),c([u({type:g.Any})],zo.prototype,"qualifier",void 0);class on{constructor(e={}){this.policyIdentifier="",Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],on.prototype,"policyIdentifier",void 0),c([u({type:zo,repeated:"sequence",optional:!0})],on.prototype,"policyQualifiers",void 0);let sn=Go=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,Go.prototype)}};sn=Go=c([C({type:k.Sequence,itemType:on})],sn);let an=class{constructor(t=0){this.value=t}};c([u({type:g.Integer})],an.prototype,"value",void 0),an=c([C({type:k.Choice})],an);let ml=class extends an{};ml=c([C({type:k.Choice})],ml);var Wo,et;(function(t){t[t.unused=1]="unused",t[t.keyCompromise=2]="keyCompromise",t[t.cACompromise=4]="cACompromise",t[t.affiliationChanged=8]="affiliationChanged",t[t.superseded=16]="superseded",t[t.cessationOfOperation=32]="cessationOfOperation",t[t.certificateHold=64]="certificateHold",t[t.privilegeWithdrawn=128]="privilegeWithdrawn",t[t.aACompromise=256]="aACompromise"})(et||(et={}));class vl extends Yi{toJSON(){const e=[],r=this.toNumber();return r&et.aACompromise&&e.push("aACompromise"),r&et.affiliationChanged&&e.push("affiliationChanged"),r&et.cACompromise&&e.push("cACompromise"),r&et.certificateHold&&e.push("certificateHold"),r&et.cessationOfOperation&&e.push("cessationOfOperation"),r&et.keyCompromise&&e.push("keyCompromise"),r&et.privilegeWithdrawn&&e.push("privilegeWithdrawn"),r&et.superseded&&e.push("superseded"),r&et.unused&&e.push("unused"),e}toString(){return`[${this.toJSON().join(", ")}]`}}let Er=class{constructor(t={}){Object.assign(this,t)}};c([u({type:K,context:0,repeated:"sequence",implicit:!0})],Er.prototype,"fullName",void 0),c([u({type:Sr,context:1,implicit:!0})],Er.prototype,"nameRelativeToCRLIssuer",void 0),Er=c([C({type:k.Choice})],Er);class ti{constructor(e={}){Object.assign(this,e)}}c([u({type:Er,context:0,optional:!0})],ti.prototype,"distributionPoint",void 0),c([u({type:vl,context:1,optional:!0,implicit:!0})],ti.prototype,"reasons",void 0),c([u({type:K,context:2,optional:!0,repeated:"sequence",implicit:!0})],ti.prototype,"cRLIssuer",void 0);let Jo=Wo=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,Wo.prototype)}};Jo=Wo=c([C({type:k.Sequence,itemType:ti})],Jo);var Xo;let bl=Xo=class extends Jo{constructor(t){super(t),Object.setPrototypeOf(this,Xo.prototype)}};bl=Xo=c([C({type:k.Sequence,itemType:ti})],bl);class Ce{constructor(e={}){this.onlyContainsUserCerts=Ce.ONLY,this.onlyContainsCACerts=Ce.ONLY,this.indirectCRL=Ce.ONLY,this.onlyContainsAttributeCerts=Ce.ONLY,Object.assign(this,e)}}Ce.ONLY=!1,c([u({type:Er,context:0,optional:!0})],Ce.prototype,"distributionPoint",void 0),c([u({type:g.Boolean,context:1,defaultValue:Ce.ONLY,implicit:!0})],Ce.prototype,"onlyContainsUserCerts",void 0),c([u({type:g.Boolean,context:2,defaultValue:Ce.ONLY,implicit:!0})],Ce.prototype,"onlyContainsCACerts",void 0),c([u({type:vl,context:3,optional:!0,implicit:!0})],Ce.prototype,"onlySomeReasons",void 0),c([u({type:g.Boolean,context:4,defaultValue:Ce.ONLY,implicit:!0})],Ce.prototype,"indirectCRL",void 0),c([u({type:g.Boolean,context:5,defaultValue:Ce.ONLY,implicit:!0})],Ce.prototype,"onlyContainsAttributeCerts",void 0);var ri;(function(t){t[t.unspecified=0]="unspecified",t[t.keyCompromise=1]="keyCompromise",t[t.cACompromise=2]="cACompromise",t[t.affiliationChanged=3]="affiliationChanged",t[t.superseded=4]="superseded",t[t.cessationOfOperation=5]="cessationOfOperation",t[t.certificateHold=6]="certificateHold",t[t.removeFromCRL=8]="removeFromCRL",t[t.privilegeWithdrawn=9]="privilegeWithdrawn",t[t.aACompromise=10]="aACompromise"})(ri||(ri={}));let Zo=class{constructor(t=ri.unspecified){this.reason=ri.unspecified,this.reason=t}toJSON(){return ri[this.reason]}toString(){return this.toJSON()}};c([u({type:g.Enumerated})],Zo.prototype,"reason",void 0),Zo=c([C({type:k.Choice})],Zo);var Yo;const wl=`${er}.37`;let cn=Yo=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,Yo.prototype)}};cn=Yo=c([C({type:k.Sequence,itemType:g.ObjectIdentifier})],cn);const zf=`${Ar}.1`,Wf=`${Ar}.2`,Jf=`${Ar}.3`,Xf=`${Ar}.4`,Zf=`${Ar}.8`,Yf=`${Ar}.9`;let Qo=class{constructor(t=new ArrayBuffer(0)){this.value=t}};c([u({type:g.Integer,converter:le})],Qo.prototype,"value",void 0),Qo=c([C({type:k.Choice})],Qo);let es=class{constructor(t){this.value=new Date,t&&(this.value=t)}};c([u({type:g.GeneralizedTime})],es.prototype,"value",void 0),es=c([C({type:k.Choice})],es);var ts;let Sl=ts=class extends Ne{constructor(t){super(t),Object.setPrototypeOf(this,ts.prototype)}};Sl=ts=c([C({type:k.Sequence})],Sl);const Al=`${er}.15`;var tt;(function(t){t[t.digitalSignature=1]="digitalSignature",t[t.nonRepudiation=2]="nonRepudiation",t[t.keyEncipherment=4]="keyEncipherment",t[t.dataEncipherment=8]="dataEncipherment",t[t.keyAgreement=16]="keyAgreement",t[t.keyCertSign=32]="keyCertSign",t[t.cRLSign=64]="cRLSign",t[t.encipherOnly=128]="encipherOnly",t[t.decipherOnly=256]="decipherOnly"})(tt||(tt={}));class rs extends Yi{toJSON(){const e=this.toNumber(),r=[];return e&tt.cRLSign&&r.push("crlSign"),e&tt.dataEncipherment&&r.push("dataEncipherment"),e&tt.decipherOnly&&r.push("decipherOnly"),e&tt.digitalSignature&&r.push("digitalSignature"),e&tt.encipherOnly&&r.push("encipherOnly"),e&tt.keyAgreement&&r.push("keyAgreement"),e&tt.keyCertSign&&r.push("keyCertSign"),e&tt.keyEncipherment&&r.push("keyEncipherment"),e&tt.nonRepudiation&&r.push("nonRepudiation"),r}toString(){return`[${this.toJSON().join(", ")}]`}}var is;class ln{constructor(e={}){this.base=new K,this.minimum=0,Object.assign(this,e)}}c([u({type:K})],ln.prototype,"base",void 0),c([u({type:g.Integer,context:0,defaultValue:0,implicit:!0})],ln.prototype,"minimum",void 0),c([u({type:g.Integer,context:1,optional:!0,implicit:!0})],ln.prototype,"maximum",void 0);let un=is=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,is.prototype)}};un=is=c([C({type:k.Sequence,itemType:ln})],un);class El{constructor(e={}){Object.assign(this,e)}}c([u({type:un,context:0,optional:!0,implicit:!0})],El.prototype,"permittedSubtrees",void 0),c([u({type:un,context:1,optional:!0,implicit:!0})],El.prototype,"excludedSubtrees",void 0);class Bl{constructor(e={}){Object.assign(this,e)}}c([u({type:g.Integer,context:0,implicit:!0,optional:!0,converter:le})],Bl.prototype,"requireExplicitPolicy",void 0),c([u({type:g.Integer,context:1,implicit:!0,optional:!0,converter:le})],Bl.prototype,"inhibitPolicyMapping",void 0);var ns;class os{constructor(e={}){this.issuerDomainPolicy="",this.subjectDomainPolicy="",Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],os.prototype,"issuerDomainPolicy",void 0),c([u({type:g.ObjectIdentifier})],os.prototype,"subjectDomainPolicy",void 0);let kl=ns=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,ns.prototype)}};kl=ns=c([C({type:k.Sequence,itemType:os})],kl);var ss;const xl=`${er}.17`;let as=ss=class extends Ne{constructor(t){super(t),Object.setPrototypeOf(this,ss.prototype)}};as=ss=c([C({type:k.Sequence})],as);let It=class{constructor(t={}){this.type="",this.values=[],Object.assign(this,t)}};c([u({type:g.ObjectIdentifier})],It.prototype,"type",void 0),c([u({type:g.Any,repeated:"set"})],It.prototype,"values",void 0);var cs;let Cl=cs=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,cs.prototype)}};Cl=cs=c([C({type:k.Sequence,itemType:It})],Cl);const Il=`${er}.14`;class Ut extends Vo{}class Tl{constructor(e={}){Object.assign(this,e)}}c([u({type:g.GeneralizedTime,context:0,implicit:!0,optional:!0})],Tl.prototype,"notBefore",void 0),c([u({type:g.GeneralizedTime,context:1,implicit:!0,optional:!0})],Tl.prototype,"notAfter",void 0);var ii;(function(t){t[t.keyUpdateAllowed=1]="keyUpdateAllowed",t[t.newExtensions=2]="newExtensions",t[t.pKIXCertificate=4]="pKIXCertificate"})(ii||(ii={}));class Nl extends Yi{toJSON(){const e=[],r=this.toNumber();return r&ii.pKIXCertificate&&e.push("pKIXCertificate"),r&ii.newExtensions&&e.push("newExtensions"),r&ii.keyUpdateAllowed&&e.push("keyUpdateAllowed"),e}toString(){return`[${this.toJSON().join(", ")}]`}}class Ol{constructor(e={}){this.entrustVers="",this.entrustInfoFlags=new Nl,Object.assign(this,e)}}c([u({type:g.GeneralString})],Ol.prototype,"entrustVers",void 0),c([u({type:Nl})],Ol.prototype,"entrustInfoFlags",void 0);var ls;let Pl=ls=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,ls.prototype)}};Pl=ls=c([C({type:k.Sequence,itemType:tn})],Pl);class _{constructor(e={}){this.algorithm="",Object.assign(this,e)}isEqual(e){return e instanceof _&&e.algorithm==this.algorithm&&(e.parameters&&this.parameters&&ac(e.parameters,this.parameters)||e.parameters===this.parameters)}}c([u({type:g.ObjectIdentifier})],_.prototype,"algorithm",void 0),c([u({type:g.Any,optional:!0})],_.prototype,"parameters",void 0);class Tt{constructor(e={}){this.algorithm=new _,this.subjectPublicKey=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:_})],Tt.prototype,"algorithm",void 0),c([u({type:g.BitString})],Tt.prototype,"subjectPublicKey",void 0);let Ie=class{constructor(t){if(t)if(typeof t=="string"||typeof t=="number"||t instanceof Date){const e=new Date(t);e.getUTCFullYear()>2049?this.generalTime=e:this.utcTime=e}else Object.assign(this,t)}getTime(){const t=this.utcTime||this.generalTime;if(!t)throw new Error("Cannot get time from CHOICE object");return t}};c([u({type:g.UTCTime})],Ie.prototype,"utcTime",void 0),c([u({type:g.GeneralizedTime})],Ie.prototype,"generalTime",void 0),Ie=c([C({type:k.Choice})],Ie);class hn{constructor(e){this.notBefore=new Ie(new Date),this.notAfter=new Ie(new Date),e&&(this.notBefore=new Ie(e.notBefore),this.notAfter=new Ie(e.notAfter))}}c([u({type:Ie})],hn.prototype,"notBefore",void 0),c([u({type:Ie})],hn.prototype,"notAfter",void 0);var us;let rt=class Zp{constructor(e={}){this.extnID="",this.critical=Zp.CRITICAL,this.extnValue=new ee,Object.assign(this,e)}};rt.CRITICAL=!1,c([u({type:g.ObjectIdentifier})],rt.prototype,"extnID",void 0),c([u({type:g.Boolean,defaultValue:rt.CRITICAL})],rt.prototype,"critical",void 0),c([u({type:ee})],rt.prototype,"extnValue",void 0);let rr=us=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,us.prototype)}};rr=us=c([C({type:k.Sequence,itemType:rt})],rr);var Br;(function(t){t[t.v1=0]="v1",t[t.v2=1]="v2",t[t.v3=2]="v3"})(Br||(Br={}));class qe{constructor(e={}){this.version=Br.v1,this.serialNumber=new ArrayBuffer(0),this.signature=new _,this.issuer=new we,this.validity=new hn,this.subject=new we,this.subjectPublicKeyInfo=new Tt,Object.assign(this,e)}}c([u({type:g.Integer,context:0,defaultValue:Br.v1})],qe.prototype,"version",void 0),c([u({type:g.Integer,converter:le})],qe.prototype,"serialNumber",void 0),c([u({type:_})],qe.prototype,"signature",void 0),c([u({type:we})],qe.prototype,"issuer",void 0),c([u({type:hn})],qe.prototype,"validity",void 0),c([u({type:we})],qe.prototype,"subject",void 0),c([u({type:Tt})],qe.prototype,"subjectPublicKeyInfo",void 0),c([u({type:g.BitString,context:1,implicit:!0,optional:!0})],qe.prototype,"issuerUniqueID",void 0),c([u({type:g.BitString,context:2,implicit:!0,optional:!0})],qe.prototype,"subjectUniqueID",void 0),c([u({type:rr,context:3,optional:!0})],qe.prototype,"extensions",void 0);class kr{constructor(e={}){this.tbsCertificate=new qe,this.signatureAlgorithm=new _,this.signatureValue=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:qe})],kr.prototype,"tbsCertificate",void 0),c([u({type:_})],kr.prototype,"signatureAlgorithm",void 0),c([u({type:g.BitString})],kr.prototype,"signatureValue",void 0);class pn{constructor(e={}){this.userCertificate=new ArrayBuffer(0),this.revocationDate=new Ie,Object.assign(this,e)}}c([u({type:g.Integer,converter:le})],pn.prototype,"userCertificate",void 0),c([u({type:Ie})],pn.prototype,"revocationDate",void 0),c([u({type:rt,optional:!0,repeated:"sequence"})],pn.prototype,"crlEntryExtensions",void 0);class Nt{constructor(e={}){this.signature=new _,this.issuer=new we,this.thisUpdate=new Ie,Object.assign(this,e)}}c([u({type:g.Integer,optional:!0})],Nt.prototype,"version",void 0),c([u({type:_})],Nt.prototype,"signature",void 0),c([u({type:we})],Nt.prototype,"issuer",void 0),c([u({type:Ie})],Nt.prototype,"thisUpdate",void 0),c([u({type:Ie,optional:!0})],Nt.prototype,"nextUpdate",void 0),c([u({type:pn,repeated:"sequence",optional:!0})],Nt.prototype,"revokedCertificates",void 0),c([u({type:rt,optional:!0,context:0,repeated:"sequence"})],Nt.prototype,"crlExtensions",void 0);let hs=class{constructor(t={}){this.tbsCertList=new Nt,this.signatureAlgorithm=new _,this.signature=new ArrayBuffer(0),Object.assign(this,t)}};c([u({type:Nt})],hs.prototype,"tbsCertList",void 0),c([u({type:_})],hs.prototype,"signatureAlgorithm",void 0),c([u({type:g.BitString})],hs.prototype,"signature",void 0);let xr=class{constructor(t={}){this.attrType="",this.attrValues=[],Object.assign(this,t)}};c([u({type:g.ObjectIdentifier})],xr.prototype,"attrType",void 0),c([u({type:g.Any,repeated:"set"})],xr.prototype,"attrValues",void 0);class ps{constructor(e={}){this.acIssuer=new K,this.acSerial=0,this.attrs=[],Object.assign(this,e)}}c([u({type:K})],ps.prototype,"acIssuer",void 0),c([u({type:g.Integer})],ps.prototype,"acSerial",void 0),c([u({type:It,repeated:"sequence"})],ps.prototype,"attrs",void 0);var fs;let fn=fs=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,fs.prototype)}};fn=fs=c([C({type:k.Sequence,itemType:g.ObjectIdentifier})],fn);class dn{constructor(e={}){this.permitUnSpecified=!0,Object.assign(this,e)}}c([u({type:g.Integer,optional:!0})],dn.prototype,"pathLenConstraint",void 0),c([u({type:fn,implicit:!0,context:0,optional:!0})],dn.prototype,"permittedAttrs",void 0),c([u({type:fn,implicit:!0,context:1,optional:!0})],dn.prototype,"excludedAttrs",void 0),c([u({type:g.Boolean,defaultValue:!0})],dn.prototype,"permitUnSpecified",void 0);class ir{constructor(e={}){this.issuer=new Ne,this.serial=new ArrayBuffer(0),this.issuerUID=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:Ne})],ir.prototype,"issuer",void 0),c([u({type:g.Integer,converter:le})],ir.prototype,"serial",void 0),c([u({type:g.BitString,optional:!0})],ir.prototype,"issuerUID",void 0);var ds;(function(t){t[t.publicKey=0]="publicKey",t[t.publicKeyCert=1]="publicKeyCert",t[t.otherObjectTypes=2]="otherObjectTypes"})(ds||(ds={}));class nr{constructor(e={}){this.digestedObjectType=ds.publicKey,this.digestAlgorithm=new _,this.objectDigest=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:g.Enumerated})],nr.prototype,"digestedObjectType",void 0),c([u({type:g.ObjectIdentifier,optional:!0})],nr.prototype,"otherObjectTypeID",void 0),c([u({type:_})],nr.prototype,"digestAlgorithm",void 0),c([u({type:g.BitString})],nr.prototype,"objectDigest",void 0);class yn{constructor(e={}){Object.assign(this,e)}}c([u({type:Ne,optional:!0})],yn.prototype,"issuerName",void 0),c([u({type:ir,context:0,implicit:!0,optional:!0})],yn.prototype,"baseCertificateID",void 0),c([u({type:nr,context:1,implicit:!0,optional:!0})],yn.prototype,"objectDigestInfo",void 0);let Cr=class{constructor(t={}){Object.assign(this,t)}};c([u({type:K,repeated:"sequence"})],Cr.prototype,"v1Form",void 0),c([u({type:yn,context:0,implicit:!0})],Cr.prototype,"v2Form",void 0),Cr=c([C({type:k.Choice})],Cr);class gn{constructor(e={}){this.notBeforeTime=new Date,this.notAfterTime=new Date,Object.assign(this,e)}}c([u({type:g.GeneralizedTime})],gn.prototype,"notBeforeTime",void 0),c([u({type:g.GeneralizedTime})],gn.prototype,"notAfterTime",void 0);class ni{constructor(e={}){Object.assign(this,e)}}c([u({type:ir,implicit:!0,context:0,optional:!0})],ni.prototype,"baseCertificateID",void 0),c([u({type:Ne,implicit:!0,context:1,optional:!0})],ni.prototype,"entityName",void 0),c([u({type:nr,implicit:!0,context:2,optional:!0})],ni.prototype,"objectDigestInfo",void 0);var ys;(function(t){t[t.v2=1]="v2"})(ys||(ys={}));class it{constructor(e={}){this.version=ys.v2,this.holder=new ni,this.issuer=new Cr,this.signature=new _,this.serialNumber=new ArrayBuffer(0),this.attrCertValidityPeriod=new gn,this.attributes=[],Object.assign(this,e)}}c([u({type:g.Integer})],it.prototype,"version",void 0),c([u({type:ni})],it.prototype,"holder",void 0),c([u({type:Cr})],it.prototype,"issuer",void 0),c([u({type:_})],it.prototype,"signature",void 0),c([u({type:g.Integer,converter:le})],it.prototype,"serialNumber",void 0),c([u({type:gn})],it.prototype,"attrCertValidityPeriod",void 0),c([u({type:It,repeated:"sequence"})],it.prototype,"attributes",void 0),c([u({type:g.BitString,optional:!0})],it.prototype,"issuerUniqueID",void 0),c([u({type:rr,optional:!0})],it.prototype,"extensions",void 0);class mn{constructor(e={}){this.acinfo=new it,this.signatureAlgorithm=new _,this.signatureValue=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:it})],mn.prototype,"acinfo",void 0),c([u({type:_})],mn.prototype,"signatureAlgorithm",void 0),c([u({type:g.BitString})],mn.prototype,"signatureValue",void 0);var vn;(function(t){t[t.unmarked=1]="unmarked",t[t.unclassified=2]="unclassified",t[t.restricted=4]="restricted",t[t.confidential=8]="confidential",t[t.secret=16]="secret",t[t.topSecret=32]="topSecret"})(vn||(vn={}));class gs extends Yi{}class ms{constructor(e={}){this.type="",this.value=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:g.ObjectIdentifier,implicit:!0,context:0})],ms.prototype,"type",void 0),c([u({type:g.Any,implicit:!0,context:1})],ms.prototype,"value",void 0);class vs{constructor(e={}){this.policyId="",this.classList=new gs(vn.unclassified),Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],vs.prototype,"policyId",void 0),c([u({type:gs,defaultValue:new gs(vn.unclassified)})],vs.prototype,"classList",void 0),c([u({type:ms,repeated:"set"})],vs.prototype,"securityCategories",void 0);class bn{constructor(e={}){Object.assign(this,e)}}c([u({type:ee})],bn.prototype,"cotets",void 0),c([u({type:g.ObjectIdentifier})],bn.prototype,"oid",void 0),c([u({type:g.Utf8String})],bn.prototype,"string",void 0);class Hl{constructor(e={}){this.values=[],Object.assign(this,e)}}c([u({type:Ne,implicit:!0,context:0,optional:!0})],Hl.prototype,"policyAuthority",void 0),c([u({type:bn,repeated:"sequence"})],Hl.prototype,"values",void 0);var bs;class wn{constructor(e={}){this.targetCertificate=new ir,Object.assign(this,e)}}c([u({type:ir})],wn.prototype,"targetCertificate",void 0),c([u({type:K,optional:!0})],wn.prototype,"targetName",void 0),c([u({type:nr,optional:!0})],wn.prototype,"certDigestInfo",void 0);let Ir=class{constructor(t={}){Object.assign(this,t)}};c([u({type:K,context:0,implicit:!0})],Ir.prototype,"targetName",void 0),c([u({type:K,context:1,implicit:!0})],Ir.prototype,"targetGroup",void 0),c([u({type:wn,context:2,implicit:!0})],Ir.prototype,"targetCert",void 0),Ir=c([C({type:k.Choice})],Ir);let ws=bs=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,bs.prototype)}};ws=bs=c([C({type:k.Sequence,itemType:Ir})],ws);var Ss;let Rl=Ss=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,Ss.prototype)}};Rl=Ss=c([C({type:k.Sequence,itemType:ws})],Rl);class _l{constructor(e={}){Object.assign(this,e)}}c([u({type:Ne,implicit:!0,context:0,optional:!0})],_l.prototype,"roleAuthority",void 0),c([u({type:K,implicit:!0,context:1})],_l.prototype,"roleName",void 0);class As{constructor(e={}){this.service=new K,this.ident=new K,Object.assign(this,e)}}c([u({type:K})],As.prototype,"service",void 0),c([u({type:K})],As.prototype,"ident",void 0),c([u({type:ee,optional:!0})],As.prototype,"authInfo",void 0);var Es;class Bs{constructor(e={}){this.otherCertFormat="",this.otherCert=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],Bs.prototype,"otherCertFormat",void 0),c([u({type:g.Any})],Bs.prototype,"otherCert",void 0);let Tr=class{constructor(t={}){Object.assign(this,t)}};c([u({type:kr})],Tr.prototype,"certificate",void 0),c([u({type:mn,context:2,implicit:!0})],Tr.prototype,"v2AttrCert",void 0),c([u({type:Bs,context:3,implicit:!0})],Tr.prototype,"other",void 0),Tr=c([C({type:k.Choice})],Tr);let Sn=Es=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,Es.prototype)}};Sn=Es=c([C({type:k.Set,itemType:Tr})],Sn);class Nr{constructor(e={}){this.contentType="",this.content=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],Nr.prototype,"contentType",void 0),c([u({type:g.Any,context:0})],Nr.prototype,"content",void 0);let oi=class{constructor(t={}){Object.assign(this,t)}};c([u({type:ee})],oi.prototype,"single",void 0),c([u({type:g.Any})],oi.prototype,"any",void 0),oi=c([C({type:k.Choice})],oi);class An{constructor(e={}){this.eContentType="",Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],An.prototype,"eContentType",void 0),c([u({type:oi,context:0,optional:!0})],An.prototype,"eContent",void 0);var Ot;(function(t){t[t.v0=0]="v0",t[t.v1=1]="v1",t[t.v2=2]="v2",t[t.v3=3]="v3",t[t.v4=4]="v4",t[t.v5=5]="v5"})(Ot||(Ot={}));let si=class extends _{};si=c([C({type:k.Sequence})],si);let En=class extends _{};En=c([C({type:k.Sequence})],En);let ut=class extends _{};ut=c([C({type:k.Sequence})],ut);let Bn=class extends _{};Bn=c([C({type:k.Sequence})],Bn);let jl=class extends _{};jl=c([C({type:k.Sequence})],jl);let ks=class extends _{};ks=c([C({type:k.Sequence})],ks);let ai=class{constructor(t={}){Object.assign(this,t)}};c([u({type:ee,context:0,implicit:!0,optional:!0})],ai.prototype,"value",void 0),c([u({type:ee,converter:xf,context:0,implicit:!0,optional:!0,repeated:"sequence"})],ai.prototype,"constructedValue",void 0),ai=c([C({type:k.Choice})],ai);class ci{constructor(e={}){this.contentType="",this.contentEncryptionAlgorithm=new Bn,Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],ci.prototype,"contentType",void 0),c([u({type:Bn})],ci.prototype,"contentEncryptionAlgorithm",void 0),c([u({type:ai,optional:!0})],ci.prototype,"encryptedContent",void 0);class Or{constructor(e={}){this.issuer=new we,this.serialNumber=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:we})],Or.prototype,"issuer",void 0),c([u({type:g.Integer,converter:le})],Or.prototype,"serialNumber",void 0);class kn{constructor(e={}){this.keyAttrId="",Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],kn.prototype,"keyAttrId",void 0),c([u({type:g.Any,optional:!0})],kn.prototype,"keyAttr",void 0);var xs;class xn{constructor(e={}){this.subjectKeyIdentifier=new Ut,Object.assign(this,e)}}c([u({type:Ut})],xn.prototype,"subjectKeyIdentifier",void 0),c([u({type:g.GeneralizedTime,optional:!0})],xn.prototype,"date",void 0),c([u({type:kn,optional:!0})],xn.prototype,"other",void 0);let Pr=class{constructor(t={}){Object.assign(this,t)}};c([u({type:xn,context:0,implicit:!0,optional:!0})],Pr.prototype,"rKeyId",void 0),c([u({type:Or,optional:!0})],Pr.prototype,"issuerAndSerialNumber",void 0),Pr=c([C({type:k.Choice})],Pr);class Cs{constructor(e={}){this.rid=new Pr,this.encryptedKey=new ee,Object.assign(this,e)}}c([u({type:Pr})],Cs.prototype,"rid",void 0),c([u({type:ee})],Cs.prototype,"encryptedKey",void 0);let Cn=xs=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,xs.prototype)}};Cn=xs=c([C({type:k.Sequence,itemType:Cs})],Cn);class Is{constructor(e={}){this.algorithm=new _,this.publicKey=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:_})],Is.prototype,"algorithm",void 0),c([u({type:g.BitString})],Is.prototype,"publicKey",void 0);let or=class{constructor(t={}){Object.assign(this,t)}};c([u({type:Ut,context:0,implicit:!0,optional:!0})],or.prototype,"subjectKeyIdentifier",void 0),c([u({type:Is,context:1,implicit:!0,optional:!0})],or.prototype,"originatorKey",void 0),c([u({type:Or,optional:!0})],or.prototype,"issuerAndSerialNumber",void 0),or=c([C({type:k.Choice})],or);class Hr{constructor(e={}){this.version=Ot.v3,this.originator=new or,this.keyEncryptionAlgorithm=new ut,this.recipientEncryptedKeys=new Cn,Object.assign(this,e)}}c([u({type:g.Integer})],Hr.prototype,"version",void 0),c([u({type:or,context:0})],Hr.prototype,"originator",void 0),c([u({type:ee,context:1,optional:!0})],Hr.prototype,"ukm",void 0),c([u({type:ut})],Hr.prototype,"keyEncryptionAlgorithm",void 0),c([u({type:Cn})],Hr.prototype,"recipientEncryptedKeys",void 0);let Rr=class{constructor(t={}){Object.assign(this,t)}};c([u({type:Ut,context:0,implicit:!0})],Rr.prototype,"subjectKeyIdentifier",void 0),c([u({type:Or})],Rr.prototype,"issuerAndSerialNumber",void 0),Rr=c([C({type:k.Choice})],Rr);class li{constructor(e={}){this.version=Ot.v0,this.rid=new Rr,this.keyEncryptionAlgorithm=new ut,this.encryptedKey=new ee,Object.assign(this,e)}}c([u({type:g.Integer})],li.prototype,"version",void 0),c([u({type:Rr})],li.prototype,"rid",void 0),c([u({type:ut})],li.prototype,"keyEncryptionAlgorithm",void 0),c([u({type:ee})],li.prototype,"encryptedKey",void 0);class ui{constructor(e={}){this.keyIdentifier=new ee,Object.assign(this,e)}}c([u({type:ee})],ui.prototype,"keyIdentifier",void 0),c([u({type:g.GeneralizedTime,optional:!0})],ui.prototype,"date",void 0),c([u({type:kn,optional:!0})],ui.prototype,"other",void 0);class hi{constructor(e={}){this.version=Ot.v4,this.kekid=new ui,this.keyEncryptionAlgorithm=new ut,this.encryptedKey=new ee,Object.assign(this,e)}}c([u({type:g.Integer})],hi.prototype,"version",void 0),c([u({type:ui})],hi.prototype,"kekid",void 0),c([u({type:ut})],hi.prototype,"keyEncryptionAlgorithm",void 0),c([u({type:ee})],hi.prototype,"encryptedKey",void 0);class pi{constructor(e={}){this.version=Ot.v0,this.keyEncryptionAlgorithm=new ut,this.encryptedKey=new ee,Object.assign(this,e)}}c([u({type:g.Integer})],pi.prototype,"version",void 0),c([u({type:ks,context:0,optional:!0})],pi.prototype,"keyDerivationAlgorithm",void 0),c([u({type:ut})],pi.prototype,"keyEncryptionAlgorithm",void 0),c([u({type:ee})],pi.prototype,"encryptedKey",void 0);class Ts{constructor(e={}){this.oriType="",this.oriValue=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],Ts.prototype,"oriType",void 0),c([u({type:g.Any})],Ts.prototype,"oriValue",void 0);let Dt=class{constructor(t={}){Object.assign(this,t)}};c([u({type:li,optional:!0})],Dt.prototype,"ktri",void 0),c([u({type:Hr,context:1,implicit:!0,optional:!0})],Dt.prototype,"kari",void 0),c([u({type:hi,context:2,implicit:!0,optional:!0})],Dt.prototype,"kekri",void 0),c([u({type:pi,context:3,implicit:!0,optional:!0})],Dt.prototype,"pwri",void 0),c([u({type:Ts,context:4,implicit:!0,optional:!0})],Dt.prototype,"ori",void 0),Dt=c([C({type:k.Choice})],Dt);var Ns;let In=Ns=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,Ns.prototype)}};In=Ns=c([C({type:k.Set,itemType:Dt})],In);var Os;class Tn{constructor(e={}){this.otherRevInfoFormat="",this.otherRevInfo=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],Tn.prototype,"otherRevInfoFormat",void 0),c([u({type:g.Any})],Tn.prototype,"otherRevInfo",void 0);let fi=class{constructor(t={}){this.other=new Tn,Object.assign(this,t)}};c([u({type:Tn,context:1,implicit:!0})],fi.prototype,"other",void 0),fi=c([C({type:k.Choice})],fi);let Ps=Os=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,Os.prototype)}};Ps=Os=c([C({type:k.Set,itemType:fi})],Ps);class Hs{constructor(e={}){Object.assign(this,e)}}c([u({type:Sn,context:0,implicit:!0,optional:!0})],Hs.prototype,"certs",void 0),c([u({type:Ps,context:1,implicit:!0,optional:!0})],Hs.prototype,"crls",void 0);var Rs;let _s=Rs=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,Rs.prototype)}};_s=Rs=c([C({type:k.Set,itemType:xr})],_s);class di{constructor(e={}){this.version=Ot.v0,this.recipientInfos=new In,this.encryptedContentInfo=new ci,Object.assign(this,e)}}c([u({type:g.Integer})],di.prototype,"version",void 0),c([u({type:Hs,context:0,implicit:!0,optional:!0})],di.prototype,"originatorInfo",void 0),c([u({type:In})],di.prototype,"recipientInfos",void 0),c([u({type:ci})],di.prototype,"encryptedContentInfo",void 0),c([u({type:_s,context:1,implicit:!0,optional:!0})],di.prototype,"unprotectedAttrs",void 0);const Qf="1.2.840.113549.1.7.2";let _r=class{constructor(t={}){Object.assign(this,t)}};c([u({type:Ut,context:0,implicit:!0})],_r.prototype,"subjectKeyIdentifier",void 0),c([u({type:Or})],_r.prototype,"issuerAndSerialNumber",void 0),_r=c([C({type:k.Choice})],_r);var js;class Pt{constructor(e={}){this.version=Ot.v0,this.sid=new _r,this.digestAlgorithm=new si,this.signatureAlgorithm=new En,this.signature=new ee,Object.assign(this,e)}}c([u({type:g.Integer})],Pt.prototype,"version",void 0),c([u({type:_r})],Pt.prototype,"sid",void 0),c([u({type:si})],Pt.prototype,"digestAlgorithm",void 0),c([u({type:xr,repeated:"set",context:0,implicit:!0,optional:!0})],Pt.prototype,"signedAttrs",void 0),c([u({type:En})],Pt.prototype,"signatureAlgorithm",void 0),c([u({type:ee})],Pt.prototype,"signature",void 0),c([u({type:xr,repeated:"set",context:1,implicit:!0,optional:!0})],Pt.prototype,"unsignedAttrs",void 0);let Nn=js=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,js.prototype)}};Nn=js=c([C({type:k.Set,itemType:Pt})],Nn);var Ls;let On=Ls=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,Ls.prototype)}};On=Ls=c([C({type:k.Set,itemType:si})],On);class jr{constructor(e={}){this.version=Ot.v0,this.digestAlgorithms=new On,this.encapContentInfo=new An,this.signerInfos=new Nn,Object.assign(this,e)}}c([u({type:g.Integer})],jr.prototype,"version",void 0),c([u({type:On})],jr.prototype,"digestAlgorithms",void 0),c([u({type:An})],jr.prototype,"encapContentInfo",void 0),c([u({type:Sn,context:0,implicit:!0,optional:!0})],jr.prototype,"certificates",void 0),c([u({type:fi,context:1,implicit:!0,optional:!0})],jr.prototype,"crls",void 0),c([u({type:Nn})],jr.prototype,"signerInfos",void 0);const yi="1.2.840.10045.2.1",Us="1.2.840.10045.4.1",Ll="1.2.840.10045.4.3.1",Ds="1.2.840.10045.4.3.2",Ms="1.2.840.10045.4.3.3",Vs="1.2.840.10045.4.3.4",Ul="1.2.840.10045.3.1.7",Dl="1.3.132.0.34",Ml="1.3.132.0.35";function gi(t){return new _({algorithm:t})}const ed=gi(Us);gi(Ll);const td=gi(Ds),rd=gi(Ms),id=gi(Vs);let Lr=class{constructor(t={}){Object.assign(this,t)}};c([u({type:g.ObjectIdentifier})],Lr.prototype,"namedCurve",void 0),Lr=c([C({type:k.Choice})],Lr);class Pn{constructor(e={}){this.version=1,this.privateKey=new ee,Object.assign(this,e)}}c([u({type:g.Integer})],Pn.prototype,"version",void 0),c([u({type:ee})],Pn.prototype,"privateKey",void 0),c([u({type:Lr,context:0,optional:!0})],Pn.prototype,"parameters",void 0),c([u({type:g.BitString,context:1,optional:!0})],Pn.prototype,"publicKey",void 0);class Hn{constructor(e={}){this.r=new ArrayBuffer(0),this.s=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:g.Integer,converter:le})],Hn.prototype,"r",void 0),c([u({type:g.Integer,converter:le})],Hn.prototype,"s",void 0);const Re="1.2.840.113549.1.1",Ur=`${Re}.1`,nd=`${Re}.7`,od=`${Re}.9`,sd=`${Re}.10`,ad=`${Re}.2`,cd=`${Re}.4`,Rn=`${Re}.5`,ld=`${Re}.14`,Fs=`${Re}.11`,_n=`${Re}.12`,jn=`${Re}.13`,Vl=`${Re}.15`,Fl=`${Re}.16`,$l="1.3.14.3.2.26",Gl="2.16.840.1.101.3.4.2.4",Kl="2.16.840.1.101.3.4.2.1",ql="2.16.840.1.101.3.4.2.2",zl="2.16.840.1.101.3.4.2.3",ud="2.16.840.1.101.3.4.2.5",hd="2.16.840.1.101.3.4.2.6",pd="1.2.840.113549.2.2",fd="1.2.840.113549.2.5",$s=`${Re}.8`;function Se(t){return new _({algorithm:t,parameters:null})}Se(pd),Se(fd);const sr=Se($l);Se(Gl),Se(Kl),Se(ql),Se(zl),Se(ud),Se(hd);const Wl=new _({algorithm:$s,parameters:j.serialize(sr)}),Jl=new _({algorithm:od,parameters:j.serialize(Qi.toASN(new Uint8Array([218,57,163,238,94,107,75,13,50,85,191,239,149,96,24,144,175,216,7,9]).buffer))});Se(Ur),Se(ad),Se(cd),Se(Rn),Se(Vl),Se(Fl),Se(_n),Se(jn),Se(Vl),Se(Fl);class Ln{constructor(e={}){this.hashAlgorithm=new _(sr),this.maskGenAlgorithm=new _({algorithm:$s,parameters:j.serialize(sr)}),this.pSourceAlgorithm=new _(Jl),Object.assign(this,e)}}c([u({type:_,context:0,defaultValue:sr})],Ln.prototype,"hashAlgorithm",void 0),c([u({type:_,context:1,defaultValue:Wl})],Ln.prototype,"maskGenAlgorithm",void 0),c([u({type:_,context:2,defaultValue:Jl})],Ln.prototype,"pSourceAlgorithm",void 0),new _({algorithm:nd,parameters:j.serialize(new Ln)});class mi{constructor(e={}){this.hashAlgorithm=new _(sr),this.maskGenAlgorithm=new _({algorithm:$s,parameters:j.serialize(sr)}),this.saltLength=20,this.trailerField=1,Object.assign(this,e)}}c([u({type:_,context:0,defaultValue:sr})],mi.prototype,"hashAlgorithm",void 0),c([u({type:_,context:1,defaultValue:Wl})],mi.prototype,"maskGenAlgorithm",void 0),c([u({type:g.Integer,context:2,defaultValue:20})],mi.prototype,"saltLength",void 0),c([u({type:g.Integer,context:3,defaultValue:1})],mi.prototype,"trailerField",void 0),new _({algorithm:sd,parameters:j.serialize(new mi)});class Un{constructor(e={}){this.digestAlgorithm=new _,this.digest=new ee,Object.assign(this,e)}}c([u({type:_})],Un.prototype,"digestAlgorithm",void 0),c([u({type:ee})],Un.prototype,"digest",void 0);var Gs;class Dn{constructor(e={}){this.prime=new ArrayBuffer(0),this.exponent=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:g.Integer,converter:le})],Dn.prototype,"prime",void 0),c([u({type:g.Integer,converter:le})],Dn.prototype,"exponent",void 0),c([u({type:g.Integer,converter:le})],Dn.prototype,"coefficient",void 0);let Ks=Gs=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,Gs.prototype)}};Ks=Gs=c([C({type:k.Sequence,itemType:Dn})],Ks);class ht{constructor(e={}){this.version=0,this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),this.privateExponent=new ArrayBuffer(0),this.prime1=new ArrayBuffer(0),this.prime2=new ArrayBuffer(0),this.exponent1=new ArrayBuffer(0),this.exponent2=new ArrayBuffer(0),this.coefficient=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:g.Integer})],ht.prototype,"version",void 0),c([u({type:g.Integer,converter:le})],ht.prototype,"modulus",void 0),c([u({type:g.Integer,converter:le})],ht.prototype,"publicExponent",void 0),c([u({type:g.Integer,converter:le})],ht.prototype,"privateExponent",void 0),c([u({type:g.Integer,converter:le})],ht.prototype,"prime1",void 0),c([u({type:g.Integer,converter:le})],ht.prototype,"prime2",void 0),c([u({type:g.Integer,converter:le})],ht.prototype,"exponent1",void 0),c([u({type:g.Integer,converter:le})],ht.prototype,"exponent2",void 0),c([u({type:g.Integer,converter:le})],ht.prototype,"coefficient",void 0),c([u({type:Ks,optional:!0})],ht.prototype,"otherPrimeInfos",void 0);class qs{constructor(e={}){this.modulus=new ArrayBuffer(0),this.publicExponent=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:g.Integer,converter:le})],qs.prototype,"modulus",void 0),c([u({type:g.Integer,converter:le})],qs.prototype,"publicExponent",void 0);var zs;(function(t){t[t.Transient=0]="Transient",t[t.Singleton=1]="Singleton",t[t.ResolutionScoped=2]="ResolutionScoped",t[t.ContainerScoped=3]="ContainerScoped"})(zs||(zs={}));const _e=zs;var Ws=function(t,e){return Ws=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)i.hasOwnProperty(n)&&(r[n]=i[n])},Ws(t,e)};function Js(t,e){Ws(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}function dd(t,e,r,i){function n(o){return o instanceof r?o:new r(function(s){s(o)})}return new(r||(r=Promise))(function(o,s){function a(p){try{h(i.next(p))}catch(y){s(y)}}function l(p){try{h(i.throw(p))}catch(y){s(y)}}function h(p){p.done?o(p.value):n(p.value).then(a,l)}h((i=i.apply(t,e||[])).next())})}function yd(t,e){var r={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},i,n,o,s;return s={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function a(h){return function(p){return l([h,p])}}function l(h){if(i)throw new TypeError("Generator is already executing.");for(;r;)try{if(i=1,n&&(o=h[0]&2?n.return:h[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,h[1])).done)return o;switch(n=0,o&&(h=[h[0]&2,o.value]),h[0]){case 0:case 1:o=h;break;case 4:return r.label++,{value:h[1],done:!1};case 5:r.label++,n=h[1],h=[0];continue;case 7:h=r.ops.pop(),r.trys.pop();continue;default:if(o=r.trys,!(o=o.length>0&&o[o.length-1])&&(h[0]===6||h[0]===2)){r=0;continue}if(h[0]===3&&(!o||h[1]>o[0]&&h[1]<o[3])){r.label=h[1];break}if(h[0]===6&&r.label<o[1]){r.label=o[1],o=h;break}if(o&&r.label<o[2]){r.label=o[2],r.ops.push(h);break}o[2]&&r.ops.pop(),r.trys.pop();continue}h=e.call(t,r)}catch(p){h=[6,p],n=0}finally{i=o=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}}function Mn(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],i=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vn(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var i=r.call(t),n,o=[],s;try{for(;(e===void 0||e-- >0)&&!(n=i.next()).done;)o.push(n.value)}catch(a){s={error:a}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(s)throw s.error}}return o}function ar(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Vn(arguments[e]));return t}var gd="injectionTokens";function md(t){var e=Reflect.getMetadata("design:paramtypes",t)||[],r=Reflect.getOwnMetadata(gd,t)||{};return Object.keys(r).forEach(function(i){e[+i]=r[i]}),e}function Xl(t){return!!t.useClass}function Xs(t){return!!t.useFactory}var Zl=function(){function t(e){this.wrap=e,this.reflectMethods=["get","getPrototypeOf","setPrototypeOf","getOwnPropertyDescriptor","defineProperty","has","set","deleteProperty","apply","construct","ownKeys"]}return t.prototype.createProxy=function(e){var r=this,i={},n=!1,o,s=function(){return n||(o=e(r.wrap()),n=!0),o};return new Proxy(i,this.createHandler(s))},t.prototype.createHandler=function(e){var r={},i=function(n){r[n]=function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];o[0]=e();var a=Reflect[n];return a.apply(void 0,ar(o))}};return this.reflectMethods.forEach(i),r},t}();function Dr(t){return typeof t=="string"||typeof t=="symbol"}function vd(t){return typeof t=="object"&&"token"in t&&"multiple"in t}function Yl(t){return typeof t=="object"&&"token"in t&&"transform"in t}function bd(t){return typeof t=="function"||t instanceof Zl}function Fn(t){return!!t.useToken}function $n(t){return t.useValue!=null}function wd(t){return Xl(t)||$n(t)||Fn(t)||Xs(t)}var Zs=function(){function t(){this._registryMap=new Map}return t.prototype.entries=function(){return this._registryMap.entries()},t.prototype.getAll=function(e){return this.ensure(e),this._registryMap.get(e)},t.prototype.get=function(e){this.ensure(e);var r=this._registryMap.get(e);return r[r.length-1]||null},t.prototype.set=function(e,r){this.ensure(e),this._registryMap.get(e).push(r)},t.prototype.setAll=function(e,r){this._registryMap.set(e,r)},t.prototype.has=function(e){return this.ensure(e),this._registryMap.get(e).length>0},t.prototype.clear=function(){this._registryMap.clear()},t.prototype.ensure=function(e){this._registryMap.has(e)||this._registryMap.set(e,[])},t}(),Sd=function(t){Js(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Zs),Ql=function(){function t(){this.scopedResolutions=new Map}return t}();function Ad(t,e){if(t===null)return"at position #"+e;var r=t.split(",")[e].trim();return'"'+r+'" at position #'+e}function Ed(t,e,r){return r===void 0&&(r="    "),ar([t],e.message.split(`
`).map(function(i){return r+i})).join(`
`)}function Bd(t,e,r){var i=Vn(t.toString().match(/constructor\(([\w, ]+)\)/)||[],2),n=i[1],o=n===void 0?null:n,s=Ad(o,e);return Ed("Cannot inject the dependency "+s+' of "'+t.name+'" constructor. Reason:',r)}function kd(t){if(typeof t.dispose!="function")return!1;var e=t.dispose;return!(e.length>0)}var xd=function(t){Js(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Zs),Cd=function(t){Js(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Zs),Id=function(){function t(){this.preResolution=new xd,this.postResolution=new Cd}return t}(),eu=new Map,Td=function(){function t(e){this.parent=e,this._registry=new Sd,this.interceptors=new Id,this.disposed=!1,this.disposables=new Set}return t.prototype.register=function(e,r,i){i===void 0&&(i={lifecycle:_e.Transient}),this.ensureNotDisposed();var n;if(wd(r)?n=r:n={useClass:r},Fn(n))for(var o=[e],s=n;s!=null;){var a=s.useToken;if(o.includes(a))throw new Error("Token registration cycle detected! "+ar(o,[a]).join(" -> "));o.push(a);var l=this._registry.get(a);l&&Fn(l.provider)?s=l.provider:s=null}if((i.lifecycle===_e.Singleton||i.lifecycle==_e.ContainerScoped||i.lifecycle==_e.ResolutionScoped)&&($n(n)||Xs(n)))throw new Error('Cannot use lifecycle "'+_e[i.lifecycle]+'" with ValueProviders or FactoryProviders');return this._registry.set(e,{provider:n,options:i}),this},t.prototype.registerType=function(e,r){return this.ensureNotDisposed(),Dr(r)?this.register(e,{useToken:r}):this.register(e,{useClass:r})},t.prototype.registerInstance=function(e,r){return this.ensureNotDisposed(),this.register(e,{useValue:r})},t.prototype.registerSingleton=function(e,r){if(this.ensureNotDisposed(),Dr(e)){if(Dr(r))return this.register(e,{useToken:r},{lifecycle:_e.Singleton});if(r)return this.register(e,{useClass:r},{lifecycle:_e.Singleton});throw new Error('Cannot register a type name as a singleton without a "to" token')}var i=e;return r&&!Dr(r)&&(i=r),this.register(e,{useClass:i},{lifecycle:_e.Singleton})},t.prototype.resolve=function(e,r){r===void 0&&(r=new Ql),this.ensureNotDisposed();var i=this.getRegistration(e);if(!i&&Dr(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"Single"),i){var n=this.resolveRegistration(i,r);return this.executePostResolutionInterceptor(e,n,"Single"),n}if(bd(e)){var n=this.construct(e,r);return this.executePostResolutionInterceptor(e,n,"Single"),n}throw new Error("Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.")},t.prototype.executePreResolutionInterceptor=function(e,r){var i,n;if(this.interceptors.preResolution.has(e)){var o=[];try{for(var s=Mn(this.interceptors.preResolution.getAll(e)),a=s.next();!a.done;a=s.next()){var l=a.value;l.options.frequency!="Once"&&o.push(l),l.callback(e,r)}}catch(h){i={error:h}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(i)throw i.error}}this.interceptors.preResolution.setAll(e,o)}},t.prototype.executePostResolutionInterceptor=function(e,r,i){var n,o;if(this.interceptors.postResolution.has(e)){var s=[];try{for(var a=Mn(this.interceptors.postResolution.getAll(e)),l=a.next();!l.done;l=a.next()){var h=l.value;h.options.frequency!="Once"&&s.push(h),h.callback(e,r,i)}}catch(p){n={error:p}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}this.interceptors.postResolution.setAll(e,s)}},t.prototype.resolveRegistration=function(e,r){if(this.ensureNotDisposed(),e.options.lifecycle===_e.ResolutionScoped&&r.scopedResolutions.has(e))return r.scopedResolutions.get(e);var i=e.options.lifecycle===_e.Singleton,n=e.options.lifecycle===_e.ContainerScoped,o=i||n,s;return $n(e.provider)?s=e.provider.useValue:Fn(e.provider)?s=o?e.instance||(e.instance=this.resolve(e.provider.useToken,r)):this.resolve(e.provider.useToken,r):Xl(e.provider)?s=o?e.instance||(e.instance=this.construct(e.provider.useClass,r)):this.construct(e.provider.useClass,r):Xs(e.provider)?s=e.provider.useFactory(this):s=this.construct(e.provider,r),e.options.lifecycle===_e.ResolutionScoped&&r.scopedResolutions.set(e,s),s},t.prototype.resolveAll=function(e,r){var i=this;r===void 0&&(r=new Ql),this.ensureNotDisposed();var n=this.getAllRegistrations(e);if(!n&&Dr(e))throw new Error('Attempted to resolve unregistered dependency token: "'+e.toString()+'"');if(this.executePreResolutionInterceptor(e,"All"),n){var o=n.map(function(a){return i.resolveRegistration(a,r)});return this.executePostResolutionInterceptor(e,o,"All"),o}var s=[this.construct(e,r)];return this.executePostResolutionInterceptor(e,s,"All"),s},t.prototype.isRegistered=function(e,r){return r===void 0&&(r=!1),this.ensureNotDisposed(),this._registry.has(e)||r&&(this.parent||!1)&&this.parent.isRegistered(e,!0)},t.prototype.reset=function(){this.ensureNotDisposed(),this._registry.clear(),this.interceptors.preResolution.clear(),this.interceptors.postResolution.clear()},t.prototype.clearInstances=function(){var e,r;this.ensureNotDisposed();try{for(var i=Mn(this._registry.entries()),n=i.next();!n.done;n=i.next()){var o=Vn(n.value,2),s=o[0],a=o[1];this._registry.setAll(s,a.filter(function(l){return!$n(l.provider)}).map(function(l){return l.instance=void 0,l}))}}catch(l){e={error:l}}finally{try{n&&!n.done&&(r=i.return)&&r.call(i)}finally{if(e)throw e.error}}},t.prototype.createChildContainer=function(){var e,r;this.ensureNotDisposed();var i=new t(this);try{for(var n=Mn(this._registry.entries()),o=n.next();!o.done;o=n.next()){var s=Vn(o.value,2),a=s[0],l=s[1];l.some(function(h){var p=h.options;return p.lifecycle===_e.ContainerScoped})&&i._registry.setAll(a,l.map(function(h){return h.options.lifecycle===_e.ContainerScoped?{provider:h.provider,options:h.options}:h}))}}catch(h){e={error:h}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return i},t.prototype.beforeResolution=function(e,r,i){i===void 0&&(i={frequency:"Always"}),this.interceptors.preResolution.set(e,{callback:r,options:i})},t.prototype.afterResolution=function(e,r,i){i===void 0&&(i={frequency:"Always"}),this.interceptors.postResolution.set(e,{callback:r,options:i})},t.prototype.dispose=function(){return dd(this,void 0,void 0,function(){var e;return yd(this,function(r){switch(r.label){case 0:return this.disposed=!0,e=[],this.disposables.forEach(function(i){var n=i.dispose();n&&e.push(n)}),[4,Promise.all(e)];case 1:return r.sent(),[2]}})})},t.prototype.getRegistration=function(e){return this.isRegistered(e)?this._registry.get(e):this.parent?this.parent.getRegistration(e):null},t.prototype.getAllRegistrations=function(e){return this.isRegistered(e)?this._registry.getAll(e):this.parent?this.parent.getAllRegistrations(e):null},t.prototype.construct=function(e,r){var i=this;if(e instanceof Zl)return e.createProxy(function(o){return i.resolve(o,r)});var n=function(){var o=eu.get(e);if(!o||o.length===0){if(e.length===0)return new e;throw new Error('TypeInfo not known for "'+e.name+'"')}var s=o.map(i.resolveParams(r,e));return new(e.bind.apply(e,ar([void 0],s)))}();return kd(n)&&this.disposables.add(n),n},t.prototype.resolveParams=function(e,r){var i=this;return function(n,o){var s,a,l;try{return vd(n)?Yl(n)?n.multiple?(s=i.resolve(n.transform)).transform.apply(s,ar([i.resolveAll(n.token)],n.transformArgs)):(a=i.resolve(n.transform)).transform.apply(a,ar([i.resolve(n.token,e)],n.transformArgs)):n.multiple?i.resolveAll(n.token):i.resolve(n.token,e):Yl(n)?(l=i.resolve(n.transform,e)).transform.apply(l,ar([i.resolve(n.token,e)],n.transformArgs)):i.resolve(n,e)}catch(h){throw new Error(Bd(r,o,h))}}},t.prototype.ensureNotDisposed=function(){if(this.disposed)throw new Error("This container has been disposed, you cannot interact with a disposed container")},t}(),ze=new Td;function Ys(){return function(t){eu.set(t,md(t))}}if(typeof Reflect>"u"||!Reflect.getMetadata)throw new Error(`tsyringe requires a reflect polyfill. Please add 'import "reflect-metadata"' to the top of your entry point.`);var Qs;class Gn{constructor(e={}){this.attrId="",this.attrValues=[],Object.assign(e)}}c([u({type:g.ObjectIdentifier})],Gn.prototype,"attrId",void 0),c([u({type:g.Any,repeated:"set"})],Gn.prototype,"attrValues",void 0);let tu=Qs=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,Qs.prototype)}};tu=Qs=c([C({type:k.Sequence,itemType:Gn})],tu);var ea;let ru=ea=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,ea.prototype)}};ru=ea=c([C({type:k.Sequence,itemType:Nr})],ru);class iu{constructor(e={}){this.certId="",this.certValue=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],iu.prototype,"certId",void 0),c([u({type:g.Any,context:0})],iu.prototype,"certValue",void 0);class nu{constructor(e={}){this.crlId="",this.crltValue=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],nu.prototype,"crlId",void 0),c([u({type:g.Any,context:0})],nu.prototype,"crltValue",void 0);class ou extends ee{}let Kn=class{constructor(t={}){this.encryptionAlgorithm=new _,this.encryptedData=new ou,Object.assign(this,t)}};c([u({type:_})],Kn.prototype,"encryptionAlgorithm",void 0),c([u({type:ou})],Kn.prototype,"encryptedData",void 0);var ta,ra;(function(t){t[t.v1=0]="v1"})(ra||(ra={}));class su extends ee{}let ia=ta=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,ta.prototype)}};ia=ta=c([C({type:k.Sequence,itemType:It})],ia);class vi{constructor(e={}){this.version=ra.v1,this.privateKeyAlgorithm=new _,this.privateKey=new su,Object.assign(this,e)}}c([u({type:g.Integer})],vi.prototype,"version",void 0),c([u({type:_})],vi.prototype,"privateKeyAlgorithm",void 0),c([u({type:su})],vi.prototype,"privateKey",void 0),c([u({type:ia,implicit:!0,context:0,optional:!0})],vi.prototype,"attributes",void 0);let au=class extends vi{};au=c([C({type:k.Sequence})],au);let cu=class extends Kn{};cu=c([C({type:k.Sequence})],cu);class lu{constructor(e={}){this.secretTypeId="",this.secretValue=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],lu.prototype,"secretTypeId",void 0),c([u({type:g.Any,context:0})],lu.prototype,"secretValue",void 0);class bi{constructor(e={}){this.mac=new Un,this.macSalt=new ee,this.iterations=1,Object.assign(this,e)}}c([u({type:Un})],bi.prototype,"mac",void 0),c([u({type:ee})],bi.prototype,"macSalt",void 0),c([u({type:g.Integer,defaultValue:1})],bi.prototype,"iterations",void 0);class qn{constructor(e={}){this.version=3,this.authSafe=new Nr,this.macData=new bi,Object.assign(this,e)}}c([u({type:g.Integer})],qn.prototype,"version",void 0),c([u({type:Nr})],qn.prototype,"authSafe",void 0),c([u({type:bi,optional:!0})],qn.prototype,"macData",void 0);var na;class zn{constructor(e={}){this.bagId="",this.bagValue=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:g.ObjectIdentifier})],zn.prototype,"bagId",void 0),c([u({type:g.Any,context:0})],zn.prototype,"bagValue",void 0),c([u({type:Gn,repeated:"set",optional:!0})],zn.prototype,"bagAttributes",void 0);let uu=na=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,na.prototype)}};uu=na=c([C({type:k.Sequence,itemType:zn})],uu);var oa,sa,aa;const hu="1.2.840.113549.1.9",pu=`${hu}.7`,ca=`${hu}.14`;let Wn=class extends Be{constructor(t={}){super(t)}toString(){return this.ia5String||super.toString()}};c([u({type:g.IA5String})],Wn.prototype,"ia5String",void 0),Wn=c([C({type:k.Choice})],Wn);let fu=class extends Nr{};fu=c([C({type:k.Sequence})],fu);let du=class extends qn{};du=c([C({type:k.Sequence})],du);let yu=class extends Kn{};yu=c([C({type:k.Sequence})],yu);let la=class{constructor(t=""){this.value=t}toString(){return this.value}};c([u({type:g.IA5String})],la.prototype,"value",void 0),la=c([C({type:k.Choice})],la);let gu=class extends Wn{};gu=c([C({type:k.Choice})],gu);let mu=class extends Be{};mu=c([C({type:k.Choice})],mu);let ua=class{constructor(t=new Date){this.value=t}};c([u({type:g.GeneralizedTime})],ua.prototype,"value",void 0),ua=c([C({type:k.Choice})],ua);let vu=class extends Be{};vu=c([C({type:k.Choice})],vu);let ha=class{constructor(t="M"){this.value=t}toString(){return this.value}};c([u({type:g.PrintableString})],ha.prototype,"value",void 0),ha=c([C({type:k.Choice})],ha);let Jn=class{constructor(t=""){this.value=t}toString(){return this.value}};c([u({type:g.PrintableString})],Jn.prototype,"value",void 0),Jn=c([C({type:k.Choice})],Jn);let bu=class extends Jn{};bu=c([C({type:k.Choice})],bu);let wu=class extends Be{};wu=c([C({type:k.Choice})],wu);let pa=class{constructor(t=""){this.value=t}toString(){return this.value}};c([u({type:g.ObjectIdentifier})],pa.prototype,"value",void 0),pa=c([C({type:k.Choice})],pa);let Su=class extends Ie{};Su=c([C({type:k.Choice})],Su);let fa=class{constructor(t=0){this.value=t}toString(){return this.value.toString()}};c([u({type:g.Integer})],fa.prototype,"value",void 0),fa=c([C({type:k.Choice})],fa);let Au=class extends Pt{};Au=c([C({type:k.Sequence})],Au);let Xn=class extends Be{};Xn=c([C({type:k.Choice})],Xn);let Eu=oa=class extends rr{constructor(t){super(t),Object.setPrototypeOf(this,oa.prototype)}};Eu=oa=c([C({type:k.Sequence})],Eu);let Bu=sa=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,sa.prototype)}};Bu=sa=c([C({type:k.Set,itemType:xr})],Bu);let da=class{constructor(t=""){this.value=t}toString(){return this.value}};c([u({type:g.BmpString})],da.prototype,"value",void 0),da=c([C({type:k.Choice})],da);let ya=class extends _{};ya=c([C({type:k.Sequence})],ya);let ku=aa=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,aa.prototype)}};ku=aa=c([C({type:k.Sequence,itemType:ya})],ku);var ga;let Zn=ga=class extends oe{constructor(t){super(t),Object.setPrototypeOf(this,ga.prototype)}};Zn=ga=c([C({type:k.Sequence,itemType:It})],Zn);class Mr{constructor(e={}){this.version=0,this.subject=new we,this.subjectPKInfo=new Tt,this.attributes=new Zn,Object.assign(this,e)}}c([u({type:g.Integer})],Mr.prototype,"version",void 0),c([u({type:we})],Mr.prototype,"subject",void 0),c([u({type:Tt})],Mr.prototype,"subjectPKInfo",void 0),c([u({type:Zn,implicit:!0,context:0})],Mr.prototype,"attributes",void 0);class wi{constructor(e={}){this.certificationRequestInfo=new Mr,this.signatureAlgorithm=new _,this.signature=new ArrayBuffer(0),Object.assign(this,e)}}c([u({type:Mr})],wi.prototype,"certificationRequestInfo",void 0),c([u({type:_})],wi.prototype,"signatureAlgorithm",void 0),c([u({type:g.BitString})],wi.prototype,"signature",void 0);const Yn="crypto.algorithm";class Nd{getAlgorithms(){return ze.resolveAll(Yn)}toAsnAlgorithm(e){({...e});for(const r of this.getAlgorithms()){const i=r.toAsnAlgorithm(e);if(i)return i}if(/[0-9.]+/.test(e.name)){const r=new _({algorithm:e.name});if("parameters"in e){const i=e;r.parameters=i.parameters}return r}throw new Error("Cannot convert WebCrypto algorithm to ASN.1 algorithm")}toWebAlgorithm(e){for(const r of this.getAlgorithms()){const i=r.toWebAlgorithm(e);if(i)return i}return{name:e.algorithm,parameters:e.parameters}}}const Qn="crypto.algorithmProvider";ze.registerSingleton(Qn,Nd);var eo;const je="1.3.36.3.3.2.8.1.1",xu=`${je}.1`,Cu=`${je}.2`,Iu=`${je}.3`,Tu=`${je}.4`,Nu=`${je}.5`,Ou=`${je}.6`,Pu=`${je}.7`,Hu=`${je}.8`,Ru=`${je}.9`,_u=`${je}.10`,ju=`${je}.11`,Lu=`${je}.12`,Uu=`${je}.13`,Du=`${je}.14`,Mu="brainpoolP160r1",Vu="brainpoolP160t1",Fu="brainpoolP192r1",$u="brainpoolP192t1",Gu="brainpoolP224r1",Ku="brainpoolP224t1",qu="brainpoolP256r1",zu="brainpoolP256t1",Wu="brainpoolP320r1",Ju="brainpoolP320t1",Xu="brainpoolP384r1",Zu="brainpoolP384t1",Yu="brainpoolP512r1",Qu="brainpoolP512t1",fe="ECDSA";let Si=eo=class{toAsnAlgorithm(t){switch(t.name.toLowerCase()){case fe.toLowerCase():if("hash"in t)switch((typeof t.hash=="string"?t.hash:t.hash.name).toLowerCase()){case"sha-1":return ed;case"sha-256":return td;case"sha-384":return rd;case"sha-512":return id}else if("namedCurve"in t){let e="";switch(t.namedCurve){case"P-256":e=Ul;break;case"K-256":e=eo.SECP256K1;break;case"P-384":e=Dl;break;case"P-521":e=Ml;break;case Mu:e=xu;break;case Vu:e=Cu;break;case Fu:e=Iu;break;case $u:e=Tu;break;case Gu:e=Nu;break;case Ku:e=Ou;break;case qu:e=Pu;break;case zu:e=Hu;break;case Wu:e=Ru;break;case Ju:e=_u;break;case Xu:e=ju;break;case Zu:e=Lu;break;case Yu:e=Uu;break;case Qu:e=Du;break}if(e)return new _({algorithm:yi,parameters:j.serialize(new Lr({namedCurve:e}))})}}return null}toWebAlgorithm(t){switch(t.algorithm){case Us:return{name:fe,hash:{name:"SHA-1"}};case Ds:return{name:fe,hash:{name:"SHA-256"}};case Ms:return{name:fe,hash:{name:"SHA-384"}};case Vs:return{name:fe,hash:{name:"SHA-512"}};case yi:{if(!t.parameters)throw new TypeError("Cannot get required parameters from EC algorithm");switch(j.parse(t.parameters,Lr).namedCurve){case Ul:return{name:fe,namedCurve:"P-256"};case eo.SECP256K1:return{name:fe,namedCurve:"K-256"};case Dl:return{name:fe,namedCurve:"P-384"};case Ml:return{name:fe,namedCurve:"P-521"};case xu:return{name:fe,namedCurve:Mu};case Cu:return{name:fe,namedCurve:Vu};case Iu:return{name:fe,namedCurve:Fu};case Tu:return{name:fe,namedCurve:$u};case Nu:return{name:fe,namedCurve:Gu};case Ou:return{name:fe,namedCurve:Ku};case Pu:return{name:fe,namedCurve:qu};case Hu:return{name:fe,namedCurve:zu};case Ru:return{name:fe,namedCurve:Wu};case _u:return{name:fe,namedCurve:Ju};case ju:return{name:fe,namedCurve:Xu};case Lu:return{name:fe,namedCurve:Zu};case Uu:return{name:fe,namedCurve:Yu};case Du:return{name:fe,namedCurve:Qu}}}}return null}};Si.SECP256K1="1.3.132.0.10",Si=eo=c([Ys()],Si),ze.registerSingleton(Yn,Si);const eh=Symbol("name"),th=Symbol("value");class se{constructor(e,r={},i=""){this[eh]=e,this[th]=i;for(const n in r)this[n]=r[n]}}se.NAME=eh,se.VALUE=th;class Od{static toTextObject(e){const r=new se("Algorithm Identifier",{},Mt.toString(e.algorithm));if(e.parameters)switch(e.algorithm){case yi:{const i=new Si().toWebAlgorithm(e);i&&"namedCurve"in i?r["Named Curve"]=i.namedCurve:r.Parameters=e.parameters;break}default:r.Parameters=e.parameters}return r}}class Mt{static toString(e){return this.items[e]||e}}Mt.items={[$l]:"sha1",[Gl]:"sha224",[Kl]:"sha256",[ql]:"sha384",[zl]:"sha512",[Ur]:"rsaEncryption",[Rn]:"sha1WithRSAEncryption",[ld]:"sha224WithRSAEncryption",[Fs]:"sha256WithRSAEncryption",[_n]:"sha384WithRSAEncryption",[jn]:"sha512WithRSAEncryption",[yi]:"ecPublicKey",[Us]:"ecdsaWithSHA1",[Ll]:"ecdsaWithSHA224",[Ds]:"ecdsaWithSHA256",[Ms]:"ecdsaWithSHA384",[Vs]:"ecdsaWithSHA512",[zf]:"TLS WWW server authentication",[Wf]:"TLS WWW client authentication",[Jf]:"Code Signing",[Xf]:"E-mail Protection",[Zf]:"Time Stamping",[Yf]:"OCSP Signing",[Qf]:"Signed Data"};class cr{static serialize(e){return this.serializeObj(e).join(`
`)}static pad(e=0){return"".padStart(2*e," ")}static serializeObj(e,r=0){const i=[];let n=this.pad(r++),o="";const s=e[se.VALUE];s&&(o=` ${s}`),i.push(`${n}${e[se.NAME]}:${o}`),n=this.pad(r);for(const a in e){if(typeof a=="symbol")continue;const l=e[a],h=a?`${a}: `:"";if(typeof l=="string"||typeof l=="number"||typeof l=="boolean")i.push(`${n}${h}${l}`);else if(l instanceof Date)i.push(`${n}${h}${l.toUTCString()}`);else if(Array.isArray(l))for(const p of l)p[se.NAME]=a,i.push(...this.serializeObj(p,r));else if(l instanceof se)l[se.NAME]=a,i.push(...this.serializeObj(l,r));else if(O.isBufferSource(l))a?(i.push(`${n}${h}`),i.push(...this.serializeBufferSource(l,r+1))):i.push(...this.serializeBufferSource(l,r));else if("toTextObject"in l){const p=l.toTextObject();p[se.NAME]=a,i.push(...this.serializeObj(p,r))}else throw new TypeError("Cannot serialize data in text format. Unsupported type.")}return i}static serializeBufferSource(e,r=0){const i=this.pad(r),n=O.toUint8Array(e),o=[];for(let s=0;s<n.length;){const a=[];for(let l=0;l<16&&s<n.length;l++){l===8&&a.push("");const h=n[s++].toString(16).padStart(2,"0");a.push(h)}o.push(`${i}${a.join(" ")}`)}return o}static serializeAlgorithm(e){return this.algorithmSerializer.toTextObject(e)}}cr.oidSerializer=Mt,cr.algorithmSerializer=Od;class Vt{constructor(...e){if(e.length===1){const r=e[0];this.rawData=j.serialize(r),this.onInit(r)}else{const r=j.parse(e[0],e[1]);this.rawData=O.toArrayBuffer(e[0]),this.onInit(r)}}equal(e){return e instanceof Vt?ac(e.rawData,this.rawData):!1}toString(e="text"){switch(e){case"asn":return j.toString(this.rawData);case"text":return cr.serialize(this.toTextObject());case"hex":return H.ToHex(this.rawData);case"base64":return H.ToBase64(this.rawData);case"base64url":return H.ToBase64Url(this.rawData);default:throw TypeError("Argument 'format' is unsupported value")}}getTextName(){return this.constructor.NAME}toTextObject(){const e=this.toTextObjectEmpty();return e[""]=this.rawData,e}toTextObjectEmpty(e){return new se(this.getTextName(),{},e)}}Vt.NAME="ASN";class pt extends Vt{constructor(...e){let r;O.isBufferSource(e[0])?r=O.toArrayBuffer(e[0]):r=j.serialize(new rt({extnID:e[0],critical:e[1],extnValue:new ee(O.toArrayBuffer(e[2]))})),super(r,rt)}onInit(e){this.type=e.extnID,this.critical=e.critical,this.value=e.extnValue.buffer}toTextObject(){const e=this.toTextObjectWithoutValue();return e[""]=this.value,e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty(this.critical?"critical":void 0);return e[se.NAME]===pt.NAME&&(e[se.NAME]=Mt.toString(this.type)),e}}var rh;class lr{static isCryptoKeyPair(e){return e&&e.privateKey&&e.publicKey}static isCryptoKey(e){return e&&e.usages&&e.type&&e.algorithm&&e.extractable!==void 0}constructor(){this.items=new Map,this[rh]="CryptoProvider",typeof self<"u"&&typeof crypto<"u"&&this.set(lr.DEFAULT,crypto)}clear(){this.items.clear()}delete(e){return this.items.delete(e)}forEach(e,r){return this.items.forEach(e,r)}has(e){return this.items.has(e)}get size(){return this.items.size}entries(){return this.items.entries()}keys(){return this.items.keys()}values(){return this.items.values()}[Symbol.iterator](){return this.items[Symbol.iterator]()}get(e=lr.DEFAULT){const r=this.items.get(e.toLowerCase());if(!r)throw new Error(`Cannot get Crypto by name '${e}'`);return r}set(e,r){if(typeof e=="string"){if(!r)throw new TypeError("Argument 'value' is required");this.items.set(e.toLowerCase(),r)}else this.items.set(lr.DEFAULT,e);return this}}rh=Symbol.toStringTag,lr.DEFAULT="default";const Ve=new lr,Pd=/^[0-2](?:\.[1-9][0-9]*)+$/;function Hd(t){return new RegExp(Pd).test(t)}class ih{constructor(e={}){this.items={};for(const r in e)this.register(r,e[r])}get(e){return this.items[e]||null}findId(e){return Hd(e)?e:this.get(e)}register(e,r){this.items[e]=r,this.items[r]=e}}const Le=new ih;Le.register("CN","2.5.4.3"),Le.register("L","2.5.4.7"),Le.register("ST","2.5.4.8"),Le.register("O","2.5.4.10"),Le.register("OU","2.5.4.11"),Le.register("C","2.5.4.6"),Le.register("DC","0.9.2342.19200300.100.1.25"),Le.register("E","1.2.840.113549.1.9.1"),Le.register("G","2.5.4.42"),Le.register("I","2.5.4.43"),Le.register("SN","2.5.4.4"),Le.register("T","2.5.4.12");function Rd(t,e){return`\\${H.ToHex(H.FromUtf8String(e)).toUpperCase()}`}function _d(t){return t.replace(/([,+"\\<>;])/g,"\\$1").replace(/^([ #])/,"\\$1").replace(/([ ]$)/,"\\$1").replace(/([\r\n\t])/,Rd)}class Ft{static isASCII(e){for(let r=0;r<e.length;r++)if(e.charCodeAt(r)>255)return!1;return!0}constructor(e,r={}){this.extraNames=new ih,this.asn=new we;for(const i in r)if(Object.prototype.hasOwnProperty.call(r,i)){const n=r[i];this.extraNames.register(i,n)}typeof e=="string"?this.asn=this.fromString(e):e instanceof we?this.asn=e:O.isBufferSource(e)?this.asn=j.parse(e,we):this.asn=this.fromJSON(e)}getField(e){const r=this.extraNames.findId(e)||Le.findId(e),i=[];for(const n of this.asn)for(const o of n)o.type===r&&i.push(o.value.toString());return i}getName(e){return this.extraNames.get(e)||Le.get(e)}toString(){return this.asn.map(e=>e.map(r=>{const i=this.getName(r.type)||r.type,n=r.value.anyValue?`#${H.ToHex(r.value.anyValue)}`:_d(r.value.toString());return`${i}=${n}`}).join("+")).join(", ")}toJSON(){var e;const r=[];for(const i of this.asn){const n={};for(const o of i){const s=this.getName(o.type)||o.type;(e=n[s])!==null&&e!==void 0||(n[s]=[]),n[s].push(o.value.anyValue?`#${H.ToHex(o.value.anyValue)}`:o.value.toString())}r.push(n)}return r}fromString(e){const r=new we,i=/(\d\.[\d.]*\d|[A-Za-z]+)=((?:"")|(?:".*?[^\\]")|(?:[^,+].*?(?:[^\\][,+]))|(?:))([,+])?/g;let n=null,o=",";for(;n=i.exec(`${e},`);){let[,s,a]=n;const l=a[a.length-1];(l===","||l==="+")&&(a=a.slice(0,a.length-1),n[3]=l);const h=n[3];if(/[\d.]+/.test(s)||(s=this.getName(s)||""),!s)throw new Error(`Cannot get OID for name type '${s}'`);const p=new Qr({type:s});if(a.charAt(0)==="#")p.value.anyValue=H.FromHex(a.slice(1));else{const y=/"(.*?[^\\])?"/.exec(a);y&&(a=y[1]),a=a.replace(/\\0a/ig,`
`).replace(/\\0d/ig,"\r").replace(/\\0g/ig,"	").replace(/\\(.)/g,"$1"),s===this.getName("E")||s===this.getName("DC")?p.value.ia5String=a:Ft.isASCII(a)?p.value.printableString=a:p.value.utf8String=a}o==="+"?r[r.length-1].push(p):r.push(new Sr([p])),o=h}return r}fromJSON(e){const r=new we;for(const i of e){const n=new Sr;for(const o in i){let s=o;if(/[\d.]+/.test(o)||(s=this.getName(o)||""),!s)throw new Error(`Cannot get OID for name type '${o}'`);const a=i[o];for(const l of a){const h=new Qr({type:s});if(typeof l=="object")for(const p in l)switch(p){case"ia5String":h.value.ia5String=l[p];break;case"utf8String":h.value.utf8String=l[p];break;case"universalString":h.value.universalString=l[p];break;case"bmpString":h.value.bmpString=l[p];break;case"printableString":h.value.printableString=l[p];break}else l[0]==="#"?h.value.anyValue=H.FromHex(l.slice(1)):s===this.getName("E")||s===this.getName("DC")?h.value.ia5String=l:h.value.printableString=l;n.push(h)}}r.push(n)}return r}toArrayBuffer(){return j.serialize(this.asn)}async getThumbprint(...e){var r;let i,n="SHA-1";return e.length>=1&&!(!((r=e[0])===null||r===void 0)&&r.subtle)?(n=e[0]||n,i=e[1]||Ve.get()):i=e[0]||Ve.get(),await i.subtle.digest(n,this.toArrayBuffer())}}const nh="Cannot initialize GeneralName from ASN.1 data.",oh=`${nh} Unsupported string format in use.`,jd=`${nh} Value doesn't match to GUID regular expression.`,sh=/^([0-9a-f]{8})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{4})-?([0-9a-f]{12})$/i,ah="1.3.6.1.4.1.311.25.1",ch="1.3.6.1.4.1.311.20.2.3",ma="dns",va="dn",ba="email",wa="ip",Sa="url",Aa="guid",Ea="upn",to="id";class lh extends Vt{constructor(...e){let r;if(e.length===2)switch(e[0]){case va:{const i=new Ft(e[1]).toArrayBuffer(),n=j.parse(i,we);r=new K({directoryName:n});break}case ma:r=new K({dNSName:e[1]});break;case ba:r=new K({rfc822Name:e[1]});break;case Aa:{const i=new RegExp(sh,"i").exec(e[1]);if(!i)throw new Error("Cannot parse GUID value. Value doesn't match to regular expression");const n=i.slice(1).map((o,s)=>s<3?H.ToHex(new Uint8Array(H.FromHex(o)).reverse()):o).join("");r=new K({otherName:new ei({typeId:ah,value:j.serialize(new ee(H.FromHex(n)))})});break}case wa:r=new K({iPAddress:e[1]});break;case to:r=new K({registeredID:e[1]});break;case Ea:{r=new K({otherName:new ei({typeId:ch,value:j.serialize(ll.toASN(e[1]))})});break}case Sa:r=new K({uniformResourceIdentifier:e[1]});break;default:throw new Error("Cannot create GeneralName. Unsupported type of the name")}else O.isBufferSource(e[0])?r=j.parse(e[0],K):r=e[0];super(r)}onInit(e){if(e.dNSName!=null)this.type=ma,this.value=e.dNSName;else if(e.rfc822Name!=null)this.type=ba,this.value=e.rfc822Name;else if(e.iPAddress!=null)this.type=wa,this.value=e.iPAddress;else if(e.uniformResourceIdentifier!=null)this.type=Sa,this.value=e.uniformResourceIdentifier;else if(e.registeredID!=null)this.type=to,this.value=e.registeredID;else if(e.directoryName!=null)this.type=va,this.value=new Ft(e.directoryName).toString();else if(e.otherName!=null)if(e.otherName.typeId===ah){this.type=Aa;const r=j.parse(e.otherName.value,ee),i=new RegExp(sh,"i").exec(H.ToHex(r));if(!i)throw new Error(jd);this.value=i.slice(1).map((n,o)=>o<3?H.ToHex(new Uint8Array(H.FromHex(n)).reverse()):n).join("-")}else if(e.otherName.typeId===ch)this.type=Ea,this.value=j.parse(e.otherName.value,Be).toString();else throw new Error(oh);else throw new Error(oh)}toJSON(){return{type:this.type,value:this.value}}toTextObject(){let e;switch(this.type){case va:case ma:case Aa:case wa:case to:case Ea:case Sa:e=this.type.toUpperCase();break;case ba:e="Email";break;default:throw new Error("Unsupported GeneralName type")}let r=this.value;return this.type===to&&(r=Mt.toString(r)),new se(e,void 0,r)}}class Ai extends Vt{constructor(e){let r;if(e instanceof Ne)r=e;else if(Array.isArray(e)){const i=[];for(const n of e)if(n instanceof K)i.push(n);else{const o=j.parse(new lh(n.type,n.value).rawData,K);i.push(o)}r=new Ne(i)}else if(O.isBufferSource(e))r=j.parse(e,Ne);else throw new Error("Cannot initialize GeneralNames. Incorrect incoming arguments");super(r)}onInit(e){const r=[];for(const i of e){let n=null;try{n=new lh(i)}catch{continue}r.push(n)}this.items=r}toJSON(){return this.items.map(e=>e.toJSON())}toTextObject(){const e=super.toTextObjectEmpty();for(const r of this.items){const i=r.toTextObject();let n=e[i[se.NAME]];Array.isArray(n)||(n=[],e[i[se.NAME]]=n),n.push(i)}return e}}Ai.NAME="GeneralNames";const Ei="-{5}",Bi="\\n",Ld=`[^${Bi}]+`,Ud=`${Ei}BEGIN (${Ld}(?=${Ei}))${Ei}`,Dd=`${Ei}END \\1${Ei}`,Vr="\\n",Md=`[^:${Bi}]+`,Vd=`(?:[^${Bi}]+${Vr}(?: +[^${Bi}]+${Vr})*)`,Fd="[a-zA-Z0-9=+/]+",$d=`(?:${Fd}${Vr})+`,uh=`${Ud}${Vr}(?:((?:${Md}: ${Vd})+))?${Vr}?(${$d})${Dd}`;class Fe{static isPem(e){return typeof e=="string"&&new RegExp(uh,"g").test(e)}static decodeWithHeaders(e){e=e.replace(/\r/g,"");const r=new RegExp(uh,"g"),i=[];let n=null;for(;n=r.exec(e);){const o=n[3].replace(new RegExp(`[${Bi}]+`,"g"),""),s={type:n[1],headers:[],rawData:H.FromBase64(o)},a=n[2];if(a){const l=a.split(new RegExp(Vr,"g"));let h=null;for(const p of l){const[y,B]=p.split(/:(.*)/);if(B===void 0){if(!h)throw new Error("Cannot parse PEM string. Incorrect header value");h.value+=y.trim()}else h&&s.headers.push(h),h={key:y,value:B.trim()}}h&&s.headers.push(h)}i.push(s)}return i}static decode(e){return this.decodeWithHeaders(e).map(r=>r.rawData)}static decodeFirst(e){const r=this.decode(e);if(!r.length)throw new RangeError("PEM string doesn't contain any objects");return r[0]}static encode(e,r){if(Array.isArray(e)){const i=new Array;return r?e.forEach(n=>{if(!O.isBufferSource(n))throw new TypeError("Cannot encode array of BufferSource in PEM format. Not all items of the array are BufferSource");i.push(this.encodeStruct({type:r,rawData:O.toArrayBuffer(n)}))}):e.forEach(n=>{if(!("type"in n))throw new TypeError("Cannot encode array of PemStruct in PEM format. Not all items of the array are PemStrut");i.push(this.encodeStruct(n))}),i.join(`
`)}else{if(!r)throw new Error("Required argument 'tag' is missed");return this.encodeStruct({type:r,rawData:O.toArrayBuffer(e)})}}static encodeStruct(e){var r;const i=e.type.toLocaleUpperCase(),n=[];if(n.push(`-----BEGIN ${i}-----`),!((r=e.headers)===null||r===void 0)&&r.length){for(const h of e.headers)n.push(`${h.key}: ${h.value}`);n.push("")}const o=H.ToBase64(e.rawData);let s,a=0;const l=Array();for(;a<o.length&&(o.length-a<64?s=o.substring(a):(s=o.substring(a,a+64),a+=64),s.length!==0)&&(l.push(s),!(s.length<64)););return n.push(...l),n.push(`-----END ${i}-----`),n.join(`
`)}}Fe.CertificateTag="CERTIFICATE",Fe.CrlTag="CRL",Fe.CertificateRequestTag="CERTIFICATE REQUEST",Fe.PublicKeyTag="PUBLIC KEY",Fe.PrivateKeyTag="PRIVATE KEY";class Ht extends Vt{static isAsnEncoded(e){return O.isBufferSource(e)||typeof e=="string"}static toArrayBuffer(e){if(typeof e=="string"){if(Fe.isPem(e))return Fe.decode(e)[0];if(H.isHex(e))return H.FromHex(e);if(H.isBase64(e))return H.FromBase64(e);if(H.isBase64Url(e))return H.FromBase64Url(e);throw new TypeError("Unsupported format of 'raw' argument. Must be one of DER, PEM, HEX, Base64, or Base4Url")}else{const r=H.ToBinary(e);return Fe.isPem(r)?Fe.decode(r)[0]:H.isHex(r)?H.FromHex(r):H.isBase64(r)?H.FromBase64(r):H.isBase64Url(r)?H.FromBase64Url(r):O.toArrayBuffer(e)}}constructor(...e){Ht.isAsnEncoded(e[0])?super(Ht.toArrayBuffer(e[0]),e[1]):super(e[0])}toString(e="pem"){switch(e){case"pem":return Fe.encode(this.rawData,this.tag);default:return super.toString(e)}}}class ur extends Ht{constructor(e){Ht.isAsnEncoded(e)?super(e,Tt):super(e),this.tag=Fe.PublicKeyTag}async export(...e){let r,i=["verify"],n={hash:"SHA-256",...this.algorithm};return e.length>1?(n=e[0]||n,i=e[1]||i,r=e[2]||Ve.get()):r=e[0]||Ve.get(),r.subtle.importKey("spki",this.rawData,n,!0,i)}onInit(e){const r=ze.resolve(Qn),i=this.algorithm=r.toWebAlgorithm(e.algorithm);switch(e.algorithm.algorithm){case Ur:{const n=j.parse(e.subjectPublicKey,qs),o=O.toUint8Array(n.modulus);i.publicExponent=O.toUint8Array(n.publicExponent),i.modulusLength=(o[0]?o:o.slice(1)).byteLength<<3;break}}}async getThumbprint(...e){var r;let i,n="SHA-1";return e.length>=1&&!(!((r=e[0])===null||r===void 0)&&r.subtle)?(n=e[0]||n,i=e[1]||Ve.get()):i=e[0]||Ve.get(),await i.subtle.digest(n,this.rawData)}async getKeyIdentifier(e){e||(e=Ve.get());const r=j.parse(this.rawData,Tt);return await e.subtle.digest("SHA-1",r.subjectPublicKey)}toTextObject(){const e=this.toTextObjectEmpty(),r=j.parse(this.rawData,Tt);switch(e.Algorithm=cr.serializeAlgorithm(r.algorithm),r.algorithm.algorithm){case yi:e["EC Point"]=r.subjectPublicKey;break;case Ur:default:e["Raw Data"]=r.subjectPublicKey}return e}}class ft{static register(e,r){this.items.set(e,r)}static create(e){const r=new pt(e),i=this.items.get(r.type);return i?new i(e):r}}ft.items=new Map;const ro="crypto.signatureFormatter";class Gd{toAsnSignature(e,r){return O.toArrayBuffer(r)}toWebSignature(e,r){return O.toArrayBuffer(r)}}class io extends Ht{constructor(e){Ht.isAsnEncoded(e)?super(e,kr):super(e),this.tag=Fe.CertificateTag}onInit(e){const r=e.tbsCertificate;this.tbs=j.serialize(r),this.serialNumber=H.ToHex(r.serialNumber),this.subjectName=new Ft(r.subject),this.subject=new Ft(r.subject).toString(),this.issuerName=new Ft(r.issuer),this.issuer=this.issuerName.toString();const i=ze.resolve(Qn);this.signatureAlgorithm=i.toWebAlgorithm(e.signatureAlgorithm),this.signature=e.signatureValue;const n=r.validity.notBefore.utcTime||r.validity.notBefore.generalTime;if(!n)throw new Error("Cannot get 'notBefore' value");this.notBefore=n;const o=r.validity.notAfter.utcTime||r.validity.notAfter.generalTime;if(!o)throw new Error("Cannot get 'notAfter' value");this.notAfter=o,this.extensions=[],r.extensions&&(this.extensions=r.extensions.map(s=>ft.create(j.serialize(s)))),this.publicKey=new ur(r.subjectPublicKeyInfo)}getExtension(e){for(const r of this.extensions)if(typeof e=="string"){if(r.type===e)return r}else if(r instanceof e)return r;return null}getExtensions(e){return this.extensions.filter(r=>typeof e=="string"?r.type===e:r instanceof e)}async verify(e={},r=Ve.get()){let i,n;const o=e.publicKey;try{if(!o)i={...this.publicKey.algorithm,...this.signatureAlgorithm},n=await this.publicKey.export(i,["verify"],r);else if("publicKey"in o)i={...o.publicKey.algorithm,...this.signatureAlgorithm},n=await o.publicKey.export(i,["verify"],r);else if(o instanceof ur)i={...o.algorithm,...this.signatureAlgorithm},n=await o.export(i,["verify"],r);else if(O.isBufferSource(o)){const h=new ur(o);i={...h.algorithm,...this.signatureAlgorithm},n=await h.export(i,["verify"],r)}else i={...o.algorithm,...this.signatureAlgorithm},n=o}catch{return!1}const s=ze.resolveAll(ro).reverse();let a=null;for(const h of s)if(a=h.toWebSignature(i,this.signature),a)break;if(!a)throw Error("Cannot convert ASN.1 signature value to WebCrypto format");const l=await r.subtle.verify(this.signatureAlgorithm,n,a,this.tbs);if(e.signatureOnly)return l;{const h=(e.date||new Date).getTime();return l&&this.notBefore.getTime()<h&&h<this.notAfter.getTime()}}async getThumbprint(...e){let r,i="SHA-1";return e[0]&&(e[0].subtle?r=e[0]:(i=e[0]||i,r=e[1])),r??(r=Ve.get()),await r.subtle.digest(i,this.rawData)}async isSelfSigned(e=Ve.get()){return this.subject===this.issuer&&await this.verify({signatureOnly:!0},e)}toTextObject(){const e=this.toTextObjectEmpty(),r=j.parse(this.rawData,kr),i=r.tbsCertificate,n=new se("",{Version:`${Br[i.version]} (${i.version})`,"Serial Number":i.serialNumber,"Signature Algorithm":cr.serializeAlgorithm(i.signature),Issuer:this.issuer,Validity:new se("",{"Not Before":i.validity.notBefore.getTime(),"Not After":i.validity.notAfter.getTime()}),Subject:this.subject,"Subject Public Key Info":this.publicKey});if(i.issuerUniqueID&&(n["Issuer Unique ID"]=i.issuerUniqueID),i.subjectUniqueID&&(n["Subject Unique ID"]=i.subjectUniqueID),this.extensions.length){const o=new se("");for(const s of this.extensions){const a=s.toTextObject();o[a[se.NAME]]=a}n.Extensions=o}return e.Data=n,e.Signature=new se("",{Algorithm:cr.serializeAlgorithm(r.signatureAlgorithm),"":r.signatureValue}),e}}io.NAME="Certificate";class ki extends pt{static async create(e,r=!1,i=Ve.get()){if(e instanceof io||lr.isCryptoKey(e)){const n=e instanceof io?await e.publicKey.export(i):e,o=await i.subtle.exportKey("spki",n),s=await new ur(o).getKeyIdentifier(i);return new ki(H.ToHex(s),r)}else return new ki(e,r)}constructor(...e){if(O.isBufferSource(e[0]))super(e[0]);else if(typeof e[0]=="string"){const r=new tr({keyIdentifier:new Vo(H.FromHex(e[0]))});super(Mo,e[1],j.serialize(r))}else{const r=e[0],i=r.name instanceof Ai?j.parse(r.name.rawData,Ne):r.name,n=new tr({authorityCertIssuer:i,authorityCertSerialNumber:H.FromHex(r.serialNumber)});super(Mo,e[1],j.serialize(n))}}onInit(e){super.onInit(e);const r=j.parse(e.extnValue,tr);r.keyIdentifier&&(this.keyId=H.ToHex(r.keyIdentifier)),r.authorityCertIssuer&&r.authorityCertSerialNumber&&(this.certId={name:r.authorityCertIssuer,serialNumber:H.ToHex(r.authorityCertSerialNumber)})}toTextObject(){const e=this.toTextObjectWithoutValue(),r=j.parse(this.value,tr);return r.authorityCertIssuer&&(e["Authority Issuer"]=new Ai(r.authorityCertIssuer).toTextObject()),r.authorityCertSerialNumber&&(e["Authority Serial Number"]=r.authorityCertSerialNumber),r.keyIdentifier&&(e[""]=r.keyIdentifier),e}}ki.NAME="Authority Key Identifier";class hh extends pt{constructor(...e){if(O.isBufferSource(e[0])){super(e[0]);const r=j.parse(this.value,rn);this.ca=r.cA,this.pathLength=r.pathLenConstraint}else{const r=new rn({cA:e[0],pathLenConstraint:e[1]});super(dl,e[2],j.serialize(r)),this.ca=e[0],this.pathLength=e[1]}}toTextObject(){const e=this.toTextObjectWithoutValue();return this.ca&&(e.CA=this.ca),this.pathLength!==void 0&&(e["Path Length"]=this.pathLength),e}}hh.NAME="Basic Constraints";var ph;(function(t){t.serverAuth="1.3.6.1.5.5.7.3.1",t.clientAuth="1.3.6.1.5.5.7.3.2",t.codeSigning="1.3.6.1.5.5.7.3.3",t.emailProtection="1.3.6.1.5.5.7.3.4",t.timeStamping="1.3.6.1.5.5.7.3.8",t.ocspSigning="1.3.6.1.5.5.7.3.9"})(ph||(ph={}));class fh extends pt{constructor(...e){if(O.isBufferSource(e[0])){super(e[0]);const r=j.parse(this.value,cn);this.usages=r.map(i=>i)}else{const r=new cn(e[0]);super(wl,e[1],j.serialize(r)),this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue();return e[""]=this.usages.map(r=>Mt.toString(r)).join(", "),e}}fh.NAME="Extended Key Usages";var Ba;(function(t){t[t.digitalSignature=1]="digitalSignature",t[t.nonRepudiation=2]="nonRepudiation",t[t.keyEncipherment=4]="keyEncipherment",t[t.dataEncipherment=8]="dataEncipherment",t[t.keyAgreement=16]="keyAgreement",t[t.keyCertSign=32]="keyCertSign",t[t.cRLSign=64]="cRLSign",t[t.encipherOnly=128]="encipherOnly",t[t.decipherOnly=256]="decipherOnly"})(Ba||(Ba={}));class ka extends pt{constructor(...e){if(O.isBufferSource(e[0])){super(e[0]);const r=j.parse(this.value,rs);this.usages=r.toNumber()}else{const r=new rs(e[0]);super(Al,e[1],j.serialize(r)),this.usages=e[0]}}toTextObject(){const e=this.toTextObjectWithoutValue(),r=j.parse(this.value,rs);return e[""]=r.toJSON().join(", "),e}}ka.NAME="Key Usages";class no extends pt{static async create(e,r=!1,i=Ve.get()){let n;e instanceof ur?n=e.rawData:"publicKey"in e?n=e.publicKey.rawData:O.isBufferSource(e)?n=e:n=await i.subtle.exportKey("spki",e);const o=await new ur(n).getKeyIdentifier(i);return new no(H.ToHex(o),r)}constructor(...e){if(O.isBufferSource(e[0])){super(e[0]);const r=j.parse(this.value,Ut);this.keyId=H.ToHex(r)}else{const r=typeof e[0]=="string"?H.FromHex(e[0]):e[0],i=new Ut(r);super(Il,e[1],j.serialize(i)),this.keyId=H.ToHex(r)}}toTextObject(){const e=this.toTextObjectWithoutValue(),r=j.parse(this.value,Ut);return e[""]=r,e}}no.NAME="Subject Key Identifier";class xa extends pt{constructor(...e){O.isBufferSource(e[0])?super(e[0]):super(xl,e[1],new Ai(e[0]||[]).rawData)}onInit(e){super.onInit(e);const r=j.parse(e.extnValue,as);this.names=new Ai(r)}toTextObject(){const e=this.toTextObjectWithoutValue(),r=this.names.toTextObject();for(const i in r)e[i]=r[i];return e}}xa.NAME="Subject Alternative Name";class dh extends pt{constructor(...e){var r;if(O.isBufferSource(e[0])){super(e[0]);const i=j.parse(this.value,sn);this.policies=i.map(n=>n.policyIdentifier)}else{const i=e[0],n=(r=e[1])!==null&&r!==void 0?r:!1,o=new sn(i.map(s=>new on({policyIdentifier:s})));super(gl,n,j.serialize(o)),this.policies=i}}toTextObject(){const e=this.toTextObjectWithoutValue();return e.Policy=this.policies.map(r=>new se("",{},Mt.toString(r))),e}}dh.NAME="Certificate Policies",ft.register(gl,dh);class Fr extends Vt{constructor(...e){let r;if(O.isBufferSource(e[0]))r=O.toArrayBuffer(e[0]);else{const i=e[0],n=Array.isArray(e[1])?e[1].map(o=>O.toArrayBuffer(o)):[];r=j.serialize(new It({type:i,values:n}))}super(r,It)}onInit(e){this.type=e.type,this.values=e.values}toTextObject(){const e=this.toTextObjectWithoutValue();return e.Value=this.values.map(r=>new se("",{"":r})),e}toTextObjectWithoutValue(){const e=this.toTextObjectEmpty();return e[se.NAME]===Fr.NAME&&(e[se.NAME]=Mt.toString(this.type)),e}}Fr.NAME="Attribute";class yh extends Fr{constructor(...e){var r;if(O.isBufferSource(e[0]))super(e[0]);else{const i=new Xn({printableString:e[0]});super(pu,[j.serialize(i)])}(r=this.password)!==null&&r!==void 0||(this.password="")}onInit(e){if(super.onInit(e),this.values[0]){const r=j.parse(this.values[0],Xn);this.password=r.toString()}}toTextObject(){const e=this.toTextObjectWithoutValue();return e[se.VALUE]=this.password,e}}yh.NAME="Challenge Password";class Ca extends Fr{constructor(...e){var r;if(O.isBufferSource(e[0]))super(e[0]);else{const i=e[0],n=new rr;for(const o of i)n.push(j.parse(o.rawData,rt));super(ca,[j.serialize(n)])}(r=this.items)!==null&&r!==void 0||(this.items=[])}onInit(e){if(super.onInit(e),this.values[0]){const r=j.parse(this.values[0],rr);this.items=r.map(i=>ft.create(j.serialize(i)))}}toTextObject(){const e=this.toTextObjectWithoutValue(),r=this.items.map(i=>i.toTextObject());for(const i of r)e[i[se.NAME]]=i;return e}}Ca.NAME="Extensions";class oo{static register(e,r){this.items.set(e,r)}static create(e){const r=new Fr(e),i=this.items.get(r.type);return i?new i(e):r}}oo.items=new Map;let Ia=class{toAsnAlgorithm(t){switch(t.name.toLowerCase()){case"rsassa-pkcs1-v1_5":if(t.hash)switch(t.hash.name.toLowerCase()){case"sha-1":return new _({algorithm:Rn,parameters:null});case"sha-256":return new _({algorithm:Fs,parameters:null});case"sha-384":return new _({algorithm:_n,parameters:null});case"sha-512":return new _({algorithm:jn,parameters:null})}else return new _({algorithm:Ur,parameters:null})}return null}toWebAlgorithm(t){switch(t.algorithm){case Ur:return{name:"RSASSA-PKCS1-v1_5"};case Rn:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-1"}};case Fs:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case _n:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-384"}};case jn:return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-512"}}}return null}};Ia=c([Ys()],Ia),ze.registerSingleton(Yn,Ia);class We{addPadding(e,r){const i=O.toUint8Array(r),n=new Uint8Array(e);return n.set(i,e-i.length),n}removePadding(e,r=!1){let i=O.toUint8Array(e);for(let n=0;n<i.length;n++)if(i[n]){i=i.slice(n);break}if(r&&i[0]>127){const n=new Uint8Array(i.length+1);return n.set(i,1),n.buffer}return i.buffer}toAsnSignature(e,r){if(e.name==="ECDSA"){const i=e.namedCurve,n=We.namedCurveSize.get(i)||We.defaultNamedCurveSize,o=new Hn,s=O.toUint8Array(r);return o.r=this.removePadding(s.slice(0,n),!0),o.s=this.removePadding(s.slice(n,n+n),!0),j.serialize(o)}return null}toWebSignature(e,r){if(e.name==="ECDSA"){const i=j.parse(r,Hn),n=e.namedCurve,o=We.namedCurveSize.get(n)||We.defaultNamedCurveSize,s=this.addPadding(o,this.removePadding(i.r)),a=this.addPadding(o,this.removePadding(i.s));return rf(s,a)}return null}}We.namedCurveSize=new Map,We.defaultNamedCurveSize=32;const gh="1.3.101.110",mh="1.3.101.111",vh="1.3.101.112",bh="1.3.101.113";let Ta=class{toAsnAlgorithm(t){let e=null;switch(t.name.toLowerCase()){case"eddsa":switch(t.namedCurve.toLowerCase()){case"ed25519":e=vh;break;case"ed448":e=bh;break}break;case"ecdh-es":switch(t.namedCurve.toLowerCase()){case"x25519":e=gh;break;case"x448":e=mh;break}}return e?new _({algorithm:e}):null}toWebAlgorithm(t){switch(t.algorithm){case vh:return{name:"EdDSA",namedCurve:"Ed25519"};case bh:return{name:"EdDSA",namedCurve:"Ed448"};case gh:return{name:"ECDH-ES",namedCurve:"X25519"};case mh:return{name:"ECDH-ES",namedCurve:"X448"}}return null}};Ta=c([Ys()],Ta),ze.registerSingleton(Yn,Ta);class Kd extends Ht{constructor(e){Ht.isAsnEncoded(e)?super(e,wi):super(e),this.tag=Fe.CertificateRequestTag}onInit(e){this.tbs=j.serialize(e.certificationRequestInfo),this.publicKey=new ur(e.certificationRequestInfo.subjectPKInfo);const r=ze.resolve(Qn);this.signatureAlgorithm=r.toWebAlgorithm(e.signatureAlgorithm),this.signature=e.signature,this.attributes=e.certificationRequestInfo.attributes.map(n=>oo.create(j.serialize(n)));const i=this.getAttribute(ca);this.extensions=[],i instanceof Ca&&(this.extensions=i.items),this.subjectName=new Ft(e.certificationRequestInfo.subject),this.subject=this.subjectName.toString()}getAttribute(e){for(const r of this.attributes)if(r.type===e)return r;return null}getAttributes(e){return this.attributes.filter(r=>r.type===e)}getExtension(e){for(const r of this.extensions)if(r.type===e)return r;return null}getExtensions(e){return this.extensions.filter(r=>r.type===e)}async verify(e=Ve.get()){const r={...this.publicKey.algorithm,...this.signatureAlgorithm},i=await this.publicKey.export(r,["verify"],e),n=ze.resolveAll(ro).reverse();let o=null;for(const s of n)if(o=s.toWebSignature(r,this.signature),o)break;if(!o)throw Error("Cannot convert WebCrypto signature value to ASN.1 format");return await e.subtle.verify(this.signatureAlgorithm,i,o,this.tbs)}toTextObject(){const e=this.toTextObjectEmpty(),r=j.parse(this.rawData,wi),i=r.certificationRequestInfo,n=new se("",{Version:`${Br[i.version]} (${i.version})`,Subject:this.subject,"Subject Public Key Info":this.publicKey});if(this.attributes.length){const o=new se("");for(const s of this.attributes){const a=s.toTextObject();o[a[se.NAME]]=a}n.Attributes=o}return e.Data=n,e.Signature=new se("",{Algorithm:cr.serializeAlgorithm(r.signatureAlgorithm),"":r.signature}),e}}Kd.NAME="PKCS#10 Certificate Request";var wh;(function(t){t[t.unspecified=0]="unspecified",t[t.keyCompromise=1]="keyCompromise",t[t.cACompromise=2]="cACompromise",t[t.affiliationChanged=3]="affiliationChanged",t[t.superseded=4]="superseded",t[t.cessationOfOperation=5]="cessationOfOperation",t[t.certificateHold=6]="certificateHold",t[t.removeFromCRL=8]="removeFromCRL",t[t.privilegeWithdrawn=9]="privilegeWithdrawn",t[t.aACompromise=10]="aACompromise"})(wh||(wh={})),ft.register(dl,hh),ft.register(wl,fh),ft.register(Al,ka),ft.register(Il,no),ft.register(Mo,ki),ft.register(xl,xa),oo.register(pu,yh),oo.register(ca,Ca),ze.registerSingleton(ro,Gd),ze.registerSingleton(ro,We),We.namedCurveSize.set("P-256",32),We.namedCurveSize.set("K-256",32),We.namedCurveSize.set("P-384",48),We.namedCurveSize.set("P-521",66);function qd(){return{parseMetaCertificateData:t=>{if(/{vault:\/\/.*}/g.test(t))throw new Error("not a X.509 certificate");const e=new io(t),r={subject:e.subjectName.toString(),issuer:e.issuer,notAfter:e.notAfter};for(const i of e.extensions)if(i instanceof xa){const n=i.names.toJSON(),o=Object.entries(n).map(s=>({type:s[1].type,value:s[1].value})).reduce((s,a)=>{const l=a.type,h=s[l]??[];return{...s,[l]:[...h,a.value]}},{});for(const s in o)r.subjectAltName=`${s}=${o[s].join(", ")}`}else if(i instanceof ka){const n=Object.values(Ba),o=Array(n.length/2).fill(null).reduce((s,a,l)=>{const h=n[n.length/2+l];if(i.usages&h){const p=n[l];s.push(p)}return s},[]);r.keyUsage=o}return r}}}const so={useI18n:ef,useX509:qd},zd={list:{konnect:"/api/runtime_groups/{controlPlaneId}/certificates",kongManager:"/{workspace}/certificates"}};function Sh(){return{formatDateBy:(t,e={})=>{if(isNaN(t))return null;try{return new Date(t*1e3).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,...e})}catch{return null}}}}var Na=function(t,e){return Na=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(r[n]=i[n])},Na(t,e)};function nt(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Na(t,e);function r(){this.constructor=t}t.prototype=e===null?Object.create(e):(r.prototype=e.prototype,new r)}var L=function(){return L=Object.assign||function(t){for(var e,r=1,i=arguments.length;r<i;r++){e=arguments[r];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])}return t},L.apply(this,arguments)};function Wd(t,e){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(r[i]=t[i]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var n=0,i=Object.getOwnPropertySymbols(t);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(t,i[n])&&(r[i[n]]=t[i[n]]);return r}function Rt(t,e,r){if(r||arguments.length===2)for(var i=0,n=e.length,o;i<n;i++)(o||!(i in e))&&(o||(o=Array.prototype.slice.call(e,0,i)),o[i]=e[i]);return t.concat(o||Array.prototype.slice.call(e))}var X;(function(t){t[t.EXPECT_ARGUMENT_CLOSING_BRACE=1]="EXPECT_ARGUMENT_CLOSING_BRACE",t[t.EMPTY_ARGUMENT=2]="EMPTY_ARGUMENT",t[t.MALFORMED_ARGUMENT=3]="MALFORMED_ARGUMENT",t[t.EXPECT_ARGUMENT_TYPE=4]="EXPECT_ARGUMENT_TYPE",t[t.INVALID_ARGUMENT_TYPE=5]="INVALID_ARGUMENT_TYPE",t[t.EXPECT_ARGUMENT_STYLE=6]="EXPECT_ARGUMENT_STYLE",t[t.INVALID_NUMBER_SKELETON=7]="INVALID_NUMBER_SKELETON",t[t.INVALID_DATE_TIME_SKELETON=8]="INVALID_DATE_TIME_SKELETON",t[t.EXPECT_NUMBER_SKELETON=9]="EXPECT_NUMBER_SKELETON",t[t.EXPECT_DATE_TIME_SKELETON=10]="EXPECT_DATE_TIME_SKELETON",t[t.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE=11]="UNCLOSED_QUOTE_IN_ARGUMENT_STYLE",t[t.EXPECT_SELECT_ARGUMENT_OPTIONS=12]="EXPECT_SELECT_ARGUMENT_OPTIONS",t[t.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE=13]="EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE=14]="INVALID_PLURAL_ARGUMENT_OFFSET_VALUE",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR=15]="EXPECT_SELECT_ARGUMENT_SELECTOR",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR=16]="EXPECT_PLURAL_ARGUMENT_SELECTOR",t[t.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT=17]="EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT",t[t.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT=18]="EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT",t[t.INVALID_PLURAL_ARGUMENT_SELECTOR=19]="INVALID_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_PLURAL_ARGUMENT_SELECTOR=20]="DUPLICATE_PLURAL_ARGUMENT_SELECTOR",t[t.DUPLICATE_SELECT_ARGUMENT_SELECTOR=21]="DUPLICATE_SELECT_ARGUMENT_SELECTOR",t[t.MISSING_OTHER_CLAUSE=22]="MISSING_OTHER_CLAUSE",t[t.INVALID_TAG=23]="INVALID_TAG",t[t.INVALID_TAG_NAME=25]="INVALID_TAG_NAME",t[t.UNMATCHED_CLOSING_TAG=26]="UNMATCHED_CLOSING_TAG",t[t.UNCLOSED_TAG=27]="UNCLOSED_TAG"})(X||(X={}));var ce;(function(t){t[t.literal=0]="literal",t[t.argument=1]="argument",t[t.number=2]="number",t[t.date=3]="date",t[t.time=4]="time",t[t.select=5]="select",t[t.plural=6]="plural",t[t.pound=7]="pound",t[t.tag=8]="tag"})(ce||(ce={}));var $r;(function(t){t[t.number=0]="number",t[t.dateTime=1]="dateTime"})($r||($r={}));function Ah(t){return t.type===ce.literal}function Jd(t){return t.type===ce.argument}function Eh(t){return t.type===ce.number}function Bh(t){return t.type===ce.date}function kh(t){return t.type===ce.time}function xh(t){return t.type===ce.select}function Ch(t){return t.type===ce.plural}function Xd(t){return t.type===ce.pound}function Ih(t){return t.type===ce.tag}function Th(t){return!!(t&&typeof t=="object"&&t.type===$r.number)}function Oa(t){return!!(t&&typeof t=="object"&&t.type===$r.dateTime)}var Nh=/[ \xA0\u1680\u2000-\u200A\u202F\u205F\u3000]/,Zd=/(?:[Eec]{1,6}|G{1,5}|[Qq]{1,5}|(?:[yYur]+|U{1,5})|[ML]{1,5}|d{1,2}|D{1,3}|F{1}|[abB]{1,5}|[hkHK]{1,2}|w{1,2}|W{1}|m{1,2}|s{1,2}|[zZOvVxX]{1,4})(?=([^']*'[^']*')*[^']*$)/g;function Yd(t){var e={};return t.replace(Zd,function(r){var i=r.length;switch(r[0]){case"G":e.era=i===4?"long":i===5?"narrow":"short";break;case"y":e.year=i===2?"2-digit":"numeric";break;case"Y":case"u":case"U":case"r":throw new RangeError("`Y/u/U/r` (year) patterns are not supported, use `y` instead");case"q":case"Q":throw new RangeError("`q/Q` (quarter) patterns are not supported");case"M":case"L":e.month=["numeric","2-digit","short","long","narrow"][i-1];break;case"w":case"W":throw new RangeError("`w/W` (week) patterns are not supported");case"d":e.day=["numeric","2-digit"][i-1];break;case"D":case"F":case"g":throw new RangeError("`D/F/g` (day) patterns are not supported, use `d` instead");case"E":e.weekday=i===4?"short":i===5?"narrow":"short";break;case"e":if(i<4)throw new RangeError("`e..eee` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][i-4];break;case"c":if(i<4)throw new RangeError("`c..ccc` (weekday) patterns are not supported");e.weekday=["short","long","narrow","short"][i-4];break;case"a":e.hour12=!0;break;case"b":case"B":throw new RangeError("`b/B` (period) patterns are not supported, use `a` instead");case"h":e.hourCycle="h12",e.hour=["numeric","2-digit"][i-1];break;case"H":e.hourCycle="h23",e.hour=["numeric","2-digit"][i-1];break;case"K":e.hourCycle="h11",e.hour=["numeric","2-digit"][i-1];break;case"k":e.hourCycle="h24",e.hour=["numeric","2-digit"][i-1];break;case"j":case"J":case"C":throw new RangeError("`j/J/C` (hour) patterns are not supported, use `h/H/K/k` instead");case"m":e.minute=["numeric","2-digit"][i-1];break;case"s":e.second=["numeric","2-digit"][i-1];break;case"S":case"A":throw new RangeError("`S/A` (second) patterns are not supported, use `s` instead");case"z":e.timeZoneName=i<4?"short":"long";break;case"Z":case"O":case"v":case"V":case"X":case"x":throw new RangeError("`Z/O/v/V/X/x` (timeZone) patterns are not supported, use `z` instead")}return""}),e}var Qd=/[\t-\r \x85\u200E\u200F\u2028\u2029]/i;function ey(t){if(t.length===0)throw new Error("Number skeleton cannot be empty");for(var e=t.split(Qd).filter(function(B){return B.length>0}),r=[],i=0,n=e;i<n.length;i++){var o=n[i],s=o.split("/");if(s.length===0)throw new Error("Invalid number skeleton");for(var a=s[0],l=s.slice(1),h=0,p=l;h<p.length;h++){var y=p[h];if(y.length===0)throw new Error("Invalid number skeleton")}r.push({stem:a,options:l})}return r}function ty(t){return t.replace(/^(.*?)-/,"")}var Oh=/^\.(?:(0+)(\*)?|(#+)|(0+)(#+))$/g,Ph=/^(@+)?(\+|#+)?[rs]?$/g,ry=/(\*)(0+)|(#+)(0+)|(0+)/g,Hh=/^(0+)$/;function Rh(t){var e={};return t[t.length-1]==="r"?e.roundingPriority="morePrecision":t[t.length-1]==="s"&&(e.roundingPriority="lessPrecision"),t.replace(Ph,function(r,i,n){return typeof n!="string"?(e.minimumSignificantDigits=i.length,e.maximumSignificantDigits=i.length):n==="+"?e.minimumSignificantDigits=i.length:i[0]==="#"?e.maximumSignificantDigits=i.length:(e.minimumSignificantDigits=i.length,e.maximumSignificantDigits=i.length+(typeof n=="string"?n.length:0)),""}),e}function _h(t){switch(t){case"sign-auto":return{signDisplay:"auto"};case"sign-accounting":case"()":return{currencySign:"accounting"};case"sign-always":case"+!":return{signDisplay:"always"};case"sign-accounting-always":case"()!":return{signDisplay:"always",currencySign:"accounting"};case"sign-except-zero":case"+?":return{signDisplay:"exceptZero"};case"sign-accounting-except-zero":case"()?":return{signDisplay:"exceptZero",currencySign:"accounting"};case"sign-never":case"+_":return{signDisplay:"never"}}}function iy(t){var e;if(t[0]==="E"&&t[1]==="E"?(e={notation:"engineering"},t=t.slice(2)):t[0]==="E"&&(e={notation:"scientific"},t=t.slice(1)),e){var r=t.slice(0,2);if(r==="+!"?(e.signDisplay="always",t=t.slice(2)):r==="+?"&&(e.signDisplay="exceptZero",t=t.slice(2)),!Hh.test(t))throw new Error("Malformed concise eng/scientific notation");e.minimumIntegerDigits=t.length}return e}function jh(t){var e={},r=_h(t);return r||e}function ny(t){for(var e={},r=0,i=t;r<i.length;r++){var n=i[r];switch(n.stem){case"percent":case"%":e.style="percent";continue;case"%x100":e.style="percent",e.scale=100;continue;case"currency":e.style="currency",e.currency=n.options[0];continue;case"group-off":case",_":e.useGrouping=!1;continue;case"precision-integer":case".":e.maximumFractionDigits=0;continue;case"measure-unit":case"unit":e.style="unit",e.unit=ty(n.options[0]);continue;case"compact-short":case"K":e.notation="compact",e.compactDisplay="short";continue;case"compact-long":case"KK":e.notation="compact",e.compactDisplay="long";continue;case"scientific":e=L(L(L({},e),{notation:"scientific"}),n.options.reduce(function(l,h){return L(L({},l),jh(h))},{}));continue;case"engineering":e=L(L(L({},e),{notation:"engineering"}),n.options.reduce(function(l,h){return L(L({},l),jh(h))},{}));continue;case"notation-simple":e.notation="standard";continue;case"unit-width-narrow":e.currencyDisplay="narrowSymbol",e.unitDisplay="narrow";continue;case"unit-width-short":e.currencyDisplay="code",e.unitDisplay="short";continue;case"unit-width-full-name":e.currencyDisplay="name",e.unitDisplay="long";continue;case"unit-width-iso-code":e.currencyDisplay="symbol";continue;case"scale":e.scale=parseFloat(n.options[0]);continue;case"integer-width":if(n.options.length>1)throw new RangeError("integer-width stems only accept a single optional option");n.options[0].replace(ry,function(l,h,p,y,B,w){if(h)e.minimumIntegerDigits=p.length;else{if(y&&B)throw new Error("We currently do not support maximum integer digits");if(w)throw new Error("We currently do not support exact integer digits")}return""});continue}if(Hh.test(n.stem)){e.minimumIntegerDigits=n.stem.length;continue}if(Oh.test(n.stem)){if(n.options.length>1)throw new RangeError("Fraction-precision stems only accept a single optional option");n.stem.replace(Oh,function(l,h,p,y,B,w){return p==="*"?e.minimumFractionDigits=h.length:y&&y[0]==="#"?e.maximumFractionDigits=y.length:B&&w?(e.minimumFractionDigits=B.length,e.maximumFractionDigits=B.length+w.length):(e.minimumFractionDigits=h.length,e.maximumFractionDigits=h.length),""});var o=n.options[0];o==="w"?e=L(L({},e),{trailingZeroDisplay:"stripIfInteger"}):o&&(e=L(L({},e),Rh(o)));continue}if(Ph.test(n.stem)){e=L(L({},e),Rh(n.stem));continue}var s=_h(n.stem);s&&(e=L(L({},e),s));var a=iy(n.stem);a&&(e=L(L({},e),a))}return e}var ao={AX:["H"],BQ:["H"],CP:["H"],CZ:["H"],DK:["H"],FI:["H"],ID:["H"],IS:["H"],ML:["H"],NE:["H"],RU:["H"],SE:["H"],SJ:["H"],SK:["H"],AS:["h","H"],BT:["h","H"],DJ:["h","H"],ER:["h","H"],GH:["h","H"],IN:["h","H"],LS:["h","H"],PG:["h","H"],PW:["h","H"],SO:["h","H"],TO:["h","H"],VU:["h","H"],WS:["h","H"],"001":["H","h"],AL:["h","H","hB"],TD:["h","H","hB"],"ca-ES":["H","h","hB"],CF:["H","h","hB"],CM:["H","h","hB"],"fr-CA":["H","h","hB"],"gl-ES":["H","h","hB"],"it-CH":["H","h","hB"],"it-IT":["H","h","hB"],LU:["H","h","hB"],NP:["H","h","hB"],PF:["H","h","hB"],SC:["H","h","hB"],SM:["H","h","hB"],SN:["H","h","hB"],TF:["H","h","hB"],VA:["H","h","hB"],CY:["h","H","hb","hB"],GR:["h","H","hb","hB"],CO:["h","H","hB","hb"],DO:["h","H","hB","hb"],KP:["h","H","hB","hb"],KR:["h","H","hB","hb"],NA:["h","H","hB","hb"],PA:["h","H","hB","hb"],PR:["h","H","hB","hb"],VE:["h","H","hB","hb"],AC:["H","h","hb","hB"],AI:["H","h","hb","hB"],BW:["H","h","hb","hB"],BZ:["H","h","hb","hB"],CC:["H","h","hb","hB"],CK:["H","h","hb","hB"],CX:["H","h","hb","hB"],DG:["H","h","hb","hB"],FK:["H","h","hb","hB"],GB:["H","h","hb","hB"],GG:["H","h","hb","hB"],GI:["H","h","hb","hB"],IE:["H","h","hb","hB"],IM:["H","h","hb","hB"],IO:["H","h","hb","hB"],JE:["H","h","hb","hB"],LT:["H","h","hb","hB"],MK:["H","h","hb","hB"],MN:["H","h","hb","hB"],MS:["H","h","hb","hB"],NF:["H","h","hb","hB"],NG:["H","h","hb","hB"],NR:["H","h","hb","hB"],NU:["H","h","hb","hB"],PN:["H","h","hb","hB"],SH:["H","h","hb","hB"],SX:["H","h","hb","hB"],TA:["H","h","hb","hB"],ZA:["H","h","hb","hB"],"af-ZA":["H","h","hB","hb"],AR:["H","h","hB","hb"],CL:["H","h","hB","hb"],CR:["H","h","hB","hb"],CU:["H","h","hB","hb"],EA:["H","h","hB","hb"],"es-BO":["H","h","hB","hb"],"es-BR":["H","h","hB","hb"],"es-EC":["H","h","hB","hb"],"es-ES":["H","h","hB","hb"],"es-GQ":["H","h","hB","hb"],"es-PE":["H","h","hB","hb"],GT:["H","h","hB","hb"],HN:["H","h","hB","hb"],IC:["H","h","hB","hb"],KG:["H","h","hB","hb"],KM:["H","h","hB","hb"],LK:["H","h","hB","hb"],MA:["H","h","hB","hb"],MX:["H","h","hB","hb"],NI:["H","h","hB","hb"],PY:["H","h","hB","hb"],SV:["H","h","hB","hb"],UY:["H","h","hB","hb"],JP:["H","h","K"],AD:["H","hB"],AM:["H","hB"],AO:["H","hB"],AT:["H","hB"],AW:["H","hB"],BE:["H","hB"],BF:["H","hB"],BJ:["H","hB"],BL:["H","hB"],BR:["H","hB"],CG:["H","hB"],CI:["H","hB"],CV:["H","hB"],DE:["H","hB"],EE:["H","hB"],FR:["H","hB"],GA:["H","hB"],GF:["H","hB"],GN:["H","hB"],GP:["H","hB"],GW:["H","hB"],HR:["H","hB"],IL:["H","hB"],IT:["H","hB"],KZ:["H","hB"],MC:["H","hB"],MD:["H","hB"],MF:["H","hB"],MQ:["H","hB"],MZ:["H","hB"],NC:["H","hB"],NL:["H","hB"],PM:["H","hB"],PT:["H","hB"],RE:["H","hB"],RO:["H","hB"],SI:["H","hB"],SR:["H","hB"],ST:["H","hB"],TG:["H","hB"],TR:["H","hB"],WF:["H","hB"],YT:["H","hB"],BD:["h","hB","H"],PK:["h","hB","H"],AZ:["H","hB","h"],BA:["H","hB","h"],BG:["H","hB","h"],CH:["H","hB","h"],GE:["H","hB","h"],LI:["H","hB","h"],ME:["H","hB","h"],RS:["H","hB","h"],UA:["H","hB","h"],UZ:["H","hB","h"],XK:["H","hB","h"],AG:["h","hb","H","hB"],AU:["h","hb","H","hB"],BB:["h","hb","H","hB"],BM:["h","hb","H","hB"],BS:["h","hb","H","hB"],CA:["h","hb","H","hB"],DM:["h","hb","H","hB"],"en-001":["h","hb","H","hB"],FJ:["h","hb","H","hB"],FM:["h","hb","H","hB"],GD:["h","hb","H","hB"],GM:["h","hb","H","hB"],GU:["h","hb","H","hB"],GY:["h","hb","H","hB"],JM:["h","hb","H","hB"],KI:["h","hb","H","hB"],KN:["h","hb","H","hB"],KY:["h","hb","H","hB"],LC:["h","hb","H","hB"],LR:["h","hb","H","hB"],MH:["h","hb","H","hB"],MP:["h","hb","H","hB"],MW:["h","hb","H","hB"],NZ:["h","hb","H","hB"],SB:["h","hb","H","hB"],SG:["h","hb","H","hB"],SL:["h","hb","H","hB"],SS:["h","hb","H","hB"],SZ:["h","hb","H","hB"],TC:["h","hb","H","hB"],TT:["h","hb","H","hB"],UM:["h","hb","H","hB"],US:["h","hb","H","hB"],VC:["h","hb","H","hB"],VG:["h","hb","H","hB"],VI:["h","hb","H","hB"],ZM:["h","hb","H","hB"],BO:["H","hB","h","hb"],EC:["H","hB","h","hb"],ES:["H","hB","h","hb"],GQ:["H","hB","h","hb"],PE:["H","hB","h","hb"],AE:["h","hB","hb","H"],"ar-001":["h","hB","hb","H"],BH:["h","hB","hb","H"],DZ:["h","hB","hb","H"],EG:["h","hB","hb","H"],EH:["h","hB","hb","H"],HK:["h","hB","hb","H"],IQ:["h","hB","hb","H"],JO:["h","hB","hb","H"],KW:["h","hB","hb","H"],LB:["h","hB","hb","H"],LY:["h","hB","hb","H"],MO:["h","hB","hb","H"],MR:["h","hB","hb","H"],OM:["h","hB","hb","H"],PH:["h","hB","hb","H"],PS:["h","hB","hb","H"],QA:["h","hB","hb","H"],SA:["h","hB","hb","H"],SD:["h","hB","hb","H"],SY:["h","hB","hb","H"],TN:["h","hB","hb","H"],YE:["h","hB","hb","H"],AF:["H","hb","hB","h"],LA:["H","hb","hB","h"],CN:["H","hB","hb","h"],LV:["H","hB","hb","h"],TL:["H","hB","hb","h"],"zu-ZA":["H","hB","hb","h"],CD:["hB","H"],IR:["hB","H"],"hi-IN":["hB","h","H"],"kn-IN":["hB","h","H"],"ml-IN":["hB","h","H"],"te-IN":["hB","h","H"],KH:["hB","h","H","hb"],"ta-IN":["hB","h","hb","H"],BN:["hb","hB","h","H"],MY:["hb","hB","h","H"],ET:["hB","hb","h","H"],"gu-IN":["hB","hb","h","H"],"mr-IN":["hB","hb","h","H"],"pa-IN":["hB","hb","h","H"],TW:["hB","hb","h","H"],KE:["hB","hb","H","h"],MM:["hB","hb","H","h"],TZ:["hB","hb","H","h"],UG:["hB","hb","H","h"]};function oy(t,e){for(var r="",i=0;i<t.length;i++){var n=t.charAt(i);if(n==="j"){for(var o=0;i+1<t.length&&t.charAt(i+1)===n;)o++,i++;var s=1+(o&1),a=o<2?1:3+(o>>1),l="a",h=sy(e);for((h=="H"||h=="k")&&(a=0);a-- >0;)r+=l;for(;s-- >0;)r=h+r}else n==="J"?r+="H":r+=n}return r}function sy(t){var e=t.hourCycle;if(e===void 0&&t.hourCycles&&t.hourCycles.length&&(e=t.hourCycles[0]),e)switch(e){case"h24":return"k";case"h23":return"H";case"h12":return"h";case"h11":return"K";default:throw new Error("Invalid hourCycle")}var r=t.language,i;r!=="root"&&(i=t.maximize().region);var n=ao[i||""]||ao[r||""]||ao["".concat(r,"-001")]||ao["001"];return n[0]}var Pa,ay=new RegExp("^".concat(Nh.source,"*")),cy=new RegExp("".concat(Nh.source,"*$"));function Y(t,e){return{start:t,end:e}}var ly=!!String.prototype.startsWith,uy=!!String.fromCodePoint,hy=!!Object.fromEntries,py=!!String.prototype.codePointAt,fy=!!String.prototype.trimStart,dy=!!String.prototype.trimEnd,yy=!!Number.isSafeInteger,gy=yy?Number.isSafeInteger:function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t&&Math.abs(t)<=9007199254740991},Ha=!0;try{var my=Mh("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");Ha=((Pa=my.exec("a"))===null||Pa===void 0?void 0:Pa[0])==="a"}catch{Ha=!1}var Lh=ly?function(t,e,r){return t.startsWith(e,r)}:function(t,e,r){return t.slice(r,r+e.length)===e},Ra=uy?String.fromCodePoint:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var r="",i=t.length,n=0,o;i>n;){if(o=t[n++],o>1114111)throw RangeError(o+" is not a valid code point");r+=o<65536?String.fromCharCode(o):String.fromCharCode(((o-=65536)>>10)+55296,o%1024+56320)}return r},Uh=hy?Object.fromEntries:function(t){for(var e={},r=0,i=t;r<i.length;r++){var n=i[r],o=n[0],s=n[1];e[o]=s}return e},Dh=py?function(t,e){return t.codePointAt(e)}:function(t,e){var r=t.length;if(!(e<0||e>=r)){var i=t.charCodeAt(e),n;return i<55296||i>56319||e+1===r||(n=t.charCodeAt(e+1))<56320||n>57343?i:(i-55296<<10)+(n-56320)+65536}},vy=fy?function(t){return t.trimStart()}:function(t){return t.replace(ay,"")},by=dy?function(t){return t.trimEnd()}:function(t){return t.replace(cy,"")};function Mh(t,e){return new RegExp(t,e)}var _a;if(Ha){var Vh=Mh("([^\\p{White_Space}\\p{Pattern_Syntax}]*)","yu");_a=function(t,e){var r;Vh.lastIndex=e;var i=Vh.exec(t);return(r=i[1])!==null&&r!==void 0?r:""}}else _a=function(t,e){for(var r=[];;){var i=Dh(t,e);if(i===void 0||Fh(i)||Ey(i))break;r.push(i),e+=i>=65536?2:1}return Ra.apply(void 0,r)};var wy=function(){function t(e,r){r===void 0&&(r={}),this.message=e,this.position={offset:0,line:1,column:1},this.ignoreTag=!!r.ignoreTag,this.locale=r.locale,this.requiresOtherClause=!!r.requiresOtherClause,this.shouldParseSkeletons=!!r.shouldParseSkeletons}return t.prototype.parse=function(){if(this.offset()!==0)throw Error("parser can only be used once");return this.parseMessage(0,"",!1)},t.prototype.parseMessage=function(e,r,i){for(var n=[];!this.isEOF();){var o=this.char();if(o===123){var s=this.parseArgument(e,i);if(s.err)return s;n.push(s.val)}else{if(o===125&&e>0)break;if(o===35&&(r==="plural"||r==="selectordinal")){var a=this.clonePosition();this.bump(),n.push({type:ce.pound,location:Y(a,this.clonePosition())})}else if(o===60&&!this.ignoreTag&&this.peek()===47){if(i)break;return this.error(X.UNMATCHED_CLOSING_TAG,Y(this.clonePosition(),this.clonePosition()))}else if(o===60&&!this.ignoreTag&&ja(this.peek()||0)){var s=this.parseTag(e,r);if(s.err)return s;n.push(s.val)}else{var s=this.parseLiteral(e,r);if(s.err)return s;n.push(s.val)}}}return{val:n,err:null}},t.prototype.parseTag=function(e,r){var i=this.clonePosition();this.bump();var n=this.parseTagName();if(this.bumpSpace(),this.bumpIf("/>"))return{val:{type:ce.literal,value:"<".concat(n,"/>"),location:Y(i,this.clonePosition())},err:null};if(this.bumpIf(">")){var o=this.parseMessage(e+1,r,!0);if(o.err)return o;var s=o.val,a=this.clonePosition();if(this.bumpIf("</")){if(this.isEOF()||!ja(this.char()))return this.error(X.INVALID_TAG,Y(a,this.clonePosition()));var l=this.clonePosition(),h=this.parseTagName();return n!==h?this.error(X.UNMATCHED_CLOSING_TAG,Y(l,this.clonePosition())):(this.bumpSpace(),this.bumpIf(">")?{val:{type:ce.tag,value:n,children:s,location:Y(i,this.clonePosition())},err:null}:this.error(X.INVALID_TAG,Y(a,this.clonePosition())))}else return this.error(X.UNCLOSED_TAG,Y(i,this.clonePosition()))}else return this.error(X.INVALID_TAG,Y(i,this.clonePosition()))},t.prototype.parseTagName=function(){var e=this.offset();for(this.bump();!this.isEOF()&&Ay(this.char());)this.bump();return this.message.slice(e,this.offset())},t.prototype.parseLiteral=function(e,r){for(var i=this.clonePosition(),n="";;){var o=this.tryParseQuote(r);if(o){n+=o;continue}var s=this.tryParseUnquoted(e,r);if(s){n+=s;continue}var a=this.tryParseLeftAngleBracket();if(a){n+=a;continue}break}var l=Y(i,this.clonePosition());return{val:{type:ce.literal,value:n,location:l},err:null}},t.prototype.tryParseLeftAngleBracket=function(){return!this.isEOF()&&this.char()===60&&(this.ignoreTag||!Sy(this.peek()||0))?(this.bump(),"<"):null},t.prototype.tryParseQuote=function(e){if(this.isEOF()||this.char()!==39)return null;switch(this.peek()){case 39:return this.bump(),this.bump(),"'";case 123:case 60:case 62:case 125:break;case 35:if(e==="plural"||e==="selectordinal")break;return null;default:return null}this.bump();var r=[this.char()];for(this.bump();!this.isEOF();){var i=this.char();if(i===39)if(this.peek()===39)r.push(39),this.bump();else{this.bump();break}else r.push(i);this.bump()}return Ra.apply(void 0,r)},t.prototype.tryParseUnquoted=function(e,r){if(this.isEOF())return null;var i=this.char();return i===60||i===123||i===35&&(r==="plural"||r==="selectordinal")||i===125&&e>0?null:(this.bump(),Ra(i))},t.prototype.parseArgument=function(e,r){var i=this.clonePosition();if(this.bump(),this.bumpSpace(),this.isEOF())return this.error(X.EXPECT_ARGUMENT_CLOSING_BRACE,Y(i,this.clonePosition()));if(this.char()===125)return this.bump(),this.error(X.EMPTY_ARGUMENT,Y(i,this.clonePosition()));var n=this.parseIdentifierIfPossible().value;if(!n)return this.error(X.MALFORMED_ARGUMENT,Y(i,this.clonePosition()));if(this.bumpSpace(),this.isEOF())return this.error(X.EXPECT_ARGUMENT_CLOSING_BRACE,Y(i,this.clonePosition()));switch(this.char()){case 125:return this.bump(),{val:{type:ce.argument,value:n,location:Y(i,this.clonePosition())},err:null};case 44:return this.bump(),this.bumpSpace(),this.isEOF()?this.error(X.EXPECT_ARGUMENT_CLOSING_BRACE,Y(i,this.clonePosition())):this.parseArgumentOptions(e,r,n,i);default:return this.error(X.MALFORMED_ARGUMENT,Y(i,this.clonePosition()))}},t.prototype.parseIdentifierIfPossible=function(){var e=this.clonePosition(),r=this.offset(),i=_a(this.message,r),n=r+i.length;this.bumpTo(n);var o=this.clonePosition(),s=Y(e,o);return{value:i,location:s}},t.prototype.parseArgumentOptions=function(e,r,i,n){var o,s=this.clonePosition(),a=this.parseIdentifierIfPossible().value,l=this.clonePosition();switch(a){case"":return this.error(X.EXPECT_ARGUMENT_TYPE,Y(s,l));case"number":case"date":case"time":{this.bumpSpace();var h=null;if(this.bumpIf(",")){this.bumpSpace();var p=this.clonePosition(),y=this.parseSimpleArgStyleIfPossible();if(y.err)return y;var B=by(y.val);if(B.length===0)return this.error(X.EXPECT_ARGUMENT_STYLE,Y(this.clonePosition(),this.clonePosition()));var w=Y(p,this.clonePosition());h={style:B,styleLocation:w}}var f=this.tryParseArgumentClose(n);if(f.err)return f;var d=Y(n,this.clonePosition());if(h&&Lh(h==null?void 0:h.style,"::",0)){var v=vy(h.style.slice(2));if(a==="number"){var y=this.parseNumberSkeletonFromString(v,h.styleLocation);return y.err?y:{val:{type:ce.number,value:i,location:d,style:y.val},err:null}}else{if(v.length===0)return this.error(X.EXPECT_DATE_TIME_SKELETON,d);var m=v;this.locale&&(m=oy(v,this.locale));var B={type:$r.dateTime,pattern:m,location:h.styleLocation,parsedOptions:this.shouldParseSkeletons?Yd(m):{}},S=a==="date"?ce.date:ce.time;return{val:{type:S,value:i,location:d,style:B},err:null}}}return{val:{type:a==="number"?ce.number:a==="date"?ce.date:ce.time,value:i,location:d,style:(o=h==null?void 0:h.style)!==null&&o!==void 0?o:null},err:null}}case"plural":case"selectordinal":case"select":{var A=this.clonePosition();if(this.bumpSpace(),!this.bumpIf(","))return this.error(X.EXPECT_SELECT_ARGUMENT_OPTIONS,Y(A,L({},A)));this.bumpSpace();var V=this.parseIdentifierIfPossible(),ne=0;if(a!=="select"&&V.value==="offset"){if(!this.bumpIf(":"))return this.error(X.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,Y(this.clonePosition(),this.clonePosition()));this.bumpSpace();var y=this.tryParseDecimalInteger(X.EXPECT_PLURAL_ARGUMENT_OFFSET_VALUE,X.INVALID_PLURAL_ARGUMENT_OFFSET_VALUE);if(y.err)return y;this.bumpSpace(),V=this.parseIdentifierIfPossible(),ne=y.val}var de=this.tryParsePluralOrSelectOptions(e,a,r,V);if(de.err)return de;var f=this.tryParseArgumentClose(n);if(f.err)return f;var te=Y(n,this.clonePosition());return a==="select"?{val:{type:ce.select,value:i,options:Uh(de.val),location:te},err:null}:{val:{type:ce.plural,value:i,options:Uh(de.val),offset:ne,pluralType:a==="plural"?"cardinal":"ordinal",location:te},err:null}}default:return this.error(X.INVALID_ARGUMENT_TYPE,Y(s,l))}},t.prototype.tryParseArgumentClose=function(e){return this.isEOF()||this.char()!==125?this.error(X.EXPECT_ARGUMENT_CLOSING_BRACE,Y(e,this.clonePosition())):(this.bump(),{val:!0,err:null})},t.prototype.parseSimpleArgStyleIfPossible=function(){for(var e=0,r=this.clonePosition();!this.isEOF();){var i=this.char();switch(i){case 39:{this.bump();var n=this.clonePosition();if(!this.bumpUntil("'"))return this.error(X.UNCLOSED_QUOTE_IN_ARGUMENT_STYLE,Y(n,this.clonePosition()));this.bump();break}case 123:{e+=1,this.bump();break}case 125:{if(e>0)e-=1;else return{val:this.message.slice(r.offset,this.offset()),err:null};break}default:this.bump();break}}return{val:this.message.slice(r.offset,this.offset()),err:null}},t.prototype.parseNumberSkeletonFromString=function(e,r){var i=[];try{i=ey(e)}catch{return this.error(X.INVALID_NUMBER_SKELETON,r)}return{val:{type:$r.number,tokens:i,location:r,parsedOptions:this.shouldParseSkeletons?ny(i):{}},err:null}},t.prototype.tryParsePluralOrSelectOptions=function(e,r,i,n){for(var o,s=!1,a=[],l=new Set,h=n.value,p=n.location;;){if(h.length===0){var y=this.clonePosition();if(r!=="select"&&this.bumpIf("=")){var B=this.tryParseDecimalInteger(X.EXPECT_PLURAL_ARGUMENT_SELECTOR,X.INVALID_PLURAL_ARGUMENT_SELECTOR);if(B.err)return B;p=Y(y,this.clonePosition()),h=this.message.slice(y.offset,this.offset())}else break}if(l.has(h))return this.error(r==="select"?X.DUPLICATE_SELECT_ARGUMENT_SELECTOR:X.DUPLICATE_PLURAL_ARGUMENT_SELECTOR,p);h==="other"&&(s=!0),this.bumpSpace();var w=this.clonePosition();if(!this.bumpIf("{"))return this.error(r==="select"?X.EXPECT_SELECT_ARGUMENT_SELECTOR_FRAGMENT:X.EXPECT_PLURAL_ARGUMENT_SELECTOR_FRAGMENT,Y(this.clonePosition(),this.clonePosition()));var f=this.parseMessage(e+1,r,i);if(f.err)return f;var d=this.tryParseArgumentClose(w);if(d.err)return d;a.push([h,{value:f.val,location:Y(w,this.clonePosition())}]),l.add(h),this.bumpSpace(),o=this.parseIdentifierIfPossible(),h=o.value,p=o.location}return a.length===0?this.error(r==="select"?X.EXPECT_SELECT_ARGUMENT_SELECTOR:X.EXPECT_PLURAL_ARGUMENT_SELECTOR,Y(this.clonePosition(),this.clonePosition())):this.requiresOtherClause&&!s?this.error(X.MISSING_OTHER_CLAUSE,Y(this.clonePosition(),this.clonePosition())):{val:a,err:null}},t.prototype.tryParseDecimalInteger=function(e,r){var i=1,n=this.clonePosition();this.bumpIf("+")||this.bumpIf("-")&&(i=-1);for(var o=!1,s=0;!this.isEOF();){var a=this.char();if(a>=48&&a<=57)o=!0,s=s*10+(a-48),this.bump();else break}var l=Y(n,this.clonePosition());return o?(s*=i,gy(s)?{val:s,err:null}:this.error(r,l)):this.error(e,l)},t.prototype.offset=function(){return this.position.offset},t.prototype.isEOF=function(){return this.offset()===this.message.length},t.prototype.clonePosition=function(){return{offset:this.position.offset,line:this.position.line,column:this.position.column}},t.prototype.char=function(){var e=this.position.offset;if(e>=this.message.length)throw Error("out of bound");var r=Dh(this.message,e);if(r===void 0)throw Error("Offset ".concat(e," is at invalid UTF-16 code unit boundary"));return r},t.prototype.error=function(e,r){return{val:null,err:{kind:e,message:this.message,location:r}}},t.prototype.bump=function(){if(!this.isEOF()){var e=this.char();e===10?(this.position.line+=1,this.position.column=1,this.position.offset+=1):(this.position.column+=1,this.position.offset+=e<65536?1:2)}},t.prototype.bumpIf=function(e){if(Lh(this.message,e,this.offset())){for(var r=0;r<e.length;r++)this.bump();return!0}return!1},t.prototype.bumpUntil=function(e){var r=this.offset(),i=this.message.indexOf(e,r);return i>=0?(this.bumpTo(i),!0):(this.bumpTo(this.message.length),!1)},t.prototype.bumpTo=function(e){if(this.offset()>e)throw Error("targetOffset ".concat(e," must be greater than or equal to the current offset ").concat(this.offset()));for(e=Math.min(e,this.message.length);;){var r=this.offset();if(r===e)break;if(r>e)throw Error("targetOffset ".concat(e," is at invalid UTF-16 code unit boundary"));if(this.bump(),this.isEOF())break}},t.prototype.bumpSpace=function(){for(;!this.isEOF()&&Fh(this.char());)this.bump()},t.prototype.peek=function(){if(this.isEOF())return null;var e=this.char(),r=this.offset(),i=this.message.charCodeAt(r+(e>=65536?2:1));return i??null},t}();function ja(t){return t>=97&&t<=122||t>=65&&t<=90}function Sy(t){return ja(t)||t===47}function Ay(t){return t===45||t===46||t>=48&&t<=57||t===95||t>=97&&t<=122||t>=65&&t<=90||t==183||t>=192&&t<=214||t>=216&&t<=246||t>=248&&t<=893||t>=895&&t<=8191||t>=8204&&t<=8205||t>=8255&&t<=8256||t>=8304&&t<=8591||t>=11264&&t<=12271||t>=12289&&t<=55295||t>=63744&&t<=64975||t>=65008&&t<=65533||t>=65536&&t<=983039}function Fh(t){return t>=9&&t<=13||t===32||t===133||t>=8206&&t<=8207||t===8232||t===8233}function Ey(t){return t>=33&&t<=35||t===36||t>=37&&t<=39||t===40||t===41||t===42||t===43||t===44||t===45||t>=46&&t<=47||t>=58&&t<=59||t>=60&&t<=62||t>=63&&t<=64||t===91||t===92||t===93||t===94||t===96||t===123||t===124||t===125||t===126||t===161||t>=162&&t<=165||t===166||t===167||t===169||t===171||t===172||t===174||t===176||t===177||t===182||t===187||t===191||t===215||t===247||t>=8208&&t<=8213||t>=8214&&t<=8215||t===8216||t===8217||t===8218||t>=8219&&t<=8220||t===8221||t===8222||t===8223||t>=8224&&t<=8231||t>=8240&&t<=8248||t===8249||t===8250||t>=8251&&t<=8254||t>=8257&&t<=8259||t===8260||t===8261||t===8262||t>=8263&&t<=8273||t===8274||t===8275||t>=8277&&t<=8286||t>=8592&&t<=8596||t>=8597&&t<=8601||t>=8602&&t<=8603||t>=8604&&t<=8607||t===8608||t>=8609&&t<=8610||t===8611||t>=8612&&t<=8613||t===8614||t>=8615&&t<=8621||t===8622||t>=8623&&t<=8653||t>=8654&&t<=8655||t>=8656&&t<=8657||t===8658||t===8659||t===8660||t>=8661&&t<=8691||t>=8692&&t<=8959||t>=8960&&t<=8967||t===8968||t===8969||t===8970||t===8971||t>=8972&&t<=8991||t>=8992&&t<=8993||t>=8994&&t<=9e3||t===9001||t===9002||t>=9003&&t<=9083||t===9084||t>=9085&&t<=9114||t>=9115&&t<=9139||t>=9140&&t<=9179||t>=9180&&t<=9185||t>=9186&&t<=9254||t>=9255&&t<=9279||t>=9280&&t<=9290||t>=9291&&t<=9311||t>=9472&&t<=9654||t===9655||t>=9656&&t<=9664||t===9665||t>=9666&&t<=9719||t>=9720&&t<=9727||t>=9728&&t<=9838||t===9839||t>=9840&&t<=10087||t===10088||t===10089||t===10090||t===10091||t===10092||t===10093||t===10094||t===10095||t===10096||t===10097||t===10098||t===10099||t===10100||t===10101||t>=10132&&t<=10175||t>=10176&&t<=10180||t===10181||t===10182||t>=10183&&t<=10213||t===10214||t===10215||t===10216||t===10217||t===10218||t===10219||t===10220||t===10221||t===10222||t===10223||t>=10224&&t<=10239||t>=10240&&t<=10495||t>=10496&&t<=10626||t===10627||t===10628||t===10629||t===10630||t===10631||t===10632||t===10633||t===10634||t===10635||t===10636||t===10637||t===10638||t===10639||t===10640||t===10641||t===10642||t===10643||t===10644||t===10645||t===10646||t===10647||t===10648||t>=10649&&t<=10711||t===10712||t===10713||t===10714||t===10715||t>=10716&&t<=10747||t===10748||t===10749||t>=10750&&t<=11007||t>=11008&&t<=11055||t>=11056&&t<=11076||t>=11077&&t<=11078||t>=11079&&t<=11084||t>=11085&&t<=11123||t>=11124&&t<=11125||t>=11126&&t<=11157||t===11158||t>=11159&&t<=11263||t>=11776&&t<=11777||t===11778||t===11779||t===11780||t===11781||t>=11782&&t<=11784||t===11785||t===11786||t===11787||t===11788||t===11789||t>=11790&&t<=11798||t===11799||t>=11800&&t<=11801||t===11802||t===11803||t===11804||t===11805||t>=11806&&t<=11807||t===11808||t===11809||t===11810||t===11811||t===11812||t===11813||t===11814||t===11815||t===11816||t===11817||t>=11818&&t<=11822||t===11823||t>=11824&&t<=11833||t>=11834&&t<=11835||t>=11836&&t<=11839||t===11840||t===11841||t===11842||t>=11843&&t<=11855||t>=11856&&t<=11857||t===11858||t>=11859&&t<=11903||t>=12289&&t<=12291||t===12296||t===12297||t===12298||t===12299||t===12300||t===12301||t===12302||t===12303||t===12304||t===12305||t>=12306&&t<=12307||t===12308||t===12309||t===12310||t===12311||t===12312||t===12313||t===12314||t===12315||t===12316||t===12317||t>=12318&&t<=12319||t===12320||t===12336||t===64830||t===64831||t>=65093&&t<=65094}function La(t){t.forEach(function(e){if(delete e.location,xh(e)||Ch(e))for(var r in e.options)delete e.options[r].location,La(e.options[r].value);else Eh(e)&&Th(e.style)||(Bh(e)||kh(e))&&Oa(e.style)?delete e.style.location:Ih(e)&&La(e.children)})}function By(t,e){e===void 0&&(e={}),e=L({shouldParseSkeletons:!0,requiresOtherClause:!0},e);var r=new wy(t,e).parse();if(r.err){var i=SyntaxError(X[r.err.kind]);throw i.location=r.err.location,i.originalMessage=r.err.message,i}return e!=null&&e.captureLocation||La(r.val),r.val}function dt(t,e){var r=e&&e.cache?e.cache:Ny,i=e&&e.serializer?e.serializer:Ty,n=e&&e.strategy?e.strategy:xy;return n(t,{cache:r,serializer:i})}function ky(t){return t==null||typeof t=="number"||typeof t=="boolean"}function $h(t,e,r,i){var n=ky(i)?i:r(i),o=e.get(n);return typeof o>"u"&&(o=t.call(this,i),e.set(n,o)),o}function Gh(t,e,r){var i=Array.prototype.slice.call(arguments,3),n=r(i),o=e.get(n);return typeof o>"u"&&(o=t.apply(this,i),e.set(n,o)),o}function Ua(t,e,r,i,n){return r.bind(e,t,i,n)}function xy(t,e){var r=t.length===1?$h:Gh;return Ua(t,this,r,e.cache.create(),e.serializer)}function Cy(t,e){return Ua(t,this,Gh,e.cache.create(),e.serializer)}function Iy(t,e){return Ua(t,this,$h,e.cache.create(),e.serializer)}var Ty=function(){return JSON.stringify(arguments)};function Da(){this.cache=Object.create(null)}Da.prototype.get=function(t){return this.cache[t]},Da.prototype.set=function(t,e){this.cache[t]=e};var Ny={create:function(){return new Da}},yt={variadic:Cy,monadic:Iy},gt;(function(t){t.MISSING_VALUE="MISSING_VALUE",t.INVALID_VALUE="INVALID_VALUE",t.MISSING_INTL_API="MISSING_INTL_API"})(gt||(gt={}));var $t=function(t){nt(e,t);function e(r,i,n){var o=t.call(this,r)||this;return o.code=i,o.originalMessage=n,o}return e.prototype.toString=function(){return"[formatjs Error: ".concat(this.code,"] ").concat(this.message)},e}(Error),Kh=function(t){nt(e,t);function e(r,i,n,o){return t.call(this,'Invalid values for "'.concat(r,'": "').concat(i,'". Options are "').concat(Object.keys(n).join('", "'),'"'),gt.INVALID_VALUE,o)||this}return e}($t),Oy=function(t){nt(e,t);function e(r,i,n){return t.call(this,'Value for "'.concat(r,'" must be of type ').concat(i),gt.INVALID_VALUE,n)||this}return e}($t),Py=function(t){nt(e,t);function e(r,i){return t.call(this,'The intl string context variable "'.concat(r,'" was not provided to the string "').concat(i,'"'),gt.MISSING_VALUE,i)||this}return e}($t),Oe;(function(t){t[t.literal=0]="literal",t[t.object=1]="object"})(Oe||(Oe={}));function Hy(t){return t.length<2?t:t.reduce(function(e,r){var i=e[e.length-1];return!i||i.type!==Oe.literal||r.type!==Oe.literal?e.push(r):i.value+=r.value,e},[])}function Ry(t){return typeof t=="function"}function co(t,e,r,i,n,o,s){if(t.length===1&&Ah(t[0]))return[{type:Oe.literal,value:t[0].value}];for(var a=[],l=0,h=t;l<h.length;l++){var p=h[l];if(Ah(p)){a.push({type:Oe.literal,value:p.value});continue}if(Xd(p)){typeof o=="number"&&a.push({type:Oe.literal,value:r.getNumberFormat(e).format(o)});continue}var y=p.value;if(!(n&&y in n))throw new Py(y,s);var B=n[y];if(Jd(p)){(!B||typeof B=="string"||typeof B=="number")&&(B=typeof B=="string"||typeof B=="number"?String(B):""),a.push({type:typeof B=="string"?Oe.literal:Oe.object,value:B});continue}if(Bh(p)){var w=typeof p.style=="string"?i.date[p.style]:Oa(p.style)?p.style.parsedOptions:void 0;a.push({type:Oe.literal,value:r.getDateTimeFormat(e,w).format(B)});continue}if(kh(p)){var w=typeof p.style=="string"?i.time[p.style]:Oa(p.style)?p.style.parsedOptions:i.time.medium;a.push({type:Oe.literal,value:r.getDateTimeFormat(e,w).format(B)});continue}if(Eh(p)){var w=typeof p.style=="string"?i.number[p.style]:Th(p.style)?p.style.parsedOptions:void 0;w&&w.scale&&(B=B*(w.scale||1)),a.push({type:Oe.literal,value:r.getNumberFormat(e,w).format(B)});continue}if(Ih(p)){var f=p.children,d=p.value,v=n[d];if(!Ry(v))throw new Oy(d,"function",s);var m=co(f,e,r,i,n,o),S=v(m.map(function(ne){return ne.value}));Array.isArray(S)||(S=[S]),a.push.apply(a,S.map(function(ne){return{type:typeof ne=="string"?Oe.literal:Oe.object,value:ne}}))}if(xh(p)){var A=p.options[B]||p.options.other;if(!A)throw new Kh(p.value,B,Object.keys(p.options),s);a.push.apply(a,co(A.value,e,r,i,n));continue}if(Ch(p)){var A=p.options["=".concat(B)];if(!A){if(!Intl.PluralRules)throw new $t(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,gt.MISSING_INTL_API,s);var V=r.getPluralRules(e,{type:p.pluralType}).select(B-(p.offset||0));A=p.options[V]||p.options.other}if(!A)throw new Kh(p.value,B,Object.keys(p.options),s);a.push.apply(a,co(A.value,e,r,i,n,B-(p.offset||0)));continue}}return Hy(a)}function _y(t,e){return e?L(L(L({},t||{}),e||{}),Object.keys(t).reduce(function(r,i){return r[i]=L(L({},t[i]),e[i]||{}),r},{})):t}function jy(t,e){return e?Object.keys(t).reduce(function(r,i){return r[i]=_y(t[i],e[i]),r},L({},t)):t}function Ma(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,r){t[e]=r}}}}}function Ly(t){return t===void 0&&(t={number:{},dateTime:{},pluralRules:{}}),{getNumberFormat:dt(function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new((e=Intl.NumberFormat).bind.apply(e,Rt([void 0],r,!1)))},{cache:Ma(t.number),strategy:yt.variadic}),getDateTimeFormat:dt(function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new((e=Intl.DateTimeFormat).bind.apply(e,Rt([void 0],r,!1)))},{cache:Ma(t.dateTime),strategy:yt.variadic}),getPluralRules:dt(function(){for(var e,r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return new((e=Intl.PluralRules).bind.apply(e,Rt([void 0],r,!1)))},{cache:Ma(t.pluralRules),strategy:yt.variadic})}}var qh=function(){function t(e,r,i,n){r===void 0&&(r=t.defaultLocale);var o=this;if(this.formatterCache={number:{},dateTime:{},pluralRules:{}},this.format=function(l){var h=o.formatToParts(l);if(h.length===1)return h[0].value;var p=h.reduce(function(y,B){return!y.length||B.type!==Oe.literal||typeof y[y.length-1]!="string"?y.push(B.value):y[y.length-1]+=B.value,y},[]);return p.length<=1?p[0]||"":p},this.formatToParts=function(l){return co(o.ast,o.locales,o.formatters,o.formats,l,void 0,o.message)},this.resolvedOptions=function(){var l;return{locale:((l=o.resolvedLocale)===null||l===void 0?void 0:l.toString())||Intl.NumberFormat.supportedLocalesOf(o.locales)[0]}},this.getAst=function(){return o.ast},this.locales=r,this.resolvedLocale=t.resolveLocale(r),typeof e=="string"){if(this.message=e,!t.__parse)throw new TypeError("IntlMessageFormat.__parse must be set to process `message` of type `string`");var s=n||{};s.formatters;var a=Wd(s,["formatters"]);this.ast=t.__parse(e,L(L({},a),{locale:this.resolvedLocale}))}else this.ast=e;if(!Array.isArray(this.ast))throw new TypeError("A message must be provided as a String or AST.");this.formats=jy(t.formats,i),this.formatters=n&&n.formatters||Ly(this.formatterCache)}return Object.defineProperty(t,"defaultLocale",{get:function(){return t.memoizedDefaultLocale||(t.memoizedDefaultLocale=new Intl.NumberFormat().resolvedOptions().locale),t.memoizedDefaultLocale},enumerable:!1,configurable:!0}),t.memoizedDefaultLocale=null,t.resolveLocale=function(e){if(!(typeof Intl.Locale>"u")){var r=Intl.NumberFormat.supportedLocalesOf(e);return r.length>0?new Intl.Locale(r[0]):new Intl.Locale(typeof e=="string"?e:e[0])}},t.__parse=By,t.formats={number:{integer:{maximumFractionDigits:0},currency:{style:"currency"},percent:{style:"percent"}},date:{short:{month:"numeric",day:"numeric",year:"2-digit"},medium:{month:"short",day:"numeric",year:"numeric"},long:{month:"long",day:"numeric",year:"numeric"},full:{weekday:"long",month:"long",day:"numeric",year:"numeric"}},time:{short:{hour:"numeric",minute:"numeric"},medium:{hour:"numeric",minute:"numeric",second:"numeric"},long:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"},full:{hour:"numeric",minute:"numeric",second:"numeric",timeZoneName:"short"}}},t}(),hr;(function(t){t.FORMAT_ERROR="FORMAT_ERROR",t.UNSUPPORTED_FORMATTER="UNSUPPORTED_FORMATTER",t.INVALID_CONFIG="INVALID_CONFIG",t.MISSING_DATA="MISSING_DATA",t.MISSING_TRANSLATION="MISSING_TRANSLATION"})(hr||(hr={}));var xi=function(t){nt(e,t);function e(r,i,n){var o=this,s=n?n instanceof Error?n:new Error(String(n)):void 0;return o=t.call(this,"[@formatjs/intl Error ".concat(r,"] ").concat(i,`
`).concat(s?`
`.concat(s.message,`
`).concat(s.stack):""))||this,o.code=r,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(o,e),o}return e}(Error),Uy=function(t){nt(e,t);function e(r,i){return t.call(this,hr.UNSUPPORTED_FORMATTER,r,i)||this}return e}(xi),Dy=function(t){nt(e,t);function e(r,i){return t.call(this,hr.INVALID_CONFIG,r,i)||this}return e}(xi),zh=function(t){nt(e,t);function e(r,i){return t.call(this,hr.MISSING_DATA,r,i)||this}return e}(xi),Je=function(t){nt(e,t);function e(r,i,n){var o=t.call(this,hr.FORMAT_ERROR,"".concat(r,`
Locale: `).concat(i,`
`),n)||this;return o.locale=i,o}return e}(xi),Va=function(t){nt(e,t);function e(r,i,n,o){var s=t.call(this,"".concat(r,`
MessageID: `).concat(n==null?void 0:n.id,`
Default Message: `).concat(n==null?void 0:n.defaultMessage,`
Description: `).concat(n==null?void 0:n.description,`
`),i,o)||this;return s.descriptor=n,s.locale=i,s}return e}(Je),My=function(t){nt(e,t);function e(r,i){var n=t.call(this,hr.MISSING_TRANSLATION,'Missing message: "'.concat(r.id,'" for locale "').concat(i,'", using ').concat(r.defaultMessage?"default message (".concat(typeof r.defaultMessage=="string"?r.defaultMessage:r.defaultMessage.map(function(o){var s;return(s=o.value)!==null&&s!==void 0?s:JSON.stringify(o)}).join(),")"):"id"," as fallback."))||this;return n.descriptor=r,n}return e}(xi);function pr(t,e,r){return r===void 0&&(r={}),e.reduce(function(i,n){return n in t?i[n]=t[n]:n in r&&(i[n]=r[n]),i},{})}var Vy=function(t){},Fy=function(t){},$y={formats:{},messages:{},timeZone:void 0,defaultLocale:"en",defaultFormats:{},fallbackOnEmptyString:!0,onError:Vy,onWarn:Fy};function Wh(){return{dateTime:{},number:{},message:{},relativeTime:{},pluralRules:{},list:{},displayNames:{}}}function fr(t){return{create:function(){return{get:function(e){return t[e]},set:function(e,r){t[e]=r}}}}}function Gy(t){t===void 0&&(t=Wh());var e=Intl.RelativeTimeFormat,r=Intl.ListFormat,i=Intl.DisplayNames,n=dt(function(){for(var a,l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];return new((a=Intl.DateTimeFormat).bind.apply(a,Rt([void 0],l,!1)))},{cache:fr(t.dateTime),strategy:yt.variadic}),o=dt(function(){for(var a,l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];return new((a=Intl.NumberFormat).bind.apply(a,Rt([void 0],l,!1)))},{cache:fr(t.number),strategy:yt.variadic}),s=dt(function(){for(var a,l=[],h=0;h<arguments.length;h++)l[h]=arguments[h];return new((a=Intl.PluralRules).bind.apply(a,Rt([void 0],l,!1)))},{cache:fr(t.pluralRules),strategy:yt.variadic});return{getDateTimeFormat:n,getNumberFormat:o,getMessageFormat:dt(function(a,l,h,p){return new qh(a,l,h,L({formatters:{getNumberFormat:o,getDateTimeFormat:n,getPluralRules:s}},p||{}))},{cache:fr(t.message),strategy:yt.variadic}),getRelativeTimeFormat:dt(function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return new(e.bind.apply(e,Rt([void 0],a,!1)))},{cache:fr(t.relativeTime),strategy:yt.variadic}),getPluralRules:s,getListFormat:dt(function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return new(r.bind.apply(r,Rt([void 0],a,!1)))},{cache:fr(t.list),strategy:yt.variadic}),getDisplayNames:dt(function(){for(var a=[],l=0;l<arguments.length;l++)a[l]=arguments[l];return new(i.bind.apply(i,Rt([void 0],a,!1)))},{cache:fr(t.displayNames),strategy:yt.variadic})}}function Fa(t,e,r,i){var n=t&&t[e],o;if(n&&(o=n[r]),o)return o;i(new Uy("No ".concat(e," format named: ").concat(r)))}function Ky(t,e,r){if(r===void 0&&(r=Error),!t)throw new r(e)}function lo(t,e){return Object.keys(t).reduce(function(r,i){return r[i]=L({timeZone:e},t[i]),r},{})}function Jh(t,e){var r=Object.keys(L(L({},t),e));return r.reduce(function(i,n){return i[n]=L(L({},t[n]||{}),e[n]||{}),i},{})}function Xh(t,e){if(!e)return t;var r=qh.formats;return L(L(L({},r),t),{date:Jh(lo(r.date,e),lo(t.date||{},e)),time:Jh(lo(r.time,e),lo(t.time||{},e))})}var Zh=function(t,e,r,i,n){var o=t.locale,s=t.formats,a=t.messages,l=t.defaultLocale,h=t.defaultFormats,p=t.fallbackOnEmptyString,y=t.onError,B=t.timeZone,w=t.defaultRichTextElements;r===void 0&&(r={id:""});var f=r.id,d=r.defaultMessage;Ky(!!f,"[@formatjs/intl] An `id` must be provided to format a message. You can either:\n1. Configure your build toolchain with [babel-plugin-formatjs](https://formatjs.io/docs/tooling/babel-plugin)\nor [@formatjs/ts-transformer](https://formatjs.io/docs/tooling/ts-transformer) OR\n2. Configure your `eslint` config to include [eslint-plugin-formatjs](https://formatjs.io/docs/tooling/linter#enforce-id)\nto autofix this issue");var v=String(f),m=a&&Object.prototype.hasOwnProperty.call(a,v)&&a[v];if(Array.isArray(m)&&m.length===1&&m[0].type===ce.literal)return m[0].value;if(!i&&m&&typeof m=="string"&&!w)return m.replace(/'\{(.*?)\}'/gi,"{$1}");if(i=L(L({},w),i||{}),s=Xh(s,B),h=Xh(h,B),!m){if(p===!1&&m==="")return m;if((!d||o&&o.toLowerCase()!==l.toLowerCase())&&y(new My(r,o)),d)try{var S=e.getMessageFormat(d,l,h,n);return S.format(i)}catch(A){return y(new Va('Error formatting default message for: "'.concat(v,'", rendering default message verbatim'),o,r,A)),typeof d=="string"?d:v}return v}try{var S=e.getMessageFormat(m,o,s,L({formatters:e},n||{}));return S.format(i)}catch(A){y(new Va('Error formatting message: "'.concat(v,'", using ').concat(d?"default message":"id"," as fallback."),o,r,A))}if(d)try{var S=e.getMessageFormat(d,l,h,n);return S.format(i)}catch(A){y(new Va('Error formatting the default message for: "'.concat(v,'", rendering message verbatim'),o,r,A))}return typeof m=="string"?m:typeof d=="string"?d:v},Yh=["formatMatcher","timeZone","hour12","weekday","era","year","month","day","hour","minute","second","timeZoneName","hourCycle","dateStyle","timeStyle","calendar","numberingSystem","fractionalSecondDigits"];function uo(t,e,r,i){var n=t.locale,o=t.formats,s=t.onError,a=t.timeZone;i===void 0&&(i={});var l=i.format,h=L(L({},a&&{timeZone:a}),l&&Fa(o,e,l,s)),p=pr(i,Yh,h);return e==="time"&&!p.hour&&!p.minute&&!p.second&&!p.timeStyle&&!p.dateStyle&&(p=L(L({},p),{hour:"numeric",minute:"numeric"})),r(n,p)}function qy(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=r[0],o=r[1],s=o===void 0?{}:o,a=typeof n=="string"?new Date(n||0):n;try{return uo(t,"date",e,s).format(a)}catch(l){t.onError(new Je("Error formatting date.",t.locale,l))}return String(a)}function zy(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=r[0],o=r[1],s=o===void 0?{}:o,a=typeof n=="string"?new Date(n||0):n;try{return uo(t,"time",e,s).format(a)}catch(l){t.onError(new Je("Error formatting time.",t.locale,l))}return String(a)}function Wy(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=r[0],o=r[1],s=r[2],a=s===void 0?{}:s,l=t.timeZone,h=t.locale,p=t.onError,y=pr(a,Yh,l?{timeZone:l}:{});try{return e(h,y).formatRange(n,o)}catch(B){p(new Je("Error formatting date time range.",t.locale,B))}return String(n)}function Jy(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=r[0],o=r[1],s=o===void 0?{}:o,a=typeof n=="string"?new Date(n||0):n;try{return uo(t,"date",e,s).formatToParts(a)}catch(l){t.onError(new Je("Error formatting date.",t.locale,l))}return[]}function Xy(t,e){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];var n=r[0],o=r[1],s=o===void 0?{}:o,a=typeof n=="string"?new Date(n||0):n;try{return uo(t,"time",e,s).formatToParts(a)}catch(l){t.onError(new Je("Error formatting time.",t.locale,l))}return[]}var Zy=["style","type","fallback","languageDisplay"];function Yy(t,e,r,i){var n=t.locale,o=t.onError,s=Intl.DisplayNames;s||o(new $t(`Intl.DisplayNames is not available in this environment.
Try polyfilling it using "@formatjs/intl-displaynames"
`,gt.MISSING_INTL_API));var a=pr(i,Zy);try{return e(n,a).of(r)}catch(l){o(new Je("Error formatting display name.",n,l))}}var Qy=["type","style"],Qh=Date.now();function eg(t){return"".concat(Qh,"_").concat(t,"_").concat(Qh)}function tg(t,e,r,i){i===void 0&&(i={});var n=ep(t,e,r,i).reduce(function(o,s){var a=s.value;return typeof a!="string"?o.push(a):typeof o[o.length-1]=="string"?o[o.length-1]+=a:o.push(a),o},[]);return n.length===1?n[0]:n.length===0?"":n}function ep(t,e,r,i){var n=t.locale,o=t.onError;i===void 0&&(i={});var s=Intl.ListFormat;s||o(new $t(`Intl.ListFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-listformat"
`,gt.MISSING_INTL_API));var a=pr(i,Qy);try{var l={},h=r.map(function(p,y){if(typeof p=="object"){var B=eg(y);return l[B]=p,B}return String(p)});return e(n,a).formatToParts(h).map(function(p){return p.type==="literal"?p:L(L({},p),{value:l[p.value]||p.value})})}catch(p){o(new Je("Error formatting list.",n,p))}return r}var rg=["type"];function ig(t,e,r,i){var n=t.locale,o=t.onError;i===void 0&&(i={}),Intl.PluralRules||o(new $t(`Intl.PluralRules is not available in this environment.
Try polyfilling it using "@formatjs/intl-pluralrules"
`,gt.MISSING_INTL_API));var s=pr(i,rg);try{return e(n,s).select(r)}catch(a){o(new Je("Error formatting plural.",n,a))}return"other"}var ng=["numeric","style"];function og(t,e,r){var i=t.locale,n=t.formats,o=t.onError;r===void 0&&(r={});var s=r.format,a=!!s&&Fa(n,"relative",s,o)||{},l=pr(r,ng,a);return e(i,l)}function sg(t,e,r,i,n){n===void 0&&(n={}),i||(i="second");var o=Intl.RelativeTimeFormat;o||t.onError(new $t(`Intl.RelativeTimeFormat is not available in this environment.
Try polyfilling it using "@formatjs/intl-relativetimeformat"
`,gt.MISSING_INTL_API));try{return og(t,e,n).format(r,i)}catch(s){t.onError(new Je("Error formatting relative time.",t.locale,s))}return String(r)}var ag=["style","currency","currencyDisplay","unit","unitDisplay","useGrouping","minimumIntegerDigits","minimumFractionDigits","maximumFractionDigits","minimumSignificantDigits","maximumSignificantDigits","compactDisplay","currencyDisplay","currencySign","notation","signDisplay","unit","unitDisplay","numberingSystem"];function tp(t,e,r){var i=t.locale,n=t.formats,o=t.onError;r===void 0&&(r={});var s=r.format,a=s&&Fa(n,"number",s,o)||{},l=pr(r,ag,a);return e(i,l)}function cg(t,e,r,i){i===void 0&&(i={});try{return tp(t,e,i).format(r)}catch(n){t.onError(new Je("Error formatting number.",t.locale,n))}return String(r)}function lg(t,e,r,i){i===void 0&&(i={});try{return tp(t,e,i).formatToParts(r)}catch(n){t.onError(new Je("Error formatting number.",t.locale,n))}return[]}function ug(t){var e=t?t[Object.keys(t)[0]]:void 0;return typeof e=="string"}function hg(t){t.onWarn&&t.defaultRichTextElements&&ug(t.messages||{})&&t.onWarn(`[@formatjs/intl] "defaultRichTextElements" was specified but "message" was not pre-compiled. 
Please consider using "@formatjs/cli" to pre-compile your messages for performance.
For more details see https://formatjs.io/docs/getting-started/message-distribution`)}function pg(t,e){var r=Gy(e),i=L(L({},$y),t),n=i.locale,o=i.defaultLocale,s=i.onError;return n?!Intl.NumberFormat.supportedLocalesOf(n).length&&s?s(new zh('Missing locale data for locale: "'.concat(n,'" in Intl.NumberFormat. Using default locale: "').concat(o,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):!Intl.DateTimeFormat.supportedLocalesOf(n).length&&s&&s(new zh('Missing locale data for locale: "'.concat(n,'" in Intl.DateTimeFormat. Using default locale: "').concat(o,'" as fallback. See https://formatjs.io/docs/react-intl#runtime-requirements for more details'))):(s&&s(new Dy('"locale" was not configured, using "'.concat(o,'" as fallback. See https://formatjs.io/docs/react-intl/api#intlshape for more details'))),i.locale=i.defaultLocale||"en"),hg(i),L(L({},i),{formatters:r,formatNumber:cg.bind(null,i,r.getNumberFormat),formatNumberToParts:lg.bind(null,i,r.getNumberFormat),formatRelativeTime:sg.bind(null,i,r.getRelativeTimeFormat),formatDate:qy.bind(null,i,r.getDateTimeFormat),formatDateToParts:Jy.bind(null,i,r.getDateTimeFormat),formatTime:zy.bind(null,i,r.getDateTimeFormat),formatDateTimeRange:Wy.bind(null,i,r.getDateTimeFormat),formatTimeToParts:Xy.bind(null,i,r.getDateTimeFormat),formatPlural:ig.bind(null,i,r.getPluralRules),formatMessage:Zh.bind(null,i,r),$t:Zh.bind(null,i,r),formatList:tg.bind(null,i,r.getListFormat),formatListToParts:ep.bind(null,i,r.getListFormat),formatDisplayName:Yy.bind(null,i,r.getDisplayNames)})}var fg=Ci;Ci.flatten=Ci,Ci.unflatten=np;function rp(t){return t&&t.constructor&&typeof t.constructor.isBuffer=="function"&&t.constructor.isBuffer(t)}function ip(t){return t}function Ci(t,e){e=e||{};const r=e.delimiter||".",i=e.maxDepth,n=e.transformKey||ip,o={};function s(a,l,h){h=h||1,Object.keys(a).forEach(function(p){const y=a[p],B=e.safe&&Array.isArray(y),w=Object.prototype.toString.call(y),f=rp(y),d=w==="[object Object]"||w==="[object Array]",v=l?l+r+n(p):n(p);if(!B&&!f&&d&&Object.keys(y).length&&(!e.maxDepth||h<i))return s(y,v,h+1);o[v]=y})}return s(t),o}function np(t,e){e=e||{};const r=e.delimiter||".",i=e.overwrite||!1,n=e.transformKey||ip,o={};if(rp(t)||Object.prototype.toString.call(t)!=="[object Object]")return t;function s(h){const p=Number(h);return isNaN(p)||h.indexOf(".")!==-1||e.object?h:p}function a(h,p,y){return Object.keys(y).reduce(function(B,w){return B[h+r+w]=y[w],B},p)}function l(h){const p=Object.prototype.toString.call(h),y=p==="[object Array]",B=p==="[object Object]";if(h){if(y)return!h.length;if(B)return!Object.keys(h).length}else return!0}return t=Object.keys(t).reduce(function(h,p){const y=Object.prototype.toString.call(t[p]);return!(y==="[object Object]"||y==="[object Array]")||l(t[p])?(h[p]=t[p],h):a(p,h,Ci(t[p],e))},{}),Object.keys(t).forEach(function(h){const p=h.split(r).map(n);let y=s(p.shift()),B=s(p[0]),w=o;for(;B!==void 0;){if(y==="__proto__")return;const f=Object.prototype.toString.call(w[y]),d=f==="[object Object]"||f==="[object Array]";if(!i&&!d&&typeof w[y]<"u")return;(i&&!d||!i&&w[y]==null)&&(w[y]=typeof B=="number"&&!e.object?[]:{}),w=w[y],p.length>0&&(y=s(p.shift()),B=s(p[0]))}w[y]=np(t[h],e)}),o}const dg=Wh(),yg=(t,e,r=!1)=>{const i=pg({locale:t,messages:fg.flatten(e,{safe:!0})},dg),{$t:n,...o}=i,s=o;return{t:(a,l,h)=>s.formatMessage({id:a},l,h),te:a=>!!s.messages[a],tm:a=>s.messages[a]||[],...s,source:e}},gg={fail:"Failed to copy id to clipboard",success:{prefix:"Successfully",content:" copied to clipboard"}},mg="Copy to clipboard",vg={message:gg,iconTitle:mg},bg="kong-ui-copy-uuid-notify",wg={class:"kong-ui-copy-uuid"},Sg=["title"],Ag={class:"uuid-icon-wrapper"},Eg=["onClick"],Bg=qt({__name:"CopyUuid",props:{uuid:{type:String,required:!0},truncated:{type:Boolean,default:!0},useMono:{type:Boolean,default:!0},isHidden:{type:Boolean,default:!1},notify:{type:Function,default:void 0},iconColor:{type:String,default:"var(--black-45, rgba(0, 0, 0, 0.45))"}},emits:["success","error"],setup(t,{emit:e}){const r=t,{t:i}=yg("en-us",vg),n=15,o=r.notify||Wg(bg,()=>{}),s=a=>{if(!a(r.uuid)){typeof o=="function"&&o({type:"error",message:i("message.fail")}),e("error",r.uuid);return}const l=r.uuid.length>n,h=r.isHidden?i("message.success.prefix"):`"${r.uuid.substring(0,n)+(l?"...":"")}"`;typeof o=="function"&&o({type:"success",message:`${h}${i("message.success.content")}`}),e("success",r.uuid)};return(a,l)=>{const h=he("KIcon"),p=he("KClipboardProvider");return Z(),pe("div",wg,[me("div",{"data-testid":"copy-id",title:t.uuid},[me("div",{class:Jg(["uuid-container",t.truncated?"truncated-uuid":null,t.useMono?"mono":null])},J(t.isHidden?"**********":t.uuid),3)],8,Sg),me("div",Ag,[$(p,null,{default:R(({copyToClipboard:y})=>[me("span",{"data-testid":"copy-to-clipboard",role:"button",tabindex:"0",onClick:nc(B=>s(y),["stop"])},[$(h,{class:"uuid-icon",color:t.iconColor,icon:"copy",size:"16",title:T(i)("iconTitle")},null,8,["color","title"])],8,Eg)]),_:1})])])}}}),kg=(t,e)=>{const r=t.__vccOpts||t;for(const[i,n]of e)r[i]=n;return r},xg=kg(Bg,[["__scopeId","data-v-9725a290"]]);function $a(t={}){return{axiosInstance:Xg.create({withCredentials:!0,timeout:3e4,...t})}}function Cg(t,e){const r=T(e),i=ve(()=>t.apiBaseUrl.startsWith("/")?new URL(`${window.location.origin}${r}`):new URL(r));return i.value.search="",n=>`${i.value.href}/${n}`}const Ig={message:"Are you sure you want to delete this {entityType}?",messageWithName:"Are you sure you want to delete this {entityType} {entityName}?"},Tg={actions:{save:"Save",cancel:"Cancel",back:"Back"},errors:{edit:"The entity could not be edited at this time."}},Ng={emptyState:{noSearchResultsTitle:"No results found",noSearchResultsMessage:"Please adjust the criteria and try again.",noSearchResultsCtaText:"Clear"}},Og={filterButtonText:"Filter",fieldLabel:"Filter by:",inputPlaceholder:"Enter a value",selectPlaceholder:"Select an item",applyButtonText:"Apply",clearButtonText:"Clear",clearAllButtonText:"Clear all filters"},Pg={errors:{fetch:"Could not fetch available items",invalid:"Please select a valid value"}},Hg={unexpected:"An unexpected error has occurred"},Rg={enable:{title:"Enable {entityType}",message:"Are you sure you want to enable the {entityType} {entityName}?",confirmText:"Yes, enable"},disable:{title:"Disable {entityType}",message:"Are you sure you want to disable the {entityType} {entityName}?",confirmText:"Yes, disable"}},_g={deleteModal:Ig,baseForm:Tg,baseTable:Ng,filter:Og,debouncedFilter:Pg,errors:Hg,toggleModal:Rg};function Ga(){const t=qp("en-us",_g);return{i18n:t,i18nT:zp(t)}}function jg(){const{i18n:{t}}=Ga();return{getMessageFromError:e=>{var r,i,n;if(!e)return t("errors.unexpected");if((r=e==null?void 0:e.response)!=null&&r.data){if(e.response.data.detail)return e.response.data.detail;if((i=e.response.data.details)!=null&&i.length)return e.response.data.details.map(o=>{let s=t("errors.unexpected");return o.messages&&typeof o.messages=="object"&&o.messages.length&&(s=o.messages.join(", ")),o.field?`${o.field} - ${s}`:s}).join("; ");if(e.response.data.message){const{message:o}=e.response.data;return Array.isArray(o)?(n=o[0])!=null&&n.constraints?Object.values(o[0].constraints)[0]:o[0]:o}if(typeof e.response.data=="string")return e.response.data;if(typeof e.response.data=="object")return Object.keys(e.response.data).map(o=>`${o} ${e.response.data[o]}`).join(", ")}return e.message||t("errors.unexpected")}}}function op(t,e){const r=ae(T(t)),i=ae(T(e)),n=ve(()=>!!(r.value.app==="konnect"||r.value.isExactMatch)),o=ve(()=>i.value.startsWith("/")?new URL(`${window.location.origin}${i.value}`):new URL(i.value));return s=>{const{page:a,pageSize:l,offset:h,sortColumnKey:p,sortColumnOrder:y,query:B}=s;try{let w=new URL(o.value.href);return n.value&&B?(w.search="",w=new URL(`${w.href}/${B}/`)):(n.value||new URLSearchParams(B).forEach((f,d)=>{w.searchParams.append(d,f)}),p&&w.searchParams.append("sort_by",p),y==="desc"&&w.searchParams.append("sort_desc","1"),w.searchParams.append("size",String(l))),h&&a!==1&&w.searchParams.append("offset",String(h)),w.href}catch(w){return console.error("RouteList(fetcher)",w),i.value}}}function Lg(){return{debounce:(t,e)=>{let r;return(...i)=>{clearTimeout(r),r=window==null?void 0:window.setTimeout(()=>{t(...i)},e)}}}}const Ka="khcp-user-table-preferences",Ug={pageSize:30,sortColumnKey:void 0,sortColumnOrder:void 0};function Dg(){const t=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(i){console.error("useTablePreferences(tryParseJson)",i);return}},e=()=>{const r=t(localStorage.getItem(Ka));return!r||!Object.keys(r).length?new Map:new Map(Object.entries(r))};return{setTablePreferences:(r,i)=>{try{const n=e();n.set(r,i),localStorage.setItem(Ka,JSON.stringify(Object.fromEntries(n.entries())))}catch(n){console.error("useTablePreferences(setTablePreferences)",n)}},getTablePreferences:r=>{const i=e();return(i==null?void 0:i.get(r))||void 0||Ug},deleteAllTablePreferences:()=>{localStorage.removeItem(Ka)}}}function Mg(t,e,r){r||(r="100");const{axiosInstance:i}=$a({headers:t.requestHeaders}),{i18n:{t:n}}=Ga(),{debounce:o}=Lg(),s=o(async m=>{await v(m)},200),a=ae(!1),l=ae(""),h=ae(""),p=ae([]),y=ae(void 0),B=T(e);let w=`${t.apiBaseUrl}${B}`;t.app==="konnect"?w=w.replace(/{controlPlaneId}/gi,(t==null?void 0:t.controlPlaneId)||""):t.app==="kongManager"&&(w=w.replace(/{workspace}/gi,(t==null?void 0:t.workspace)||""));const f=async()=>{try{a.value=!0;const{data:m}=await i.get(`${w}?size=${r}`);m!=null&&m.next||(y.value=m.data),m!=null&&m.data&&(p.value=m.data)}catch{p.value=[],l.value=n("debouncedFilter.errors.fetch")}finally{a.value=!1}},d=ae(""),v=async m=>{var S,A;if(d.value!==m)if(d.value=m||"",y.value===void 0)try{a.value=!0,l.value="",h.value="";let V=w+"";m&&(V+=`/${m}`);const{data:ne}=await i.get(`${V}?size=${r}`);ne!=null&&ne.data?p.value=ne.data:ne!=null&&ne.id?p.value=[ne]:p.value=[]}catch(V){((S=V==null?void 0:V.response)==null?void 0:S.status)===404?h.value=n("debouncedFilter.errors.invalid"):(p.value=[],l.value=n("debouncedFilter.errors.fetch"))}finally{a.value=!1}else a.value=!0,h.value="",m?(p.value=(A=y.value)==null?void 0:A.filter(V=>V.id.includes(m)),(!p.value||!p.value.length)&&(h.value=n("debouncedFilter.errors.invalid"))):p.value=y.value,a.value=!1};return{loading:a,error:l,validationError:h,results:p,allRecords:y,loadItems:f,debouncedQueryChange:s}}var qa=(t=>(t.GatewayService="service",t.Route="route",t.Consumer="consumer",t.ConsumerGroup="consumer group",t.Plugin="plugin",t.Upstream="upstream",t.Certificate="certificate",t.CACertificate="ca certificate",t.SNI="SNI",t.Key="key",t.KeySet="key set",t.Vault="vault",t.Application="application",t.Developer="developer",t.acls="ACL Credential",t["basic-auth"]="Basic Auth Credential",t["key-auth"]="Key Auth Credential",t["key-auth-enc"]="Key Auth Encrypted Credential",t.oauth2="OAuth 2.0 Credential",t["hmac-auth"]="HMAC Credential",t.jwt="JWT Credential",t.Target="target",t))(qa||{}),Xe=(t=>(t[t.Loading=0]="Loading",t[t.Idle=1]="Idle",t[t.NoResults=2]="NoResults",t[t.Error=3]="Error",t))(Xe||{});function Vg(t,e,r="data"){const i=T(e),{axiosInstance:n}=$a({headers:t.requestHeaders}),o=op(t,i),s=ae({status:Xe.Idle});return{fetcher:async a=>{try{s.value={status:Xe.Loading};const l=o(a),{data:h}=await n.get(l),p=r&&r.replace(/[^\w-_]/gi,"");let y;h[p]&&Array.isArray(h[p])?y=h[p]:y=Object.keys(h).length?[h]:[];const B={data:y,total:y.length,...h.offset?{pagination:{offset:h.offset}}:null};return s.value={status:Xe.Idle,response:B},B}catch(l){const h={data:[],total:0};return a.query&&l.response.status===404?(s.value={status:Xe.NoResults,response:h,error:l},h):(s.value={status:Xe.Error,response:h,error:l},h)}},fetcherState:s}}let Ii,ho,sp,ap,cp,lp,za,up,hp,pp,Wa,fp,dp,yp,gp,mp,vp,bp,wp,Sp,Ap,Ep,Bp,kp,Ja,_t,Xa,Za,Fg,$g,Ya,Gg,xp,Cp,Ip,Tp,Np,Op,Pp,Hp,Rp,_p,Qa,jp,Lp,Up,Dp,Mp,Vp,Fp,$p;Ii={useAxios:$a,useDeleteUrlBuilder:Cg,useErrors:jg,useFetchUrlBuilder:op,useDebouncedFilter:Mg,useFetcher:Vg,useI18n:Ga},ho=(t,e)=>{const r=t.__vccOpts||t;for(const[i,n]of e)r[i]=n;return r},sp={class:"toolbar-container"},ap={key:0,class:"toolbar-button-container"},cp=["data-testid"],lp=qt({__name:"EntityBaseTable",props:{tableHeaders:{type:Object,required:!0,default:()=>({})},fetcher:{type:Function,required:!0,default:async()=>({data:[],total:0})},initialFetcherParams:{type:Object,default:null},fetcherCacheKey:{type:Number,default:1},isLoading:{type:Boolean,default:!1},query:{type:String,default:""},enableClientSort:{type:Boolean,default:!1},enableEntityActions:{type:Boolean,default:!0},emptyStateOptions:{type:Object,default:()=>({})},errorMessage:{type:String,default:""},disablePaginationPageJump:{type:Boolean,default:void 0},disableSorting:{type:Boolean,default:void 0},paginationType:{type:String,default:void 0},cellAttributes:{type:Function,default:()=>({})},rowAttributes:{type:Function,default:()=>({})},preferencesStorageKey:{type:String,default:"",required:!0},dropdownMenuWidth:{type:String,default:"",required:!1}},emits:["click:row","sort","clear-search-input","empty-state-cta-clicked"],setup(t,{emit:e}){const r=t,{i18n:{t:i}}=Ii.useI18n(),n=ve(()=>{const d=[];return Object.keys(r.tableHeaders).forEach(v=>{const m=r.tableHeaders[v];d.push({label:m.label??v,key:v,sortable:m.sortable??!1})}),r.enableEntityActions&&d.push({key:"actions",hideLabel:!0}),d}),o=d=>({"data-rowid":d.id,"data-testid":d.name,...r.rowAttributes(d)}),s=d=>({"data-testid":d.headerKey,...r.cellAttributes(d)}),a=()=>{e("empty-state-cta-clicked"),l()},l=()=>{e("clear-search-input")},h=(d,v)=>{e("click:row",v)},p=d=>{e("sort",d)},{setTablePreferences:y,getTablePreferences:B}=Dg(),w=ve(()=>{const d=B(r.preferencesStorageKey);return{...r.initialFetcherParams,...d}}),f=d=>{r.preferencesStorageKey&&y(r.preferencesStorageKey,d)};return(d,v)=>{const m=he("KIcon"),S=he("KButton"),A=he("KDropdownMenu"),V=he("KTable"),ne=he("KCard");return Z(),st(ne,{class:"kong-ui-entity-base-table"},{body:R(()=>[$(V,{"cell-attrs":s,"disable-pagination-page-jump":t.disablePaginationPageJump,"disable-sorting":t.disableSorting,"empty-state-action-button-icon":t.query?"":"plus","empty-state-action-message":t.query?T(i)("baseTable.emptyState.noSearchResultsCtaText"):t.emptyStateOptions.ctaText,"empty-state-action-route":t.query?"":t.emptyStateOptions.ctaPath,"empty-state-icon":t.query?"stateNoSearchResults":"stateGruceo","empty-state-icon-size":"96","empty-state-message":t.query?T(i)("baseTable.emptyState.noSearchResultsMessage"):t.emptyStateOptions.message,"empty-state-title":t.query?T(i)("baseTable.emptyState.noSearchResultsTitle"):t.emptyStateOptions.title,"enable-client-sort":t.enableClientSort,"error-state-title":t.errorMessage,fetcher:t.fetcher,"fetcher-cache-key":String(t.fetcherCacheKey),"has-error":!!t.errorMessage,headers:T(n),"hide-pagination-when-optional":"","initial-fetcher-params":T(w),"is-loading":t.isLoading,"pagination-type":t.paginationType,"row-attrs":o,"search-input":t.query,onKtableEmptyStateCtaClicked:a,"onRow:click":h,onSort:p,"onUpdate:tablePreferences":f},po({toolbar:R(()=>[me("div",sp,[zr(d.$slots,"toolbar-filter",{},void 0,!0),d.$slots["toolbar-button"]?(Z(),pe("div",ap,[zr(d.$slots,"toolbar-button",{},void 0,!0)])):yo("",!0)])]),actions:R(({row:de,rowKey:te,rowValue:$e})=>[me("div",{class:"actions-container","data-testid":de.name},[$(A,{"kpop-attributes":{placement:"bottomEnd"},width:t.dropdownMenuWidth},{items:R(()=>[zr(d.$slots,"actions",{row:de,rowKey:te,rowValue:$e},void 0,!0)]),default:R(()=>[$(S,{class:"non-visual-button","data-testid":"overflow-actions-button",size:"small"},{icon:R(()=>[$(m,{color:"var(--black-400, #3c4557)",icon:"more",size:"16"})]),_:1})]),_:2},1032,["width"])],8,cp)]),_:2},[fo(t.tableHeaders,(de,te)=>({name:te,fn:R(({row:$e,rowKey:mt,rowValue:vt})=>[zr(d.$slots,te,{row:$e,rowKey:mt,rowValue:vt},void 0,!0)])}))]),1032,["disable-pagination-page-jump","disable-sorting","empty-state-action-button-icon","empty-state-action-message","empty-state-action-route","empty-state-icon","empty-state-message","empty-state-title","enable-client-sort","error-state-title","fetcher","fetcher-cache-key","has-error","headers","initial-fetcher-params","is-loading","pagination-type","search-input"])]),_:3})}}}),za=ho(lp,[["__scopeId","data-v-6eab8cd1"]]),up={key:0,class:"kong-ui-entity-delete-error"},hp={key:1,class:"description"},pp=qt({__name:"EntityDeleteModal",props:{visible:{type:Boolean,required:!0,default:!1},title:{type:String,default:"Delete"},entityType:{type:String,required:!0},entityName:{type:String,default:""},needConfirm:{type:Boolean,default:!0},description:{type:String,default:""},actionPending:{type:Boolean,default:!1},error:{type:String,default:""}},emits:["cancel","proceed"],setup(t,{emit:e}){const r=t,{i18nT:i}=Ii.useI18n(),n=ve(()=>r.needConfirm?r.entityName:""),o=()=>{e("cancel")},s=()=>{e("proceed")};return(a,l)=>{const h=he("KAlert"),p=he("KPrompt");return Z(),st(p,{"action-button-text":"Yes, delete","action-pending":t.actionPending,class:"kong-ui-entity-delete-modal","confirmation-text":T(n),"is-visible":t.visible,title:t.title,type:"danger",onCanceled:o,onProceed:s},{"body-content":R(()=>[t.error?(Z(),pe("div",up,[$(h,{appearance:"danger"},{alertMessage:R(()=>[xe(J(t.error),1)]),_:1})])):yo("",!0),$(T(i),{class:"message",keypath:r.entityName?"deleteModal.messageWithName":"deleteModal.message",tag:"p"},po({entityType:R(()=>[xe(J(r.entityType),1)]),_:2},[r.entityName?{name:"entityName",fn:R(()=>[me("strong",null,J(r.entityName),1)]),key:"0"}:void 0]),1032,["keypath"]),r.description||a.$slots.description?(Z(),pe("div",hp,[zr(a.$slots,"description",{},()=>[me("p",null,J(r.description),1)],!0)])):yo("",!0)]),_:3},8,["action-pending","confirmation-text","is-visible","title"])}}}),Wa=ho(pp,[["__scopeId","data-v-3513e33b"]]),fp={fill:"none",height:"20",viewBox:"0 0 20 20",width:"20",xmlns:"http://www.w3.org/2000/svg"},dp={id:"mask0_180_20349",height:"20",maskUnits:"userSpaceOnUse",style:{"mask-type":"alpha"},width:"20",x:"0",y:"0"},yp=["fill"],gp={mask:"url(#mask0_180_20349)"},mp=["fill"],vp=qt({__name:"IconFilter",props:{color:{type:String,default:"var(--kong-ui-entity-filter-color, var(--blue-500, #1155cb))"}},setup(t){return(e,r)=>(Z(),pe("svg",fp,[me("mask",dp,[me("rect",{fill:t.color,height:"20",width:"20"},null,8,yp)]),me("g",gp,[me("path",{d:"M8 14.5V13H12V14.5H8ZM5 10.75V9.25H15V10.75H5ZM3 7V5.5H17V7H3Z",fill:t.color},null,8,mp)])]))}}),bp={key:1,class:"kong-ui-entity-filter"},wp={class:"menu-item-title"},Sp={class:"menu-item-indicator"},Ap={class:"menu-item-body"},Ep=["for"],Bp={class:"menu-item-buttons"},kp=qt({__name:"EntityFilter",props:{config:{type:Object,required:!0,default:()=>({isExactMatch:!0,placeholder:""})},modelValue:{type:String,required:!0}},emits:["update:modelValue"],setup(t,{emit:e}){const r=t,{i18n:{t:i}}=Ii.useI18n(),n=ae(!1),o=ae({}),s=ve(()=>{const v=[];return new URLSearchParams(r.modelValue).forEach((m,S)=>{m!==""&&v.push(S)}),v}),a=ve(()=>{const v=r.config.fields;return Object.keys(v).filter(m=>v[m].searchable).map(m=>({label:v[m].label||m,value:m}))});Oi(()=>r.modelValue,v=>{o.value={},new URLSearchParams(v).forEach((m,S)=>{o.value[S]=m})});const l=()=>{n.value=!n.value},h=v=>{e("update:modelValue",v)},p=v=>`filter-${v}`,y=v=>{var m,S;return(((S=(m=r.config.schema)==null?void 0:m[v])==null?void 0:S.values)??[]).map(A=>({value:A,label:A}))},B=v=>{var m,S;return((S=(m=r.config.schema)==null?void 0:m[v])==null?void 0:S.type)??"text"},w=v=>{o.value={...o.value,[v]:""},d()},f=()=>{o.value={},d(!0)},d=(v=!1)=>{const m=Object.keys(o.value).reduce((S,A)=>(o.value[A]&&(S[A]=`${o.value[A]}`),S),{});v&&(n.value=!1),e("update:modelValue",new URLSearchParams(m).toString())};return(v,m)=>{const S=he("KInput"),A=he("KButton"),V=he("KSelect"),ne=he("KMenuItem"),de=he("KMenu");return t.config.isExactMatch?(Z(),st(S,{key:0,autocomplete:"off",class:"kong-ui-entity-filter-input","data-testid":"search-input","model-value":t.modelValue,placeholder:t.config.placeholder,"onUpdate:modelValue":h},{icon:R(()=>[$(vp)]),_:1},8,["model-value","placeholder"])):(Z(),pe("div",bp,[$(A,{appearance:"btn-link","data-testid":"filter-button",icon:"filter",onClick:l},{default:R(()=>[xe(J(T(i)("filter.filterButtonText"))+" "+J(T(s).length>0?`(${T(s).length})`:""),1)]),_:1}),Pi(me("div",{class:"kong-ui-entity-filter-backdrop",onClick:l},null,512),[[Hi,n.value]]),Pi($(de,{class:"kong-ui-entity-filter-menu"},{body:R(()=>[(Z(!0),pe(ic,null,fo(T(a),(te,$e)=>(Z(),st(ne,{key:te.value,"data-testid":te.value,expandable:"","last-menu-item":$e===T(a).length-1},{itemTitle:R(()=>[me("span",wp,[xe(J(te.label)+" ",1),Pi(me("span",Sp,null,512),[[Hi,T(s).includes(te.value)]])])]),itemBody:R(()=>{var mt,vt;return[me("div",Ap,[me("label",{class:"menu-item-label",for:p(te.value)},J(T(i)("filter.fieldLabel")),9,Ep),((vt=(mt=t.config.schema)==null?void 0:mt[te.value])==null?void 0:vt.type)==="select"?(Z(),st(V,{key:0,id:p(te.value),modelValue:o.value[te.value],"onUpdate:modelValue":ot=>o.value[te.value]=ot,appearance:"select",items:y(te.value),placeholder:T(i)("filter.selectPlaceholder")},null,8,["id","modelValue","onUpdate:modelValue","items","placeholder"])):(Z(),st(S,{key:1,id:p(te.value),modelValue:o.value[te.value],"onUpdate:modelValue":ot=>o.value[te.value]=ot,autocomplete:"off",placeholder:T(i)("filter.inputPlaceholder"),size:"small",type:B(te.value)},null,8,["id","modelValue","onUpdate:modelValue","placeholder","type"]))]),me("div",Bp,[$(A,{appearance:"btn-link","data-testid":"apply-filter",size:"small",onClick:m[0]||(m[0]=ot=>d(!0))},{default:R(()=>[xe(J(T(i)("filter.applyButtonText")),1)]),_:1}),$(A,{appearance:"btn-link","data-testid":"clear-filter",size:"small",onClick:ot=>w(te.value)},{default:R(()=>[xe(J(T(i)("filter.clearButtonText")),1)]),_:2},1032,["onClick"])])]}),_:2},1032,["data-testid","last-menu-item"]))),128))]),actionButton:R(()=>[$(A,{onClick:f},{default:R(()=>[xe(J(T(i)("filter.clearAllButtonText")),1)]),_:1})]),_:1},512),[[Hi,n.value]])]))}}}),Ja=ho(kp,[["__scopeId","data-v-fcf9a8f1"]]),_t=qt({__name:"PermissionsWrapper",props:{authFunction:{type:Function,required:!0,default:async()=>!0},forceShow:{type:Boolean,default:!1}},setup(t){const e=t,r=ae(void 0),i=ve(()=>r.value===!0||r.value!==void 0&&e.forceShow===!0);return rc(async()=>{r.value=await e.authFunction()}),(n,o)=>T(i)?zr(n.$slots,"default",{key:0,isAllowed:r.value}):yo("",!0)}}),{useAxios:Xa,useDeleteUrlBuilder:Za,useErrors:Fg,useFetchUrlBuilder:$g,useFetcher:Ya,useDebouncedFilter:Gg}=Ii,xp={class:"kong-ui-entities-certificates-list"},Cp={key:0},Ip={key:1},Tp={key:0},Np={key:1},Op={key:0},Pp={key:1},Hp={key:1},Rp={key:1},_p=qt({__name:"CertificateList",props:{config:{type:Object,required:!0,validator:t=>!(!t||!["konnect","kongManager"].includes(t==null?void 0:t.app)||!t.createRoute||!t.getViewRoute||!t.getEditRoute||t.app==="kongManager"&&!t.isExactMatch&&!t.filterSchema)},canCreate:{type:Function,required:!1,default:async()=>!0},canDelete:{type:Function,required:!1,default:async()=>!0},canEdit:{type:Function,required:!1,default:async()=>!0},canRetrieve:{type:Function,required:!1,default:async()=>!0}},emits:["error","loading","copy:success","copy:error","delete:success"],setup(t,{emit:e}){var r;const i=t;let n={};const{i18n:{t:o},i18nT:s}=so.useI18n(),a=so.useX509(),l=Sh(),h=Kp(),{axiosInstance:p}=Xa({headers:(r=i.config)==null?void 0:r.requestHeaders}),y=ae(1),B=ve(()=>i.config.app!=="kongManager"||!!i.config.disableSorting),w={subject:{label:o("certificates.list.table_headers.subject")},expiry:{label:o("certificates.list.table_headers.expiry")},san:{label:o("certificates.list.table_headers.san")},cert:{label:o("certificates.list.table_headers.cert")},tags:{label:o("certificates.list.table_headers.tags"),sortable:!0}},f=ve(()=>{var I,G;let ue=`${i.config.apiBaseUrl}${zd.list[i.config.app]}`;return i.config.app==="konnect"?ue=ue.replace(/{controlPlaneId}/gi,((I=i.config)==null?void 0:I.controlPlaneId)||""):i.config.app==="kongManager"&&(ue=ue.replace(/{workspace}/gi,((G=i.config)==null?void 0:G.workspace)||"")),ue}),d=ae(""),v=ve(()=>{const I=i.config.app==="konnect"||i.config.isExactMatch;return I?{isExactMatch:I,placeholder:o("certificates.search.placeholder")}:{isExactMatch:I,schema:i.config.filterSchema}}),{fetcher:m,fetcherState:S}=Ya(i.config,f.value),A=()=>{d.value=""},V=()=>{y.value++},ne=ae(""),de=ve(()=>S.value.status===Xe.Loading),te=ve(()=>{var I;return S.value.status===Xe.Idle&&!!((I=S.value.response)!=null&&I.data.length)}),$e=ve(()=>!de.value&&(te.value||!!d.value)),mt=(I,G)=>{const ue=I.id;if(!G(ue)){e("copy:error",{entity:I,field:"id",message:o("certificates.errors.copy")});return}e("copy:success",{entity:I,field:"id",message:o("certificates.copy.success",{val:ue})})},vt=(I,G)=>{const ue=JSON.stringify(I);if(!G(ue)){e("copy:error",{entity:I,message:o("certificates.errors.copy")});return}e("copy:success",{entity:I,message:o("certificates.copy.success_brief")})},ot=(I,G)=>{I.type==="error"?e("copy:error",{entity:G,field:"cert",message:o("certificates.errors.copy")}):e("copy:success",{entity:G,field:"cert",message:o("certificates.copy.success_brief")})},jt=async I=>{var G;await((G=i.canRetrieve)==null?void 0:G.call(i,I))&&h.push(i.config.getViewRoute(I.id))},Gr=I=>({label:o("certificates.actions.view"),to:i.config.getViewRoute(I)}),bt=I=>({label:o("certificates.actions.edit"),to:i.config.getEditRoute(I)}),Ze=ae(void 0),Ye=ae(!1),wt=ae(!1),dr=ae(""),yr=Za(i.config,f.value),Gt=I=>{if(!(I.id in n))try{n[I.id]=a.parseMetaCertificateData(I.cert)}catch{n[I.id]=void 0}return n[I.id]},ye=I=>{var G;return(G=Gt(I))==null?void 0:G.subject},St=I=>{var G;return(G=Gt(I))==null?void 0:G.notAfter},Ti=I=>{var G;return(G=Gt(I))==null?void 0:G.subjectAltName},ge=I=>{const G=St(I);return G?new Date(G).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}):void 0},Ni=I=>{Ze.value=I,Ye.value=!0},gr=()=>{Ye.value=!1},D=async()=>{var I,G,ue;if((I=Ze.value)!=null&&I.id){wt.value=!0;try{await p.delete(yr(Ze.value.id)),wt.value=!1,Ye.value=!1,y.value++,e("delete:success",Ze.value)}catch(Ue){dr.value=((ue=(G=Ue.response)==null?void 0:G.data)==null?void 0:ue.message)||Ue.message||o("certificates.errors.delete"),e("error",Ue)}finally{wt.value=!1}}};Oi(de,I=>{e("loading",I)},{immediate:!0}),Oi(S,I=>{if(I.status===Xe.Error){ne.value=o("certificates.errors.general"),e("error",I.error);return}n={},ne.value=""});const Q=ae({ctaPath:i.config.createRoute,ctaText:void 0,message:o("certificates.list.empty_state.description"),title:o("certificates.title")});return rc(async()=>{await i.canCreate()&&(Q.value.title=o("certificates.list.empty_state.title"),Q.value.ctaText=o("certificates.actions.create"))}),(I,G)=>{const ue=he("KButton"),Ue=he("KBadge"),Kr=he("KTruncate"),q=he("KDropdownItem"),Ae=he("KClipboardProvider");return Z(),pe("div",xp,[$(T(za),{"disable-pagination-page-jump":"","disable-sorting":T(B),"empty-state-options":Q.value,"enable-entity-actions":"","error-message":ne.value,fetcher:T(m),"fetcher-cache-key":y.value,"is-loading":T(de),"pagination-type":"offset","preferences-storage-key":"kong-ui-entities-certificates-list",query:d.value,"table-headers":T(w),onClearSearchInput:A,"onClick:row":G[2]||(G[2]=F=>jt(F)),onSort:V},po({"toolbar-filter":R(()=>[Pi($(T(Ja),{modelValue:d.value,"onUpdate:modelValue":G[0]||(G[0]=F=>d.value=F),config:T(v)},null,8,["modelValue","config"]),[[Hi,T($e)]])]),subject:R(({row:F})=>{var be;return[t.config.app==="konnect"?(Z(),pe("b",Cp,J((be=F==null?void 0:F.metadata)!=null&&be.subject?F.metadata.subject:"-"),1)):(Z(),pe("b",Ip,J(ye(F)||"-"),1))]}),expiry:R(({row:F})=>{var be;return[t.config.app==="konnect"?(Z(),pe("span",Tp,J((be=F==null?void 0:F.metadata)!=null&&be.expiry?T(l).formatDateBy(F.metadata.expiry):"-"),1)):(Z(),pe("span",Np,J(ge(F)||"-"),1))]}),san:R(({row:F})=>{var be;return[t.config.app==="konnect"?(Z(),pe("span",Op,J((be=F==null?void 0:F.metadata)!=null&&be.dns_names?`dns=${F.metadata.dns_names.join(", ")}`:"-"),1)):(Z(),pe("span",Pp,J(Ti(F)||"-"),1))]}),cert:R(({row:F})=>[F!=null&&F.cert?(Z(),st(T(xg),{key:0,"data-testid":"copy-certificate-cert",notify:be=>ot(be,F),truncated:!0,uuid:F.cert},null,8,["notify","uuid"])):(Z(),pe("span",Hp,"-"))]),tags:R(({row:F})=>{var be;return[((be=F==null?void 0:F.tags)==null?void 0:be.length)>0?(Z(),st(Kr,{key:0},{default:R(()=>[(Z(!0),pe(ic,null,fo(F==null?void 0:F.tags,qr=>(Z(),st(Ue,{key:qr,onClick:G[1]||(G[1]=nc(()=>{},["stop"]))},{default:R(()=>[xe(J(qr),1)]),_:2},1024))),128))]),_:2},1024)):(Z(),pe("span",Rp,"-"))]}),actions:R(({row:F})=>[$(Ae,null,{default:R(({copyToClipboard:be})=>[$(q,{"data-testid":"action-entity-copy-id",onClick:qr=>mt(F,be)},{default:R(()=>[xe(J(T(o)("certificates.actions.copy_id")),1)]),_:2},1032,["onClick"])]),_:2},1024),$(Ae,null,{default:R(({copyToClipboard:be})=>[$(q,{"data-testid":"action-entity-copy-json",onClick:qr=>vt(F,be)},{default:R(()=>[xe(J(T(o)("certificates.actions.copy_json")),1)]),_:2},1032,["onClick"])]),_:2},1024),$(T(_t),{"auth-function":()=>t.canRetrieve(F)},{default:R(()=>[$(q,{"data-testid":"action-entity-view","has-divider":"",item:Gr(F.id)},null,8,["item"])]),_:2},1032,["auth-function"]),$(T(_t),{"auth-function":()=>t.canEdit(F)},{default:R(()=>[$(q,{"data-testid":"action-entity-edit",item:bt(F.id)},null,8,["item"])]),_:2},1032,["auth-function"]),$(T(_t),{"auth-function":()=>t.canDelete(F)},{default:R(()=>[$(q,{"data-testid":"action-entity-delete","has-divider":"","is-dangerous":"",onClick:be=>Ni(F)},{default:R(()=>[xe(J(T(o)("certificates.actions.delete")),1)]),_:2},1032,["onClick"])]),_:2},1032,["auth-function"])]),_:2},[T($e)?{name:"toolbar-button",fn:R(()=>[$(T(_t),{"auth-function":()=>t.canCreate()},{default:R(()=>[$(ue,{appearance:"primary","data-testid":"toolbar-add-certificate",icon:"plus",to:t.config.createRoute},{default:R(()=>[xe(J(T(o)("certificates.list.toolbar_actions.new_certificate")),1)]),_:1},8,["to"])]),_:1},8,["auth-function"])]),key:"0"}:void 0]),1032,["disable-sorting","empty-state-options","error-message","fetcher","fetcher-cache-key","is-loading","query","table-headers"]),$(T(Wa),{"action-pending":wt.value,"entity-type":T(qa).Certificate,error:dr.value,title:T(o)("certificates.delete.title"),visible:Ye.value,onCancel:gr,onProceed:D},{description:R(()=>[$(T(s),{keypath:"certificates.delete.description",scope:"global"},{"bolded-text":R(()=>[me("b",null,J(T(o)("certificates.delete.boldedText")),1)]),_:1}),me("p",null,J(T(o)("certificates.delete.description2")),1)]),_:1},8,["action-pending","entity-type","error","title","visible"])])}}}),Qa=(t,e)=>{const r=t.__vccOpts||t;for(const[i,n]of e)r[i]=n;return r},Wp=Qa(_p,[["__scopeId","data-v-8224ddc0"]]),jp={list:{konnect:"/api/runtime_groups/{controlPlaneId}/ca_certificates",kongManager:"/{workspace}/ca_certificates"}},Lp={class:"kong-ui-entities-ca-certificates-list"},Up={key:0},Dp={key:1},Mp={key:0},Vp={key:1},Fp={key:1},$p=qt({__name:"CACertificateList",props:{config:{type:Object,required:!0,validator:t=>!(!t||!["konnect","kongManager"].includes(t==null?void 0:t.app)||!t.createRoute||!t.getViewRoute||!t.getEditRoute||t.app==="kongManager"&&!t.isExactMatch&&!t.filterSchema)},canCreate:{type:Function,required:!1,default:async()=>!0},canDelete:{type:Function,required:!1,default:async()=>!0},canEdit:{type:Function,required:!1,default:async()=>!0},canRetrieve:{type:Function,required:!1,default:async()=>!0}},emits:["error","loading","copy:success","copy:error","delete:success"],setup(t,{emit:e}){var r;const i=t;let n={};const{i18n:{t:o},i18nT:s}=so.useI18n(),a=so.useX509(),l=Sh(),h=Kp(),{axiosInstance:p}=Xa({headers:(r=i.config)==null?void 0:r.requestHeaders}),y=ae(1),B=ve(()=>i.config.app!=="kongManager"||!!i.config.disableSorting),w={issuer:{label:o("ca-certificates.list.table_headers.issuer")},expiry:{label:o("ca-certificates.list.table_headers.expiry")},tags:{label:o("ca-certificates.list.table_headers.tags"),sortable:!0}},f=ve(()=>{var D,Q;let I=`${i.config.apiBaseUrl}${jp.list[i.config.app]}`;return i.config.app==="konnect"?I=I.replace(/{controlPlaneId}/gi,((D=i.config)==null?void 0:D.controlPlaneId)||""):i.config.app==="kongManager"&&(I=I.replace(/{workspace}/gi,((Q=i.config)==null?void 0:Q.workspace)||"")),I}),d=ae(""),v=ve(()=>{const D=i.config.app==="konnect"||i.config.isExactMatch;return D?{isExactMatch:D,placeholder:o("ca-certificates.search.placeholder")}:{isExactMatch:D,schema:i.config.filterSchema}}),{fetcher:m,fetcherState:S}=Ya(i.config,f.value),A=()=>{d.value=""},V=()=>{y.value++},ne=ae(""),de=ve(()=>S.value.status===Xe.Loading),te=ve(()=>{var D;return S.value.status===Xe.Idle&&!!((D=S.value.response)!=null&&D.data.length)}),$e=ve(()=>!de.value&&(te.value||!!d.value)),mt=(D,Q)=>{const I=D.id;if(!Q(I)){e("copy:error",{entity:D,field:"id",message:o("ca-certificates.errors.copy")});return}e("copy:success",{entity:D,field:"id",message:o("ca-certificates.copy.success",{val:I})})},vt=(D,Q)=>{const I=JSON.stringify(D);if(!Q(I)){e("copy:error",{entity:D,message:o("ca-certificates.errors.copy")});return}e("copy:success",{entity:D,message:o("ca-certificates.copy.success_brief")})},ot=async D=>{var Q;await((Q=i.canRetrieve)==null?void 0:Q.call(i,D))&&h.push(i.config.getViewRoute(D.id))},jt=D=>({label:o("ca-certificates.actions.view"),to:i.config.getViewRoute(D)}),Gr=D=>({label:o("ca-certificates.actions.edit"),to:i.config.getEditRoute(D)}),bt=ae(void 0),Ze=ae(!1),Ye=ae(!1),wt=ae(""),dr=Za(i.config,f.value),yr=D=>{if(!(D.id in n))try{n[D.id]=a.parseMetaCertificateData(D.cert)}catch{n[D.id]=void 0}return n[D.id]},Gt=D=>{var Q;return(Q=yr(D))==null?void 0:Q.issuer},ye=D=>{var Q;return(Q=yr(D))==null?void 0:Q.notAfter},St=D=>{const Q=ye(D);return Q?new Date(Q).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",weekday:"short",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1}):void 0},Ti=D=>{bt.value=D,Ze.value=!0},ge=()=>{Ze.value=!1},Ni=async()=>{var D,Q,I;if((D=bt.value)!=null&&D.id){Ye.value=!0;try{await p.delete(dr(bt.value.id)),Ye.value=!1,Ze.value=!1,y.value++,e("delete:success",bt.value)}catch(G){wt.value=((I=(Q=G.response)==null?void 0:Q.data)==null?void 0:I.message)||G.message||o("ca-certificates.errors.delete"),e("error",G)}finally{Ye.value=!1}}};Oi(de,D=>{e("loading",D)},{immediate:!0}),Oi(S,D=>{if(D.status===Xe.Error){ne.value=o("ca-certificates.errors.general"),e("error",D.error);return}n={},ne.value=""});const gr=ae({ctaPath:i.config.createRoute,ctaText:void 0,message:o("ca-certificates.list.empty_state.description"),title:o("ca-certificates.title")});return rc(async()=>{await i.canCreate()&&(gr.value.title=o("ca-certificates.list.empty_state.title"),gr.value.ctaText=o("ca-certificates.actions.create"))}),(D,Q)=>{const I=he("KButton"),G=he("KBadge"),ue=he("KTruncate"),Ue=he("KDropdownItem"),Kr=he("KClipboardProvider");return Z(),pe("div",Lp,[$(T(za),{"disable-pagination-page-jump":"","disable-sorting":T(B),"empty-state-options":gr.value,"enable-entity-actions":"","error-message":ne.value,fetcher:T(m),"fetcher-cache-key":y.value,"is-loading":T(de),"pagination-type":"offset","preferences-storage-key":"kong-ui-entities-ca-certificates-list",query:d.value,"table-headers":T(w),onClearSearchInput:A,"onClick:row":Q[2]||(Q[2]=q=>ot(q)),onSort:V},po({"toolbar-filter":R(()=>[Pi($(T(Ja),{modelValue:d.value,"onUpdate:modelValue":Q[0]||(Q[0]=q=>d.value=q),config:T(v)},null,8,["modelValue","config"]),[[Hi,T($e)]])]),issuer:R(({row:q})=>{var Ae;return[t.config.app==="konnect"?(Z(),pe("b",Up,J((Ae=q==null?void 0:q.metadata)!=null&&Ae.issuer?q.metadata.issuer:"-"),1)):(Z(),pe("b",Dp,J(Gt(q)||"-"),1))]}),expiry:R(({row:q})=>{var Ae;return[t.config.app==="konnect"?(Z(),pe("span",Mp,J((Ae=q==null?void 0:q.metadata)!=null&&Ae.expiry?T(l).formatDateBy(q.metadata.expiry):"-"),1)):(Z(),pe("span",Vp,J(St(q)||"-"),1))]}),tags:R(({row:q})=>{var Ae;return[((Ae=q==null?void 0:q.tags)==null?void 0:Ae.length)>0?(Z(),st(ue,{key:0},{default:R(()=>[(Z(!0),pe(ic,null,fo(q==null?void 0:q.tags,F=>(Z(),st(G,{key:F,onClick:Q[1]||(Q[1]=nc(()=>{},["stop"]))},{default:R(()=>[xe(J(F),1)]),_:2},1024))),128))]),_:2},1024)):(Z(),pe("span",Fp,"-"))]}),actions:R(({row:q})=>[$(Kr,null,{default:R(({copyToClipboard:Ae})=>[$(Ue,{"data-testid":"action-entity-copy-id",onClick:F=>mt(q,Ae)},{default:R(()=>[xe(J(T(o)("ca-certificates.actions.copy_id")),1)]),_:2},1032,["onClick"])]),_:2},1024),$(Kr,null,{default:R(({copyToClipboard:Ae})=>[$(Ue,{"data-testid":"action-entity-copy-json",onClick:F=>vt(q,Ae)},{default:R(()=>[xe(J(T(o)("ca-certificates.actions.copy_json")),1)]),_:2},1032,["onClick"])]),_:2},1024),$(T(_t),{"auth-function":()=>t.canRetrieve(q)},{default:R(()=>[$(Ue,{"data-testid":"action-entity-view","has-divider":"",item:jt(q.id)},null,8,["item"])]),_:2},1032,["auth-function"]),$(T(_t),{"auth-function":()=>t.canEdit(q)},{default:R(()=>[$(Ue,{"data-testid":"action-entity-edit",item:Gr(q.id)},null,8,["item"])]),_:2},1032,["auth-function"]),$(T(_t),{"auth-function":()=>t.canDelete(q)},{default:R(()=>[$(Ue,{"data-testid":"action-entity-delete","has-divider":"","is-dangerous":"",onClick:Ae=>Ti(q)},{default:R(()=>[xe(J(T(o)("ca-certificates.actions.delete")),1)]),_:2},1032,["onClick"])]),_:2},1032,["auth-function"])]),_:2},[T($e)?{name:"toolbar-button",fn:R(()=>[$(T(_t),{"auth-function":()=>t.canCreate()},{default:R(()=>[$(I,{appearance:"primary","data-testid":"toolbar-add-ca-certificate",icon:"plus",to:t.config.createRoute},{default:R(()=>[xe(J(T(o)("ca-certificates.list.toolbar_actions.new_ca_certificate")),1)]),_:1},8,["to"])]),_:1},8,["auth-function"])]),key:"0"}:void 0]),1032,["disable-sorting","empty-state-options","error-message","fetcher","fetcher-cache-key","is-loading","query","table-headers"]),$(T(Wa),{"action-pending":Ye.value,"entity-type":T(qa).CACertificate,error:wt.value,title:T(o)("ca-certificates.delete.title"),visible:Ze.value,onCancel:ge,onProceed:Ni},{description:R(()=>[$(T(s),{keypath:"ca-certificates.delete.description",scope:"global"},{"bolded-text":R(()=>[me("b",null,J(T(o)("ca-certificates.delete.boldedText")),1)]),_:1}),me("p",null,J(T(o)("ca-certificates.delete.description2")),1)]),_:1},8,["action-pending","entity-type","error","title","visible"])])}}}),Jp=Qa($p,[["__scopeId","data-v-4ae47a39"]])});export{Wp as G,Jp as K,Yg as __tla};
