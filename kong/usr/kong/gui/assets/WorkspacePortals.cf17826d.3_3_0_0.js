/*
  This software is copyright Kong Inc. and its licensors.
  Use of the software is subject to the agreement between your organization
  and Kong Inc. If there is no such agreement, use is governed by and
  subject to the terms of the Kong Master Software License Agreement found
  at https://konghq.com/enterprisesoftwarelicense/.
*/

import{_ as h,W as oa,at as sa,r as l,o as r,c as s,b as n,w as d,a as t,h as f,G as P,i as la,t as na,V as ca,d as m,p as ia,e as pa,R as da,U as ua,l as ka,z as _,Q as ma,H as ha,u as wa,J as va,__tla as _a}from"./index.84d84090.3_3_0_0.js";import{W as fa,__tla as Pa}from"./WorkspaceMixin.71f3f83c.3_3_0_0.js";import{__tla as ga}from"./monaco-editor.90904fcf.3_3_0_0.js";let g,ba=Promise.all([(()=>{try{return _a}catch{}})(),(()=>{try{return Pa}catch{}})(),(()=>{try{return ga}catch{}})()]).then(async()=>{const b={name:"PortalCard",components:{WorkspaceTitle:oa},props:{workspace:{type:Object,required:!0}},data(){return{isEmpty:!1,hasError:!1,masterPortalAuth:null,portalUrl:null}},computed:{portalAuth(){return this.workspace.config.portal_auth&&this.workspace.config.portal_auth!==""?!0:this.workspace.config.portal_auth===""?!1:this.masterPortalAuth}},mounted(){this.getPortalConfig()},methods:{getPortalConfig(){return this.$api.getInfo(this.workspace.name).then(a=>{const o=a.data.configuration;this.portalUrl=sa(o,this.workspace.name),this.masterPortalAuth=o.portal_auth||null}).catch(()=>{this.hasError=!0})},onPortalCardClick(){this.$router.push({name:"portal-overview",params:{workspace:this.workspace.name}})},ctaAction(){this.$router.push({name:"portal"})}}},w=a=>(ia("data-v-188a66ee"),a=a(),pa(),a),y={class:"portal-title"},C={"aria-hidden":"true"},D={key:0,class:"material-icons lock"},A={key:0,class:"k-card empty text-center"},L=m(" Set up Dev Portal "),$={key:1},E={key:0,class:"k-card error"},U=m(" This resource could not be loaded "),W={key:1},x={class:"d-flex portal-url"},I=w(()=>t("span",null,"URL",-1)),K=["href"],T=w(()=>t("hr",null,null,-1)),H={class:"overview-link"},M=m(" Dev Portal Overview "),O=w(()=>t("span",{"aria-hidden":"true"},[t("i",{class:"material-icons"},"chevron_right")],-1));function R(a,o,e,v,c,p){const i=l("WorkspaceTitle"),u=l("KButton"),k=l("KEmptyState"),ra=l("router-link"),ta=l("KCard");return r(),s("div",{class:ca(["workspace-card portal-card",`workspace-${e.workspace.name}`]),onClick:o[1]||(o[1]=Ca=>p.onPortalCardClick())},[n(ta,{"has-hover":!0,"border-variant":"border"},{title:d(()=>[t("div",y,[n(i,{title:e.workspace.name,"background-color":e.workspace.meta&&e.workspace.meta.color,icon:e.workspace.meta&&e.workspace.meta.thumbnail},null,8,["title","background-color","icon"])])]),actions:d(()=>[t("div",C,[p.portalAuth&&e.workspace.config.portal?(r(),s("i",D,"lock")):f("",!0)])]),body:d(()=>[e.workspace.config.portal===!1?(r(),s("div",A,[P(a.$slots,"empty",{},()=>[n(k,null,{cta:d(()=>[n(u,{to:{name:"portal-overview",params:{workspace:e.workspace.name}},appearance:"outline"},{default:d(()=>[L]),_:1},8,["to"])]),_:1})],!0)])):(r(),s("div",$,[c.hasError?(r(),s("div",E,[t("div",null,[P(a.$slots,"error",{},()=>[U],!0)])])):c.portalUrl?(r(),s("div",W,[t("div",x,[I,t("a",{href:c.portalUrl,rel:"noopener",target:"_blank",class:"portal-url truncate",onClick:o[0]||(o[0]=la(()=>{},["stop"]))},na(c.portalUrl),9,K)]),T])):f("",!0),t("div",H,[n(ra,{to:{name:"portal-overview",params:{workspace:e.workspace.name}}},{default:d(()=>[M,O]),_:1},8,["to"])])]))]),_:3})],2)}const q={name:"PortalCardList",components:{PortalCard:h(b,[["render",R],["__scopeId","data-v-188a66ee"]])},props:{workspaces:{type:Array,required:!0}}},S={class:"workspace-card-wrapper"};function j(a,o,e,v,c,p){const i=l("PortalCard");return r(),s("div",S,[(r(!0),s(da,null,ua(e.workspaces,(u,k)=>(r(),ka(i,{key:k,workspace:u},null,8,["workspace"]))),128))])}const z=h(q,[["render",j],["__scopeId","data-v-f39f2826"]]),B={name:"PortalDisabledMessage",computed:{..._(ma,{portalDocs:"docsPortal"})}},G=m(" Learn how to enable and configure Dev Portal "),J=["href"],Q=m(". ");function V(a,o,e,v,c,p){const i=l("KAlert");return r(),s("div",null,[n(i,{class:"mb-4",appearance:"danger","alert-message":"Dev Portal is not enabled."}),t("p",null,[G,t("a",{href:`${a.portalDocs.url}/enable/`,rel:"noopener",target:"_blank"},"here",8,J),Q])])}const F=h(B,[["render",V],["__scopeId","data-v-4f53d5ef"]]),N={name:"WorkspacePortals",components:{PortalCardList:z,PageHeader:ha,PortalDisabledMessage:F},mixins:[fa],data(){return{workspaceList:[]}},computed:{portalsEnabled(){return this.$config.PORTAL},..._(wa,{perms:"permissions"}),..._(va,["workspaces"])},mounted(){this.workspaceList=this.workspaces.sort((a,o)=>a.name.localeCompare(o.name))}},X={class:"workspace-overview"},Y={key:0},Z={class:"workspace-list"},aa={key:1,class:"mb-7"};function ea(a,o,e,v,c,p){const i=l("PageHeader"),u=l("PortalCardList"),k=l("PortalDisabledMessage");return r(),s("section",X,[n(i,{title:"Dev Portals"}),p.portalsEnabled?(r(),s("div",Y,[t("div",Z,[n(u,{workspaces:c.workspaceList},null,8,["workspaces"])])])):(r(),s("div",aa,[n(k)]))])}g=h(N,[["render",ea]])});export{ba as __tla,g as default};
