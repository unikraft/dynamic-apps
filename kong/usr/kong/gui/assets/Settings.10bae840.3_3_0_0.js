/*
  This software is copyright Kong Inc. and its licensors.
  Use of the software is subject to the agreement between your organization
  and Kong Inc. If there is no such agreement, use is governed by and
  subject to the terms of the Kong Master Software License Agreement found
  at https://konghq.com/enterprisesoftwarelicense/.
*/

import{_ as w,r as h,o as n,c as p,G as M,b as u,m as x,n as N,g as K,a as s,l as y,w as r,h as g,k as T,v as A,R as S,p as D,e as R,H as st,N as it,T as rt,M as dt,z as ct,Q as pt,J as ut,a8 as I,d as f,t as v,U as E,V,ab as P,E as O,__tla as ft}from"./index.84d84090.3_3_0_0.js";import{W as mt,__tla as ht}from"./WorkspaceMixin.71f3f83c.3_3_0_0.js";import{E as gt,__tla as yt}from"./EntityMixin.2764673d.3_3_0_0.js";import{T as _t,__tla as bt}from"./Tabs.fabb4b38.3_3_0_0.js";import{__tla as vt}from"./monaco-editor.90904fcf.3_3_0_0.js";import{__tla as kt}from"./EntityButton.1838e0e9.3_3_0_0.js";import{__tla as wt}from"./EntityFilter.bf4158bc.3_3_0_0.js";let U,St=Promise.all([(()=>{try{return ft}catch{}})(),(()=>{try{return ht}catch{}})(),(()=>{try{return yt}catch{}})(),(()=>{try{return bt}catch{}})(),(()=>{try{return vt}catch{}})(),(()=>{try{return kt}catch{}})(),(()=>{try{return wt}catch{}})()]).then(async()=>{const J={name:"PortalSelectSetting",props:{confKey:{type:String,default:""},defaultValue:{type:[String,Boolean],default:""},workspaceValue:{type:[String,Boolean],default:null},options:{type:Array,default:()=>[{text:"Enabled",value:!0},{text:"Disabled",value:!1}]},onUpdate:{type:Function,default:()=>{}}},data(){return{selectModel:null}},computed:{defaultText(){return(this.options.find(e=>e.value===this.defaultValue)||{text:""}).text},optionItems(){return[{value:"default",label:`Default (${this.defaultText})`},...this.options.map(e=>({label:e.text,value:e.value}))]}},watch:{selectModel:{handler(){let e;this.selectModel==="default"?e=null:this.selectModel==="disabled"?e="":e=this.selectModel,this.onUpdate(this.confKey,e)}},workspaceValue:{handler(){this.workspaceValue===null?this.selectModel="default":this.workspaceValue===""?this.selectModel="disabled":this.selectModel=this.workspaceValue},immediate:!0}}},q=["data-testid"];function L(e,t,l,i,a,d){const b=h("KSelect");return n(),p("div",{"data-testid":l.confKey},[M(e.$slots,"header"),u(b,{modelValue:a.selectModel,"onUpdate:modelValue":t[0]||(t[0]=c=>a.selectModel=c),"data-testid":l.confKey+"_select",appearance:"select",width:"30%",items:d.optionItems},null,8,["modelValue","data-testid","items"])],8,q)}const W=w(J,[["render",L]]),j={name:"PortalJsonSetting",props:{confKey:{type:String,default:""},workspaceValue:{type:String,default:null},onUpdate:{type:Function,default:()=>{}}},data(){return{textModel:null,selectModel:null,buttonAttributes:{id:"pretty-print"}}},computed:{showText(){return this.selectModel==="custom"}},watch:{selectModel(e){e==="default"?this.textModel=null:(this.textModel=this.workspaceValue||"{}",this.prettyPrint())},textModel(){this.onUpdate(this.confKey,this.textModel)},workspaceValue:{handler(){this.workspaceValue===null?this.selectModel="default":this.selectModel="custom"},immediate:!0}},methods:{...x(N,["notify"]),prettyPrint(){if(this.textModel!==null)try{this.textModel=JSON.stringify(JSON.parse(this.textModel),void 0,4)}catch(e){this.notify({message:K(e),type:"danger"})}}}},F=e=>(D("data-v-65541028"),e=e(),R(),e),$=["data-testid"],B=F(()=>s("i",{title:"pretty print",class:"material-icons md-18"}," format_indent_increase ",-1)),H=F(()=>s("span",null," pretty print ",-1)),Y=["data-testid"];function z(e,t,l,i,a,d){const b=h("KSelect"),c=h("KButton");return n(),p(S,null,[M(e.$slots,"header",{},void 0,!0),s("div",{class:"flex justify-between","data-testid":l.confKey},[u(b,{modelValue:a.selectModel,"onUpdate:modelValue":t[0]||(t[0]=m=>a.selectModel=m),"data-testid":l.confKey+"_select",appearance:"select",width:"30%",items:[{value:"default",label:"Default"},{value:"custom",label:"Custom"}]},null,8,["modelValue","data-testid"]),d.showText?(n(),y(c,{key:0,appearance:"outline",class:"pretty-print",onClick:d.prettyPrint},{default:r(()=>[B,H]),_:1},8,["onClick"])):g("",!0)],8,$),d.showText?T((n(),p("textarea",{key:0,"onUpdate:modelValue":t[1]||(t[1]=m=>a.textModel=m),"data-testid":l.confKey+"_textarea",class:"form-control",rows:"15"},null,8,Y)),[[A,a.textModel]]):g("",!0)],64)}const G=w(j,[["render",z],["__scopeId","data-v-65541028"]]),Q={"developer-meta-fields":{type:"array",itemContainerComponent:"FieldArrayMultiItem",fieldClasses:"w-100",newElementButtonLabel:"+ Add Field",fieldItemsClasses:"pt-4",newElementButtonLabelClasses:"meta-fields-add-field k-button btn-link mt-2 p-2",inputAttributes:{class:"form-control",style:{minWidth:"200px"}},styleClasses:"w-100",valueArrayType:"string",label:"Developer Meta Fields",items:{type:"object",default:()=>({type_of_input:"text"}),schema:{fields:[{type:"input",model:"input",placeholder:"Company Name, Personal Email ...etc",inputType:"text",label:'Label <span class="label-hint">User facing label for the input</span>',id:"meta-fields-inputs"},{type:"input",model:"field_name",placeholder:"company_name, personal_email ...etc",label:'Field Name <span class="label-hint">Used by API/HTML to reference input value</span>',inputType:"text",id:"meta-fields-field-name"},{type:"select",inputType:"select",model:"type_of_input",label:'Type of Input <span class="label-hint">The type of the input requested from the user</span>',values:["text","email","number"],id:"meta-fields-type-of-input"},{type:"checkbox",inputType:"checkbox",label:'Required <span class="label-hint">This field will be required to register</span>',model:"required",id:"meta-fields-required",class:"go-left"}]}}}},X={name:"PortalDeveloperMetaFields",mixins:[gt],props:{workspaceValue:{type:Object,default:null},onUpdate:{type:Function,default:()=>{}}},data(){this.schema=Q;const e=this.parseSchema();return{originalModel:{},formModel:this.workspaceValue||{},formSchema:e.schema,formOptions:e.options,oldField:[]}},watch:{formModel:{handler(e){e["developer-meta-fields"].forEach((t,l)=>{t.input&&t.input!==this.oldField[l]&&(this.formModel["developer-meta-fields"][l].field_name=t.input.toLowerCase().replace(/\s+/g,"_"),this.oldField[l]=t.input)}),this.onUpdate("portal_developer_meta_fields",this.formModel)},deep:!0},workspaceValue:{handler(e){e===null?this.formModel={}:(this.formModel=e,this.oldField=e["developer-meta-fields"].map(t=>t.input))},immediate:!0}}},Z={class:"developer-meta-container"},ee=s("hr",null,null,-1);function te(e,t,l,i,a,d){const b=h("VueFormGenerator");return n(),p("div",Z,[ee,u(b,{schema:a.formSchema,model:a.formModel,options:a.formOptions},null,8,["schema","model","options"])])}const ae=w(X,[["render",te]]),le={name:"PortalInputSetting",props:{confKey:{type:String,default:""},defaultValue:{type:[String,Number],default:""},workspaceValue:{type:[String,Number],default:null},options:{type:Array,default:()=>[{text:"Default",value:"default"},{text:"Custom",value:"custom"}]},type:{type:Function,default:String},onUpdate:{type:Function,default:()=>{}}},data(){return{selectModel:null,inputModel:null}},watch:{selectModel(){this.update()},workspaceValue:{handler(){this.workspaceValue===null?(this.selectModel="default",this.inputModel=this.defaultValue):(this.selectModel="custom",this.inputModel=this.workspaceValue)},immediate:!0},inputModel(){this.update()}},methods:{adjustType(e){return this.type===Number&&typeof e!="number"?parseInt(e):e},update(){let e;this.selectModel==="default"?e=null:e=this.adjustType(this.inputModel),this.onUpdate(this.confKey,e)}}},oe=["data-testid"],ne=["disabled","data-testid"];function se(e,t,l,i,a,d){const b=h("KSelect");return n(),p("div",{"data-testid":l.confKey},[M(e.$slots,"header"),u(b,{modelValue:a.selectModel,"onUpdate:modelValue":t[0]||(t[0]=c=>a.selectModel=c),"data-testid":l.confKey+"_select",appearance:"select",width:"30%",items:l.options.map(c=>({value:c.value,label:c.text}))},null,8,["modelValue","data-testid","items"]),T(s("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>a.inputModel=c),disabled:a.selectModel==="default","data-testid":l.confKey+"_input",class:"form-control"},null,8,ne),[[A,a.inputModel]])],8,oe)}const ie=w(le,[["render",se]]),re={name:"PortalArraySetting",props:{confKey:{type:String,default:""},defaultValue:{type:[Object,Array],default:null},workspaceValue:{type:[Object,Array],default:null},options:{type:Array,default:()=>[{text:"Default",value:"default"},{text:"Custom",value:"custom"}]},onUpdate:{type:Function,default:()=>{}}},data(){return{selectModel:null,inputModel:null}},watch:{selectModel(){this.update()},workspaceValue:{handler(){let e;this.workspaceValue===null?(this.selectModel="default",e=this.defaultValue):(this.selectModel="custom",e=this.workspaceValue),Array.isArray(e)?this.inputModel=e.join(","):this.inputModel=""},immediate:!0},inputModel(){this.update()}},methods:{update(){let e;this.selectModel==="default"?e=null:e=this.inputModel.trim().split(","),this.onUpdate(this.confKey,e)}}},de=["data-testid"],ce=["disabled","data-testid"];function pe(e,t,l,i,a,d){const b=h("KSelect");return n(),p("div",{"data-testid":l.confKey},[M(e.$slots,"header"),u(b,{modelValue:a.selectModel,"onUpdate:modelValue":t[0]||(t[0]=c=>a.selectModel=c),"data-testid":l.confKey+"_select",appearance:"select",width:"30%",items:l.options.map(c=>({value:c.value,label:c.text}))},null,8,["modelValue","data-testid","items"]),T(s("input",{"onUpdate:modelValue":t[1]||(t[1]=c=>a.inputModel=c),disabled:a.selectModel==="default","data-testid":l.confKey+"_input",class:"form-control"},null,8,ce),[[A,a.inputModel]])],8,de)}const ue=w(re,[["render",pe]]),fe={name:"PortalSettings",components:{PageHeader:st,Tabs:_t,PortalSelectSetting:W,PortalJsonSetting:G,PortalDeveloperMetaFieldsSetting:ae,PortalInputSetting:ie,PortalArraySetting:ue},mixins:[mt,it,rt],data(){return{requestError:null,modalError:null,modalIsVisible:!1,tabs:[{title:"Authentication",hash:"#authentication"},{title:"Developer Meta Fields",hash:"#developer-meta-fields"},{title:"Email",hash:"#email"},{title:"Networking",hash:"#networking"},{title:"Advanced",hash:"#advanced"}],footerTabs:["#authentication","#developer-meta-fields","#email","#networking"],defaultConfig:null,workspaceConfig:null,workspaceConfigCopy:null,settings:{auth:[{component:"PortalSelectSetting",confKey:"portal_auth",label:"Authentication plugin",desc:"Here you may specify the authentication plugin to apply to your Dev Portal. Developers will use the specified form of authentication to request access, register, and login to your Dev Portal.",options:[{text:"Basic Authentication",value:"basic-auth"},{text:"Key Authentication",value:"key-auth"},{text:"Open ID Connect",value:"openid-connect"},{text:"Disable Authentication",value:"disabled"}]},{component:"PortalJsonSetting",confKey:"portal_auth_conf",label:"Auth Config (JSON)",desc:"Here you may specify the plugin configuration object in JSON format to be applied to your Dev Portal authenticaion."},{component:"PortalJsonSetting",confKey:"portal_session_conf",label:"Session Config (JSON)",desc:"Here you may specify the session configuration object in JSON format to be applied to your Dev Portal session"},{component:"PortalSelectSetting",confKey:"portal_auto_approve",label:"Auto Approve Access",desc:'When this flag is set to "true", a developer will automatically be marked as "approved" after completing registration.'}],developerMetaFields:[{component:"PortalDeveloperMetaFieldsSetting",confKey:"portal_developer_meta_fields",label:"Add Field",desc:"Add extra fields to portal registration page"}],email:[{component:"PortalSelectSetting",confKey:"portal_invite_email",label:"Invite Email",desc:"Enabled or disable the portal_invite_email"},{component:"PortalSelectSetting",confKey:"portal_access_request_email",label:"Access Request Email",desc:"Enabled or disable the portal_access_request_email"},{component:"PortalSelectSetting",confKey:"portal_approved_email",label:"Approved Email",desc:"Enabled or disable the portal_approved_email"},{component:"PortalSelectSetting",confKey:"portal_reset_email",label:"Reset Password Email",desc:"Enabled or disable the portal_reset_email"},{component:"PortalSelectSetting",confKey:"portal_reset_success_email",label:"Reset Password Success Email",desc:"Enabled or disable the portal_reset_success_email"},{component:"PortalSelectSetting",confKey:"portal_application_status_email",label:"Developer Application Status Email",desc:"Enabled or disable the portal_application_status_email"},{component:"PortalSelectSetting",confKey:"portal_application_request_email",label:"Application Request Email",desc:"Enabled or disable the portal_application_request_email"},{component:"PortalInputSetting",confKey:"portal_token_exp",label:"Reset Token Expiration",desc:"Duration in seconds for the expiration of the portal reset token",type:Number},{component:"PortalInputSetting",confKey:"portal_emails_from",label:"Email From Address",desc:'The name and email address for the `From` header for portal emails. Example "Your Name example@example.com" Note: Some SMTP servers will not use this value, but instead insert the email and name associated with the account.'},{component:"PortalInputSetting",confKey:"portal_emails_reply_to",label:"Email Reply To Address",desc:'The name and email address for the `Reply To` header for portal emails. Example "Your Name example@example.com" Note: Some SMTP servers will not use this value, but instead insert the email and name associated with the account.'},{component:"PortalArraySetting",confKey:"portal_smtp_admin_emails",label:"Portal Admin Email Recipients",desc:"A comma separated list of admin emails to receive portal notifications. If this workspace setting or the conf value for 'portal_smtp_admin_emails' is not set, 'smtp_admin_emails' will be used instead."}],networking:[{component:"PortalArraySetting",confKey:"portal_cors_origins",label:"CORS Origins",desc:"A comma separated list of allowed domains for dev portal Access-Control-Allow-Origin` header. This can be used to resolve CORS issues in custom networking environments. `*` can be used to allow all domains."}]},defualtSettings:{portal_developer_meta_fields:{"developer-meta-fields":[{type_of_input:"text",input:"Full Name",field_name:"full_name",required:!0}]}},machine:dt({id:"portalMachine",initial:"idle",states:{idle:{on:{ON:"on",OFF:"off"}},off:{on:{TURN_ON:"turningOn"}},on:{on:{TURN_OFF:"confirm",SUBMIT:"submitting"}},confirm:{on:{CONFIRM:"turningOff",CANCEL:"on"}},turningOn:{on:{RESOLVE:"on",REJECT:"error"}},turningOff:{on:{RESOLVE:"off",REJECT:"error"}},error:{on:{type:"final"}},submitting:{on:{RESOLVE:"on",REJECT:"error"}}}})}},computed:{...ct(pt,{docsLink:"docsEnterprise"}),devPortalSwitchMessage(){return`${this.workspace} Dev Portal has been ${this.workspaceConfig.portal?"enabled":"disabled"}`},buttonText(){return{confirm:"Turn Off",on:"Turn Off",turningOn:"Turning On",off:"Turn On",turningOff:"Turning Off",submitting:"Submitting..."}[this.currentState]},portalIsLegacy(){return this.workspaceConfig.portal_is_legacy===null?this.defaultConfig.portal_is_legacy:this.workspaceConfig.portal_is_legacy}},mounted(){this.init()},methods:{...x(N,["notify"]),...x(ut,["setWorkspaceConfig"]),async init(){this.defaultConfig=await this.getDefaultConfig();const e=await this.fetchWorkspace();this.initWorkspaceConfig(e.config)},onUpdate(e,t){this.workspaceConfig[e]=t},disablePortal(){this.togglePortal(!1,"Dev Portal has been disabled"),this.modalIsVisible=!1},cancelTogglePortal(){this.modalIsVisible=!1},async togglePortal(){if(this.currentState==="on"){this.transition("TURN_OFF");return}else this.currentState==="confirm"?this.transition("CONFIRM"):this.transition("TURN_ON");try{await this.updateWorkspaceConfig({portal:!this.workspaceConfig.portal}),I.trackEvent(I.EVENTS.PORTAL_ENABLED),this.handleSuccess()}catch(e){this.handleError(e)}},handleSuccess(){this.transition("RESOLVE"),this.notify({message:this.devPortalSwitchMessage,type:"success"})},handleError(e){this.transition("REJECT"),this.notify({message:K(e),type:"danger"})},cloneConfig(e){const t=l=>l.map(i=>Array.isArray(i)?t(i):typeof i=="object"&&i!==null?this.cloneConfig(i):i);return Object.keys(e).reduce((l,i)=>{const a=e[i];return Array.isArray(a)?l[i]=t(a):typeof a=="object"&&a!==null?l[i]=this.cloneConfig(a):l[i]=a,l},{})},stringifyJSONFields(e){const t=this.cloneConfig(e);return Object.keys(this.settings).forEach(l=>{this.settings[l].forEach(i=>{const a=t[i.confKey];i.component==="PortalJsonSetting"&&typeof a=="object"&&a!==null&&(t[i.confKey]=JSON.stringify(a))})}),t},parseJSONFields(e){const t=this.cloneConfig(e);return Object.keys(this.settings).forEach(l=>{this.settings[l].forEach(i=>{const a=t[i.confKey];i.component==="PortalJsonSetting"&&typeof a=="string"&&(t[i.confKey]=JSON.parse(a))})}),t},initWorkspaceConfig(e){this.workspaceConfigCopy=this.cloneConfig(e),e=this.stringifyJSONFields(e),this.workspaceConfig=this.transformWorkspaceConfigFromApi(e),this.transition(e.portal?"ON":"OFF")},resetToDefaultValues(e){e.forEach(t=>{const l=this.defualtSettings[t.confKey]?this.cloneConfig(this.defualtSettings[t.confKey]):null;this.workspaceConfig[t.confKey]=l})},cancel(){this.requestError=null,this.initWorkspaceConfig(this.workspaceConfigCopy)},transformExtraFieldsConfigToSchema(){if(!this.workspaceConfig.portal_developer_meta_fields||!this.workspaceConfig.portal_developer_meta_fields["developer-meta-fields"])return;const e={email:"string",text:"string",number:"number"},t=this.workspaceConfig.portal_developer_meta_fields["developer-meta-fields"];return JSON.stringify(t.map(l=>({title:l.field_name,label:l.input,is_email:l.type_of_input==="email",validator:{type:e[l.type_of_input],required:l.required}})))},transformWorkspaceConfigFromApi(e){if(!e.portal_developer_meta_fields||e.portal_developer_meta_fields==="{}"||e.portal_developer_meta_fields===null)return e.portal_developer_meta_fields={"developer-meta-fields":[]},e;const t={string:"text",number:"number"},l=JSON.parse(e.portal_developer_meta_fields).map(i=>({field_name:i.title,input:i.label,type_of_input:i.is_email?"email":t[i.validator.type],required:i.validator.required}));return e.portal_developer_meta_fields={"developer-meta-fields":l},e},async updateWorkspaceConfig(e){const t=await this.$api.updateWorkspace(this.workspace,{config:this.parseJSONFields(e)});this.setWorkspaceConfig(t.data.config),this.initWorkspaceConfig(t.data.config)},async submitForm(){this.requestError=null;const e={...this.workspaceConfig};e.portal_developer_meta_fields=this.transformExtraFieldsConfigToSchema(),this.transition("SUBMIT");try{await this.updateWorkspaceConfig(e),this.transition("RESOLVE"),this.notify({message:this.workspace+"'s settings have been saved",type:"success"})}catch(t){this.transition("RESOLVE"),this.requestError=K(t)}}}},_=e=>(D("data-v-606b40ad"),e=e(),R(),e),me={key:0,class:"form-container"},he={key:0,class:"switch-container"},ge=_(()=>s("label",null,"Dev Portal Switch",-1)),ye=_(()=>s("p",null," When enabled, Kong will expose the Dev Portal interface and read-only APIs on the `portal_gui_listen` address, and endpoints on the Admin API to manage assets.",-1)),_e=_(()=>s("div",null," When turning on the portal for first time, it can take up to a few minutes to populate the files. ",-1)),be=_(()=>s("span",null,"You are about to disable your Dev Portal, you will lose the ability to view documentation for these Gateway Services.",-1)),ve=_(()=>s("p",null,"You can turn it back on at any time",-1)),ke={key:0,class:"error-message mt-4"},we=f(" Turn Off "),Se=f(" Cancel "),Ce=f(" You are using legacy portal rendering. "),Me=_(()=>s("br",null,null,-1)),Ee=f(" Switch to non-legacy mode to enable file permissions, appearance editing, and more. "),Pe=_(()=>s("br",null,null,-1)),Oe=f(" Read the "),xe=["href"],Ke=f(" for more information on how to upgrade "),Te={key:3,id:"form-wrapper"},Ae=_(()=>s("div",{class:"overlay"},null,-1)),Ve={class:"row tabs-wrapper"},Fe={class:"config-header"},Ne=f(" Manage authentication configuration "),De=f(" Reset to default "),Re={class:"config-header"},Ie=f(" Manage dev portal developer meta fields "),Ue=_(()=>s("br",null,null,-1)),Je=f(" These fields are shown on registration, and under user settings when logged in to portal. "),qe=f(" Reset to default "),Le={class:"config-header"},We=f(" Manage dev portal email configuration "),je=f(" Reset to default "),$e={class:"config-header"},Be=f(" Manage dev portal networking configuration "),He=f(" Reset to default "),Ye={class:"mt-4"},ze=_(()=>s("label",null,"Dev Portal Switch",-1)),Ge=_(()=>s("p",null," When enabled, Kong will expose the Dev Portal interface and read-only APIs on the `portal_gui_listen` address, and endpoints on the Admin API to manage assets.",-1)),Qe={key:0},Xe=f(" Cancel "),Ze={key:0,class:"error-message mt-4"};function et(e,t,l,i,a,d){const b=h("PageHeader"),c=h("KIcon"),m=h("KButton"),C=h("KAlert"),tt=h("KPrompt"),at=h("Tabs"),lt=h("RbacEmptyList"),ot=h("RbacValidate");return a.workspaceConfig?(n(),y(ot,{key:0,workspace:e.workspace,restricted:[{path:`/workspaces/${e.workspace}`,actions:["read"]}]},{default:r(({isAllowed:nt})=>[nt?(n(),p("section",me,[u(b,{title:"Dev Portal Settings",class:"page-header"}),a.workspaceConfig.portal===!1?(n(),p("div",he,[ge,ye,u(m,{disabled:["turningOn","turningOff"].includes(e.currentState),class:"mb-4",appearance:"primary","data-testid":"portalSwitch",onClick:d.togglePortal},{icon:r(()=>[["turningOn","turningOff"].includes(e.currentState)?(n(),y(c,{key:0,icon:"spinner",size:"16"})):g("",!0)]),default:r(()=>[f(" "+v(d.buttonText),1)]),_:1},8,["disabled","onClick"]),_e])):g("",!0),u(tt,{"is-visible":e.currentState==="confirm",title:"Turn Dev Portal Off","tabbable-options":e.tabbableOptions,onCanceled:t[1]||(t[1]=()=>e.transition("CANCEL"))},{"body-content":r(()=>[be,ve,a.modalError?(n(),p("div",ke,[u(C,{"alert-message":a.modalError,appearance:"danger"},null,8,["alert-message"])])):g("",!0)]),"action-buttons":r(()=>[u(m,{appearance:"danger",onClick:d.togglePortal},{default:r(()=>[we]),_:1},8,["onClick"]),u(m,{appearance:"outline",onClick:t[0]||(t[0]=()=>e.transition("CANCEL"))},{default:r(()=>[Se]),_:1})]),_:1},8,["is-visible","tabbable-options"]),a.workspaceConfig.portal===!0&&d.portalIsLegacy?(n(),y(C,{key:1,"has-left-border":"",appearance:"danger",class:"mb-4"},{alertMessage:r(()=>[Ce,Me,Ee,Pe,Oe,s("a",{href:`${e.docsLink.url}/reference/configuration/#portal_is_legacy`},"docs",8,xe),Ke]),_:1})):g("",!0),a.workspaceConfig.portal===!0?(n(),y(C,{key:2,"has-left-border":"",appearance:"warning",class:"mb-4","alert-message":"Making changes in Kong Manager will override the default settings for this dev portal."})):g("",!0),a.workspaceConfig.portal===!0?(n(),p("div",Te,[Ae,s("div",Ve,[u(at,{tabs:a.tabs},{Authentication:r(()=>[s("div",Fe,[Ne,u(m,{appearance:"outline",class:"reset-button",onClick:t[2]||(t[2]=o=>d.resetToDefaultValues(a.settings.auth))},{default:r(()=>[De]),_:1})]),(n(!0),p(S,null,E(a.settings.auth,(o,k)=>(n(),p("div",{key:k,class:V([{grey:k%2===0},"portal-setting"])},[(n(),y(P(o.component),O(o,{"on-update":d.onUpdate,"workspace-value":a.workspaceConfig[o.confKey],"default-value":a.defaultConfig[o.confKey]}),{header:r(()=>[s("label",null,v(o.label),1),s("p",null,v(o.desc),1)]),_:2},1040,["on-update","workspace-value","default-value"]))],2))),128))]),"Developer-Meta-Fields":r(()=>[s("div",Re,[Ie,Ue,Je,u(m,{appearance:"outline",class:"reset-button",onClick:t[3]||(t[3]=o=>d.resetToDefaultValues(a.settings.developerMetaFields))},{default:r(()=>[qe]),_:1})]),(n(!0),p(S,null,E(a.settings.developerMetaFields,(o,k)=>(n(),p("div",{key:k},[(n(),y(P(o.component),O(o,{"on-update":d.onUpdate,"workspace-value":a.workspaceConfig[o.confKey],"default-value":a.defaultConfig[o.confKey]}),{header:r(()=>[s("label",null,v(o.label),1),s("p",null,v(o.desc),1)]),_:2},1040,["on-update","workspace-value","default-value"]))]))),128))]),Email:r(()=>[s("div",Le,[We,u(m,{name:"cancel",appearance:"outline",class:"reset-button",onClick:t[4]||(t[4]=o=>d.resetToDefaultValues(a.settings.email))},{default:r(()=>[je]),_:1})]),(n(!0),p(S,null,E(a.settings.email,(o,k)=>(n(),p("div",{key:k,class:V([{grey:k%2===0},"portal-setting"])},[(n(),y(P(o.component),O(o,{type:o.type,"on-update":d.onUpdate,"workspace-value":a.workspaceConfig[o.confKey],"default-value":a.defaultConfig[o.confKey]}),{header:r(()=>[s("label",null,v(o.label),1),s("p",null,v(o.desc),1)]),_:2},1040,["type","on-update","workspace-value","default-value"]))],2))),128))]),Networking:r(()=>[s("div",$e,[Be,u(m,{appearance:"outline",class:"reset-button",onClick:t[5]||(t[5]=o=>d.resetToDefaultValues(a.settings.networking))},{default:r(()=>[He]),_:1})]),(n(!0),p(S,null,E(a.settings.networking,(o,k)=>(n(),p("div",{key:k,class:V([{grey:k%2===0},"portal-setting"])},[(n(),y(P(o.component),O(o,{"on-update":d.onUpdate,"workspace-value":a.workspaceConfig[o.confKey],"default-value":a.defaultConfig[o.confKey]}),{header:r(()=>[s("label",null,v(o.label),1),s("p",null,v(o.desc),1)]),_:2},1040,["on-update","workspace-value","default-value"]))],2))),128))]),Advanced:r(()=>[s("div",Ye,[ze,Ge,u(m,{appearance:a.workspaceConfig.portal?"outline":"primary",disabled:["turningOn","turningOff"].includes(e.currentState),class:"mb-4","data-testid":"portalSwitch",onClick:d.togglePortal},{icon:r(()=>[["turningOn","turningOff"].includes(e.currentState)?(n(),y(c,{key:0,icon:"spinner",size:"16"})):g("",!0)]),default:r(()=>[f(" "+v(d.buttonText),1)]),_:1},8,["appearance","disabled","onClick"])])]),_:1},8,["tabs"]),a.footerTabs.includes(e.$route.hash)?(n(),p("section",Qe,[u(m,{disabled:e.currentState==="submitting","data-testid":"submit-button",appearance:"primary",name:"save",class:"mt-4",onClick:t[6]||(t[6]=o=>d.submitForm())},{icon:r(()=>[e.currentState==="submitting"?(n(),y(c,{key:0,icon:"spinner",size:"16"})):g("",!0)]),default:r(()=>[f(" "+v(e.currentState==="submitting"?d.buttonText:"Save Changes"),1)]),_:1},8,["disabled"]),u(m,{appearance:"outline",name:"cancel",class:"mt-4 ml-2","data-testid":"cancel-button",onClick:t[7]||(t[7]=o=>d.cancel())},{default:r(()=>[Xe]),_:1})])):g("",!0)]),a.requestError?(n(),p("div",Ze,[u(C,{"alert-message":a.requestError,"is-showing":"",appearance:"danger"},null,8,["alert-message"])])):g("",!0)])):g("",!0)])):(n(),y(lt,{key:1}))]),_:1},8,["workspace","restricted"])):g("",!0)}U=w(fe,[["render",et],["__scopeId","data-v-606b40ad"]])});export{St as __tla,U as default};
