/*
  This software is copyright Kong Inc. and its licensors.
  Use of the software is subject to the agreement between your organization
  and Kong Inc. If there is no such agreement, use is governed by and
  subject to the terms of the Kong Master Software License Agreement found
  at https://konghq.com/enterprisesoftwarelicense/.
*/

import{L as at,__tla as et}from"./VitalsDisabled.f093ed15.3_3_0_0.js";import{C as st,__tla as rt}from"./LineChartWrapper.be3dd56e.3_3_0_0.js";import{_ as j,ad as it,r as N,o as e,c as s,a as n,t as y,h as g,R as v,U as C,b as A,af as lt,__tla as ot}from"./index.84d84090.3_3_0_0.js";import{g as T}from"./chartHelpers.1bf67333.3_3_0_0.js";let w,F,nt=Promise.all([(()=>{try{return et}catch{}})(),(()=>{try{return rt}catch{}})(),(()=>{try{return ot}catch{}})()]).then(async()=>{const U={name:"NodeChartList",components:{LineChart:at,ChartTooltip:st},props:{chartVisible:{type:Boolean,default:null},chartList:{type:Object,default:null},siblingEvent:{type:Object,default:null},height:{type:Number,default:null},notifySiblings:{type:Function,default:null},timeFrame:{type:Object,default:null},isUtc:{type:Boolean,default:!1}},methods:{legend(t){return!t||!t.datasets?[]:t.datasets.reduce((d,a)=>(d.push({color:a.borderColor,label:a.label,max:a.data.reduce((o,{y:r})=>!r||parseInt(r)<=o?o:parseInt(r),0),min:a.data.reduce((o,{y:r})=>!r||parseInt(r)>=o?o:parseInt(r),0)}),d),[])},getChartAriaLabel(t){var o,r,u,i,c,l,x;const d=[`Line chart showing the ${t.ariaChartName??((r=(o=this.chartList)==null?void 0:o.title)==null?void 0:r.toLowerCase())??((u=this.title)==null?void 0:u.toLowerCase())}`],a=(c=(i=this.timeFrame)==null?void 0:i.text)==null?void 0:c.toLowerCase();if(a){d.push(`in ${a}.`);const b=[];(x=(l=t==null?void 0:t.processedData)==null?void 0:l.datasets)==null||x.forEach(L=>{var _,k;const m=L.data.reduce((f,p)=>{const h={...f};return(!h.min||h.min.y>p.y)&&(h.min=p),(!h.max||h.max.y<p.y)&&(h.max=p),h},{min:null,max:null});if(m.max&&m.max.y){const f=it(m.max.x*1e3),p=this.isUtc?f.utc().format("LT UTC on LL"):f.format("LT on LL"),h=L.hostname??L.label,I=m.max.y%1===0?Number.parseInt(m.max.y):m.max.y,O=I===1?(_=t==null?void 0:t.ariaUnitNames)==null?void 0:_[0]:(k=t==null?void 0:t.ariaUnitNames)==null?void 0:k[1],tt=[String(I),...O?[O]:[]].join(" ");b.push(`As for ${h==="cluster"?"the cluster":`node ${h}`}, the most recent maximum value ${tt} appears at ${p}.`)}}),b.length===0&&b.push("No data available"),d.push(b.join(" "))}return d.join(" ")},getChartCanvasAttrs(t){return{role:"img","aria-label":this.getChartAriaLabel(t),"aria-live":"polite"}}}},$={class:"col"},B={key:0,class:"chart-list-title d-flex align-items-center"},D={class:"pr-1 text-lg"},E={class:"col"},S={key:0,class:"text-uppercase chart-title mb-1"},V={key:1,class:"row chart-wrapper"},H={class:"col-12"};function M(t,d,a,o,r,u){const i=N("LineChart"),c=N("ChartTooltip");return e(),s("div",$,[a.chartList.title?(e(),s("div",B,[n("div",D,y(a.chartList.title),1)])):g("",!0),(e(!0),s(v,null,C(a.chartList.charts,l=>(e(),s("div",{key:l.id,class:"row mb-2"},[n("div",E,[a.chartList.showChartTitle?(e(),s("div",S,y(l.title),1)):g("",!0),a.chartVisible?(e(),s("div",V,[n("div",H,[A(i,{"update-options":a.chartList.updateOptions,"notify-siblings":a.notifySiblings,"sibling-event":a.siblingEvent,height:a.height,"chart-id":l.chartId,"chart-data":l.processedData,"canvas-attrs":u.getChartCanvasAttrs(l),options:l.options},null,8,["update-options","notify-siblings","sibling-event","height","chart-id","chart-data","canvas-attrs","options"])]),A(c,{title:l.title,"tooltip-model":l.tooltipModel},null,8,["title","tooltip-model"])])):g("",!0)])]))),128))])}w=j(U,[["render",M],["__scopeId","data-v-f103005c"]]);const P={name:"ChartDataTable",props:{list:{type:Object,default:null},nodes:{type:Object,default:null}},data(){return{sortingIndex:0,sortOrder:1,sortFunction:()=>0}},computed:{nodeArray(){return!this.list||!this.list.table?[]:Object.keys(this.list.table).filter(t=>this.nodes[t]&&this.nodes[t].active&&this.nodes[t].state).map(t=>({data:this.list.table[t],nodeId:t,hostname:this.nodes[t].hostname,color:T(this.nodes[t].color,1)}))},sortedNodeArray(){return[...this.nodeArray].sort(this.sortFunction)}},methods:{getHslaFromColorObj:T,sortList(t,d){d===this.sortingIndex?this.sortOrder*=-1:this.sortingIndex=d,this.sortFunction=(a,o)=>this.sortOrder*t.sortBy(a,o)}}},R={class:"chart-data-table"},q={class:"k-table has-hover"},z=["onClick"],G={class:"d-flex align-items-center sort-toggle"},J={class:"material-icons sort-icon"},K={key:0},Z={key:0},Q={key:1},W={key:0},X={key:1};function Y(t,d,a,o,r,u){return e(),s("div",R,[n("table",q,[n("thead",null,[n("tr",null,[(e(!0),s(v,null,C(a.list.dataTableConfig,(i,c)=>(e(),s("th",{key:i.header,onClick:l=>u.sortList(i,c)},[n("div",G,[n("div",null,y(i.header),1),n("i",J,[c===r.sortingIndex?(e(),s("span",K,[r.sortOrder>0?(e(),s("span",Z,"\uE316")):(e(),s("span",Q,"\uE313"))])):g("",!0)])])],8,z))),128))])]),n("tbody",null,[(e(!0),s(v,null,C(u.sortedNodeArray,i=>(e(),s("tr",{key:i.nodeId},[(e(!0),s(v,null,C(a.list.dataTableConfig,(c,l)=>(e(),s("th",{key:c.header},[l===0?(e(),s("span",W,[n("i",{style:lt({color:i.color}),class:"material-icons md-20 mr-1 float-left"},"\uE15B",4),n("div",null,y(i.hostname),1)])):(e(),s("span",X,y(c.formatter(i.data,i.nodeId)),1))]))),128))]))),128))])])])}F=j(P,[["render",Y],["__scopeId","data-v-d20a19fd"]])});export{w as N,nt as __tla,F as a};
