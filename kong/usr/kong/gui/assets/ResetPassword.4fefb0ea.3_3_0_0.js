/*
  This software is copyright Kong Inc. and its licensors.
  Use of the software is subject to the agreement between your organization
  and Kong Inc. If there is no such agreement, use is governed by and
  subject to the terms of the Kong Master Software License Agreement found
  at https://konghq.com/enterprisesoftwarelicense/.
*/

import{_ as M,g as U,r as n,c as o,b as l,w as d,o as i,h as V,a,k as u,v as c,t as A,i as h,j as T,d as j,__tla as z}from"./index.84d84090.3_3_0_0.js";import{__tla as B}from"./monaco-editor.90904fcf.3_3_0_0.js";let p,D=Promise.all([(()=>{try{return z}catch{}})(),(()=>{try{return B}catch{}})()]).then(async()=>{const w={name:"ResetPassword",data(){return{message:null,email:this.$route.query.email,token:this.$route.query.token,password:null,confirmPassword:null,isSubmitting:!1,hasSuccess:!1}},computed:{doesPasswordMatch(){return this.password===this.confirmPassword}},created(){(!this.email||!this.token)&&this.$router.push({name:"login"})},methods:{submitForm(){this.message=null,this.isSubmitting=!0,setTimeout(this.resetEmail,300)},resetEmail(){if(!this.doesPasswordMatch){this.message="Passwords do not match",this.isSubmitting=!1;return}const m={token:this.token,email:this.email,password:this.password};this.$api.resetPassword(m).then(()=>{this.isSubmitting=!1,this.hasSuccess=!0,this.email=null}).catch(s=>{this.isSubmitting=!1,this.password=this.confirmPassword=null,s.response.status===409?this.message="Error saving password. Please try again or try another password.":this.message=U(s)})}}},b={class:"reset-password"},g={key:0},f=a("h4",{class:"mb-4 text-center"}," Reset Password ",-1),P={key:0,class:"mb-4"},y={class:"form-group mb-4"},_=a("label",{for:"password"},"Password",-1),S={class:"form-group"},k=a("label",{for:"password-confirm"},"Confirm Password",-1),v=["disabled"],C={key:1,class:"success text-center"},F=a("h4",{class:"mb-4"}," Password Reset Successful! ",-1),q=a("p",null,"Your password has been reset. Continue to login.",-1),R=j(" Continue to login ");function x(m,s,N,Y,t,r){const E=n("KAlert"),K=n("router-link"),$=n("KCard");return i(),o("div",b,[l($,null,{body:d(()=>[t.hasSuccess?(i(),o("div",C,[F,q,l(K,{to:"/login",class:"btn btn-primary btn-block mt-4 mb-2"},{default:d(()=>[R]),_:1})])):(i(),o("div",g,[f,t.message?(i(),o("div",P,[l(E,{"alert-message":t.message,appearance:"danger"},null,8,["alert-message"])])):V("",!0),a("form",{onSubmit:s[2]||(s[2]=h((...e)=>r.submitForm&&r.submitForm(...e),["prevent"])),onKeydown:s[3]||(s[3]=T(h((...e)=>r.submitForm&&r.submitForm(...e),["prevent"]),["enter"]))},[a("div",y,[_,u(a("input",{id:"password","onUpdate:modelValue":s[0]||(s[0]=e=>t.password=e),class:"form-control",placeholder:"Password",type:"password",required:""},null,512),[[c,t.password]])]),a("div",S,[k,u(a("input",{id:"password-confirm","onUpdate:modelValue":s[1]||(s[1]=e=>t.confirmPassword=e),class:"form-control",placeholder:"Confirm Password",type:"password",required:""},null,512),[[c,t.confirmPassword]])]),a("button",{disabled:t.isSubmitting||!t.password||!t.confirmPassword,class:"btn btn-primary btn-block mt-4 mb-4",type:"submit"},A(t.isSubmitting?"Submitting...":"Reset Password"),9,v)],32)]))]),_:1})])}p=M(w,[["render",x]])});export{D as __tla,p as default};
